(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();function jR(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var _E={exports:{}},tc={},vE={exports:{}},se={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Da=Symbol.for("react.element"),e0=Symbol.for("react.portal"),t0=Symbol.for("react.fragment"),n0=Symbol.for("react.strict_mode"),r0=Symbol.for("react.profiler"),i0=Symbol.for("react.provider"),o0=Symbol.for("react.context"),s0=Symbol.for("react.forward_ref"),a0=Symbol.for("react.suspense"),l0=Symbol.for("react.memo"),u0=Symbol.for("react.lazy"),Og=Symbol.iterator;function c0(t){return t===null||typeof t!="object"?null:(t=Og&&t[Og]||t["@@iterator"],typeof t=="function"?t:null)}var TE={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},EE=Object.assign,CE={};function Ho(t,e,n){this.props=t,this.context=e,this.refs=CE,this.updater=n||TE}Ho.prototype.isReactComponent={};Ho.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ho.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function IE(){}IE.prototype=Ho.prototype;function Oh(t,e,n){this.props=t,this.context=e,this.refs=CE,this.updater=n||TE}var Bh=Oh.prototype=new IE;Bh.constructor=Oh;EE(Bh,Ho.prototype);Bh.isPureReactComponent=!0;var Bg=Array.isArray,wE=Object.prototype.hasOwnProperty,qh={current:null},SE={key:!0,ref:!0,__self:!0,__source:!0};function AE(t,e,n){var r,i={},o=null,s=null;if(e!=null)for(r in e.ref!==void 0&&(s=e.ref),e.key!==void 0&&(o=""+e.key),e)wE.call(e,r)&&!SE.hasOwnProperty(r)&&(i[r]=e[r]);var u=arguments.length-2;if(u===1)i.children=n;else if(1<u){for(var c=Array(u),f=0;f<u;f++)c[f]=arguments[f+2];i.children=c}if(t&&t.defaultProps)for(r in u=t.defaultProps,u)i[r]===void 0&&(i[r]=u[r]);return{$$typeof:Da,type:t,key:o,ref:s,props:i,_owner:qh.current}}function f0(t,e){return{$$typeof:Da,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function $h(t){return typeof t=="object"&&t!==null&&t.$$typeof===Da}function d0(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var qg=/\/+/g;function hf(t,e){return typeof t=="object"&&t!==null&&t.key!=null?d0(""+t.key):e.toString(36)}function Fl(t,e,n,r,i){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var s=!1;if(t===null)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case Da:case e0:s=!0}}if(s)return s=t,i=i(s),t=r===""?"."+hf(s,0):r,Bg(i)?(n="",t!=null&&(n=t.replace(qg,"$&/")+"/"),Fl(i,e,n,"",function(f){return f})):i!=null&&($h(i)&&(i=f0(i,n+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(qg,"$&/")+"/")+t)),e.push(i)),1;if(s=0,r=r===""?".":r+":",Bg(t))for(var u=0;u<t.length;u++){o=t[u];var c=r+hf(o,u);s+=Fl(o,e,n,c,i)}else if(c=c0(t),typeof c=="function")for(t=c.call(t),u=0;!(o=t.next()).done;)o=o.value,c=r+hf(o,u++),s+=Fl(o,e,n,c,i);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return s}function ul(t,e,n){if(t==null)return t;var r=[],i=0;return Fl(t,r,"","",function(o){return e.call(n,o,i++)}),r}function h0(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var At={current:null},bl={transition:null},p0={ReactCurrentDispatcher:At,ReactCurrentBatchConfig:bl,ReactCurrentOwner:qh};function RE(){throw Error("act(...) is not supported in production builds of React.")}se.Children={map:ul,forEach:function(t,e,n){ul(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return ul(t,function(){e++}),e},toArray:function(t){return ul(t,function(e){return e})||[]},only:function(t){if(!$h(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};se.Component=Ho;se.Fragment=t0;se.Profiler=r0;se.PureComponent=Oh;se.StrictMode=n0;se.Suspense=a0;se.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=p0;se.act=RE;se.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=EE({},t.props),i=t.key,o=t.ref,s=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,s=qh.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var u=t.type.defaultProps;for(c in e)wE.call(e,c)&&!SE.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&u!==void 0?u[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){u=Array(c);for(var f=0;f<c;f++)u[f]=arguments[f+2];r.children=u}return{$$typeof:Da,type:t.type,key:i,ref:o,props:r,_owner:s}};se.createContext=function(t){return t={$$typeof:o0,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:i0,_context:t},t.Consumer=t};se.createElement=AE;se.createFactory=function(t){var e=AE.bind(null,t);return e.type=t,e};se.createRef=function(){return{current:null}};se.forwardRef=function(t){return{$$typeof:s0,render:t}};se.isValidElement=$h;se.lazy=function(t){return{$$typeof:u0,_payload:{_status:-1,_result:t},_init:h0}};se.memo=function(t,e){return{$$typeof:l0,type:t,compare:e===void 0?null:e}};se.startTransition=function(t){var e=bl.transition;bl.transition={};try{t()}finally{bl.transition=e}};se.unstable_act=RE;se.useCallback=function(t,e){return At.current.useCallback(t,e)};se.useContext=function(t){return At.current.useContext(t)};se.useDebugValue=function(){};se.useDeferredValue=function(t){return At.current.useDeferredValue(t)};se.useEffect=function(t,e){return At.current.useEffect(t,e)};se.useId=function(){return At.current.useId()};se.useImperativeHandle=function(t,e,n){return At.current.useImperativeHandle(t,e,n)};se.useInsertionEffect=function(t,e){return At.current.useInsertionEffect(t,e)};se.useLayoutEffect=function(t,e){return At.current.useLayoutEffect(t,e)};se.useMemo=function(t,e){return At.current.useMemo(t,e)};se.useReducer=function(t,e,n){return At.current.useReducer(t,e,n)};se.useRef=function(t){return At.current.useRef(t)};se.useState=function(t){return At.current.useState(t)};se.useSyncExternalStore=function(t,e,n){return At.current.useSyncExternalStore(t,e,n)};se.useTransition=function(){return At.current.useTransition()};se.version="18.3.1";vE.exports=se;var ae=vE.exports;const PE=jR(ae);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var m0=ae,g0=Symbol.for("react.element"),y0=Symbol.for("react.fragment"),_0=Object.prototype.hasOwnProperty,v0=m0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,T0={key:!0,ref:!0,__self:!0,__source:!0};function kE(t,e,n){var r,i={},o=null,s=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(s=e.ref);for(r in e)_0.call(e,r)&&!T0.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:g0,type:t,key:o,ref:s,props:i,_owner:v0.current}}tc.Fragment=y0;tc.jsx=kE;tc.jsxs=kE;_E.exports=tc;var V=_E.exports,NE={exports:{}},Jt={},ME={exports:{}},xE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(G,Z){var te=G.length;G.push(Z);e:for(;0<te;){var Te=te-1>>>1,Me=G[Te];if(0<i(Me,Z))G[Te]=Z,G[te]=Me,te=Te;else break e}}function n(G){return G.length===0?null:G[0]}function r(G){if(G.length===0)return null;var Z=G[0],te=G.pop();if(te!==Z){G[0]=te;e:for(var Te=0,Me=G.length,$n=Me>>>1;Te<$n;){var Pt=2*(Te+1)-1,In=G[Pt],kt=Pt+1,wn=G[kt];if(0>i(In,te))kt<Me&&0>i(wn,In)?(G[Te]=wn,G[kt]=te,Te=kt):(G[Te]=In,G[Pt]=te,Te=Pt);else if(kt<Me&&0>i(wn,te))G[Te]=wn,G[kt]=te,Te=kt;else break e}}return Z}function i(G,Z){var te=G.sortIndex-Z.sortIndex;return te!==0?te:G.id-Z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,u=s.now();t.unstable_now=function(){return s.now()-u}}var c=[],f=[],h=1,p=null,m=3,_=!1,I=!1,P=!1,x=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function A(G){for(var Z=n(f);Z!==null;){if(Z.callback===null)r(f);else if(Z.startTime<=G)r(f),Z.sortIndex=Z.expirationTime,e(c,Z);else break;Z=n(f)}}function D(G){if(P=!1,A(G),!I)if(n(c)!==null)I=!0,Ot(F);else{var Z=n(f);Z!==null&&qn(D,Z.startTime-G)}}function F(G,Z){I=!1,P&&(P=!1,S(T),T=-1),_=!0;var te=m;try{for(A(Z),p=n(c);p!==null&&(!(p.expirationTime>Z)||G&&!k());){var Te=p.callback;if(typeof Te=="function"){p.callback=null,m=p.priorityLevel;var Me=Te(p.expirationTime<=Z);Z=t.unstable_now(),typeof Me=="function"?p.callback=Me:p===n(c)&&r(c),A(Z)}else r(c);p=n(c)}if(p!==null)var $n=!0;else{var Pt=n(f);Pt!==null&&qn(D,Pt.startTime-Z),$n=!1}return $n}finally{p=null,m=te,_=!1}}var b=!1,v=null,T=-1,w=5,R=-1;function k(){return!(t.unstable_now()-R<w)}function M(){if(v!==null){var G=t.unstable_now();R=G;var Z=!0;try{Z=v(!0,G)}finally{Z?N():(b=!1,v=null)}}else b=!1}var N;if(typeof C=="function")N=function(){C(M)};else if(typeof MessageChannel<"u"){var ve=new MessageChannel,ye=ve.port2;ve.port1.onmessage=M,N=function(){ye.postMessage(null)}}else N=function(){x(M,0)};function Ot(G){v=G,b||(b=!0,N())}function qn(G,Z){T=x(function(){G(t.unstable_now())},Z)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(G){G.callback=null},t.unstable_continueExecution=function(){I||_||(I=!0,Ot(F))},t.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<G?Math.floor(1e3/G):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(G){switch(m){case 1:case 2:case 3:var Z=3;break;default:Z=m}var te=m;m=Z;try{return G()}finally{m=te}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(G,Z){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var te=m;m=G;try{return Z()}finally{m=te}},t.unstable_scheduleCallback=function(G,Z,te){var Te=t.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?Te+te:Te):te=Te,G){case 1:var Me=-1;break;case 2:Me=250;break;case 5:Me=1073741823;break;case 4:Me=1e4;break;default:Me=5e3}return Me=te+Me,G={id:h++,callback:Z,priorityLevel:G,startTime:te,expirationTime:Me,sortIndex:-1},te>Te?(G.sortIndex=te,e(f,G),n(c)===null&&G===n(f)&&(P?(S(T),T=-1):P=!0,qn(D,te-Te))):(G.sortIndex=Me,e(c,G),I||_||(I=!0,Ot(F))),G},t.unstable_shouldYield=k,t.unstable_wrapCallback=function(G){var Z=m;return function(){var te=m;m=Z;try{return G.apply(this,arguments)}finally{m=te}}}})(xE);ME.exports=xE;var E0=ME.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var C0=ae,Kt=E0;function $(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var DE=new Set,oa={};function Li(t,e){Po(t,e),Po(t+"Capture",e)}function Po(t,e){for(oa[t]=e,t=0;t<e.length;t++)DE.add(e[t])}var jn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ld=Object.prototype.hasOwnProperty,I0=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,$g={},Hg={};function w0(t){return ld.call(Hg,t)?!0:ld.call($g,t)?!1:I0.test(t)?Hg[t]=!0:($g[t]=!0,!1)}function S0(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function A0(t,e,n,r){if(e===null||typeof e>"u"||S0(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Rt(t,e,n,r,i,o,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=s}var at={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){at[t]=new Rt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];at[e]=new Rt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){at[t]=new Rt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){at[t]=new Rt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){at[t]=new Rt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){at[t]=new Rt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){at[t]=new Rt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){at[t]=new Rt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){at[t]=new Rt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Hh=/[\-:]([a-z])/g;function Gh(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Hh,Gh);at[e]=new Rt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Hh,Gh);at[e]=new Rt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Hh,Gh);at[e]=new Rt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){at[t]=new Rt(t,1,!1,t.toLowerCase(),null,!1,!1)});at.xlinkHref=new Rt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){at[t]=new Rt(t,1,!1,t.toLowerCase(),null,!0,!0)});function zh(t,e,n,r){var i=at.hasOwnProperty(e)?at[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(A0(e,n,i,r)&&(n=null),r||i===null?w0(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var ar=C0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,cl=Symbol.for("react.element"),ji=Symbol.for("react.portal"),eo=Symbol.for("react.fragment"),Wh=Symbol.for("react.strict_mode"),ud=Symbol.for("react.profiler"),VE=Symbol.for("react.provider"),LE=Symbol.for("react.context"),Kh=Symbol.for("react.forward_ref"),cd=Symbol.for("react.suspense"),fd=Symbol.for("react.suspense_list"),Jh=Symbol.for("react.memo"),yr=Symbol.for("react.lazy"),UE=Symbol.for("react.offscreen"),Gg=Symbol.iterator;function Cs(t){return t===null||typeof t!="object"?null:(t=Gg&&t[Gg]||t["@@iterator"],typeof t=="function"?t:null)}var Ve=Object.assign,pf;function xs(t){if(pf===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);pf=e&&e[1]||""}return`
`+pf+t}var mf=!1;function gf(t,e){if(!t||mf)return"";mf=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(f){var r=f}Reflect.construct(t,[],e)}else{try{e.call()}catch(f){r=f}t.call(e.prototype)}else{try{throw Error()}catch(f){r=f}t()}}catch(f){if(f&&r&&typeof f.stack=="string"){for(var i=f.stack.split(`
`),o=r.stack.split(`
`),s=i.length-1,u=o.length-1;1<=s&&0<=u&&i[s]!==o[u];)u--;for(;1<=s&&0<=u;s--,u--)if(i[s]!==o[u]){if(s!==1||u!==1)do if(s--,u--,0>u||i[s]!==o[u]){var c=`
`+i[s].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=s&&0<=u);break}}}finally{mf=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?xs(t):""}function R0(t){switch(t.tag){case 5:return xs(t.type);case 16:return xs("Lazy");case 13:return xs("Suspense");case 19:return xs("SuspenseList");case 0:case 2:case 15:return t=gf(t.type,!1),t;case 11:return t=gf(t.type.render,!1),t;case 1:return t=gf(t.type,!0),t;default:return""}}function dd(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case eo:return"Fragment";case ji:return"Portal";case ud:return"Profiler";case Wh:return"StrictMode";case cd:return"Suspense";case fd:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case LE:return(t.displayName||"Context")+".Consumer";case VE:return(t._context.displayName||"Context")+".Provider";case Kh:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Jh:return e=t.displayName||null,e!==null?e:dd(t.type)||"Memo";case yr:e=t._payload,t=t._init;try{return dd(t(e))}catch{}}return null}function P0(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return dd(e);case 8:return e===Wh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Hr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function FE(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function k0(t){var e=FE(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(s){r=""+s,o.call(this,s)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function fl(t){t._valueTracker||(t._valueTracker=k0(t))}function bE(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=FE(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function au(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function hd(t,e){var n=e.checked;return Ve({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function zg(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Hr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function OE(t,e){e=e.checked,e!=null&&zh(t,"checked",e,!1)}function pd(t,e){OE(t,e);var n=Hr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?md(t,e.type,n):e.hasOwnProperty("defaultValue")&&md(t,e.type,Hr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Wg(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function md(t,e,n){(e!=="number"||au(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ds=Array.isArray;function po(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Hr(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function gd(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error($(91));return Ve({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Kg(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error($(92));if(Ds(n)){if(1<n.length)throw Error($(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Hr(n)}}function BE(t,e){var n=Hr(e.value),r=Hr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Jg(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function qE(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function yd(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?qE(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var dl,$E=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(dl=dl||document.createElement("div"),dl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=dl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function sa(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var $s={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},N0=["Webkit","ms","Moz","O"];Object.keys($s).forEach(function(t){N0.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),$s[e]=$s[t]})});function HE(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||$s.hasOwnProperty(t)&&$s[t]?(""+e).trim():e+"px"}function GE(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=HE(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var M0=Ve({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function _d(t,e){if(e){if(M0[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error($(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error($(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error($(61))}if(e.style!=null&&typeof e.style!="object")throw Error($(62))}}function vd(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Td=null;function Yh(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ed=null,mo=null,go=null;function Yg(t){if(t=Ua(t)){if(typeof Ed!="function")throw Error($(280));var e=t.stateNode;e&&(e=sc(e),Ed(t.stateNode,t.type,e))}}function zE(t){mo?go?go.push(t):go=[t]:mo=t}function WE(){if(mo){var t=mo,e=go;if(go=mo=null,Yg(t),e)for(t=0;t<e.length;t++)Yg(e[t])}}function KE(t,e){return t(e)}function JE(){}var yf=!1;function YE(t,e,n){if(yf)return t(e,n);yf=!0;try{return KE(t,e,n)}finally{yf=!1,(mo!==null||go!==null)&&(JE(),WE())}}function aa(t,e){var n=t.stateNode;if(n===null)return null;var r=sc(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error($(231,e,typeof n));return n}var Cd=!1;if(jn)try{var Is={};Object.defineProperty(Is,"passive",{get:function(){Cd=!0}}),window.addEventListener("test",Is,Is),window.removeEventListener("test",Is,Is)}catch{Cd=!1}function x0(t,e,n,r,i,o,s,u,c){var f=Array.prototype.slice.call(arguments,3);try{e.apply(n,f)}catch(h){this.onError(h)}}var Hs=!1,lu=null,uu=!1,Id=null,D0={onError:function(t){Hs=!0,lu=t}};function V0(t,e,n,r,i,o,s,u,c){Hs=!1,lu=null,x0.apply(D0,arguments)}function L0(t,e,n,r,i,o,s,u,c){if(V0.apply(this,arguments),Hs){if(Hs){var f=lu;Hs=!1,lu=null}else throw Error($(198));uu||(uu=!0,Id=f)}}function Ui(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function QE(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Qg(t){if(Ui(t)!==t)throw Error($(188))}function U0(t){var e=t.alternate;if(!e){if(e=Ui(t),e===null)throw Error($(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Qg(i),t;if(o===r)return Qg(i),e;o=o.sibling}throw Error($(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,u=i.child;u;){if(u===n){s=!0,n=i,r=o;break}if(u===r){s=!0,r=i,n=o;break}u=u.sibling}if(!s){for(u=o.child;u;){if(u===n){s=!0,n=o,r=i;break}if(u===r){s=!0,r=o,n=i;break}u=u.sibling}if(!s)throw Error($(189))}}if(n.alternate!==r)throw Error($(190))}if(n.tag!==3)throw Error($(188));return n.stateNode.current===n?t:e}function XE(t){return t=U0(t),t!==null?ZE(t):null}function ZE(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=ZE(t);if(e!==null)return e;t=t.sibling}return null}var jE=Kt.unstable_scheduleCallback,Xg=Kt.unstable_cancelCallback,F0=Kt.unstable_shouldYield,b0=Kt.unstable_requestPaint,He=Kt.unstable_now,O0=Kt.unstable_getCurrentPriorityLevel,Qh=Kt.unstable_ImmediatePriority,eC=Kt.unstable_UserBlockingPriority,cu=Kt.unstable_NormalPriority,B0=Kt.unstable_LowPriority,tC=Kt.unstable_IdlePriority,nc=null,xn=null;function q0(t){if(xn&&typeof xn.onCommitFiberRoot=="function")try{xn.onCommitFiberRoot(nc,t,void 0,(t.current.flags&128)===128)}catch{}}var mn=Math.clz32?Math.clz32:G0,$0=Math.log,H0=Math.LN2;function G0(t){return t>>>=0,t===0?32:31-($0(t)/H0|0)|0}var hl=64,pl=4194304;function Vs(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function fu(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,o=t.pingedLanes,s=n&268435455;if(s!==0){var u=s&~i;u!==0?r=Vs(u):(o&=s,o!==0&&(r=Vs(o)))}else s=n&~i,s!==0?r=Vs(s):o!==0&&(r=Vs(o));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,o=e&-e,i>=o||i===16&&(o&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-mn(e),i=1<<n,r|=t[n],e&=~i;return r}function z0(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function W0(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var s=31-mn(o),u=1<<s,c=i[s];c===-1?(!(u&n)||u&r)&&(i[s]=z0(u,e)):c<=e&&(t.expiredLanes|=u),o&=~u}}function wd(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function nC(){var t=hl;return hl<<=1,!(hl&4194240)&&(hl=64),t}function _f(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Va(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-mn(e),t[e]=n}function K0(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-mn(n),o=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~o}}function Xh(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-mn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var ge=0;function rC(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var iC,Zh,oC,sC,aC,Sd=!1,ml=[],Nr=null,Mr=null,xr=null,la=new Map,ua=new Map,Tr=[],J0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Zg(t,e){switch(t){case"focusin":case"focusout":Nr=null;break;case"dragenter":case"dragleave":Mr=null;break;case"mouseover":case"mouseout":xr=null;break;case"pointerover":case"pointerout":la.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ua.delete(e.pointerId)}}function ws(t,e,n,r,i,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},e!==null&&(e=Ua(e),e!==null&&Zh(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function Y0(t,e,n,r,i){switch(e){case"focusin":return Nr=ws(Nr,t,e,n,r,i),!0;case"dragenter":return Mr=ws(Mr,t,e,n,r,i),!0;case"mouseover":return xr=ws(xr,t,e,n,r,i),!0;case"pointerover":var o=i.pointerId;return la.set(o,ws(la.get(o)||null,t,e,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,ua.set(o,ws(ua.get(o)||null,t,e,n,r,i)),!0}return!1}function lC(t){var e=pi(t.target);if(e!==null){var n=Ui(e);if(n!==null){if(e=n.tag,e===13){if(e=QE(n),e!==null){t.blockedOn=e,aC(t.priority,function(){oC(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ol(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Ad(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Td=r,n.target.dispatchEvent(r),Td=null}else return e=Ua(n),e!==null&&Zh(e),t.blockedOn=n,!1;e.shift()}return!0}function jg(t,e,n){Ol(t)&&n.delete(e)}function Q0(){Sd=!1,Nr!==null&&Ol(Nr)&&(Nr=null),Mr!==null&&Ol(Mr)&&(Mr=null),xr!==null&&Ol(xr)&&(xr=null),la.forEach(jg),ua.forEach(jg)}function Ss(t,e){t.blockedOn===e&&(t.blockedOn=null,Sd||(Sd=!0,Kt.unstable_scheduleCallback(Kt.unstable_NormalPriority,Q0)))}function ca(t){function e(i){return Ss(i,t)}if(0<ml.length){Ss(ml[0],t);for(var n=1;n<ml.length;n++){var r=ml[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Nr!==null&&Ss(Nr,t),Mr!==null&&Ss(Mr,t),xr!==null&&Ss(xr,t),la.forEach(e),ua.forEach(e),n=0;n<Tr.length;n++)r=Tr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Tr.length&&(n=Tr[0],n.blockedOn===null);)lC(n),n.blockedOn===null&&Tr.shift()}var yo=ar.ReactCurrentBatchConfig,du=!0;function X0(t,e,n,r){var i=ge,o=yo.transition;yo.transition=null;try{ge=1,jh(t,e,n,r)}finally{ge=i,yo.transition=o}}function Z0(t,e,n,r){var i=ge,o=yo.transition;yo.transition=null;try{ge=4,jh(t,e,n,r)}finally{ge=i,yo.transition=o}}function jh(t,e,n,r){if(du){var i=Ad(t,e,n,r);if(i===null)Pf(t,e,r,hu,n),Zg(t,r);else if(Y0(i,t,e,n,r))r.stopPropagation();else if(Zg(t,r),e&4&&-1<J0.indexOf(t)){for(;i!==null;){var o=Ua(i);if(o!==null&&iC(o),o=Ad(t,e,n,r),o===null&&Pf(t,e,r,hu,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else Pf(t,e,r,null,n)}}var hu=null;function Ad(t,e,n,r){if(hu=null,t=Yh(r),t=pi(t),t!==null)if(e=Ui(t),e===null)t=null;else if(n=e.tag,n===13){if(t=QE(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return hu=t,null}function uC(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(O0()){case Qh:return 1;case eC:return 4;case cu:case B0:return 16;case tC:return 536870912;default:return 16}default:return 16}}var Rr=null,ep=null,Bl=null;function cC(){if(Bl)return Bl;var t,e=ep,n=e.length,r,i="value"in Rr?Rr.value:Rr.textContent,o=i.length;for(t=0;t<n&&e[t]===i[t];t++);var s=n-t;for(r=1;r<=s&&e[n-r]===i[o-r];r++);return Bl=i.slice(t,1<r?1-r:void 0)}function ql(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function gl(){return!0}function ey(){return!1}function Yt(t){function e(n,r,i,o,s){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=s,this.currentTarget=null;for(var u in t)t.hasOwnProperty(u)&&(n=t[u],this[u]=n?n(o):o[u]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?gl:ey,this.isPropagationStopped=ey,this}return Ve(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=gl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=gl)},persist:function(){},isPersistent:gl}),e}var Go={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},tp=Yt(Go),La=Ve({},Go,{view:0,detail:0}),j0=Yt(La),vf,Tf,As,rc=Ve({},La,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:np,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==As&&(As&&t.type==="mousemove"?(vf=t.screenX-As.screenX,Tf=t.screenY-As.screenY):Tf=vf=0,As=t),vf)},movementY:function(t){return"movementY"in t?t.movementY:Tf}}),ty=Yt(rc),eP=Ve({},rc,{dataTransfer:0}),tP=Yt(eP),nP=Ve({},La,{relatedTarget:0}),Ef=Yt(nP),rP=Ve({},Go,{animationName:0,elapsedTime:0,pseudoElement:0}),iP=Yt(rP),oP=Ve({},Go,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),sP=Yt(oP),aP=Ve({},Go,{data:0}),ny=Yt(aP),lP={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},uP={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},cP={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fP(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=cP[t])?!!e[t]:!1}function np(){return fP}var dP=Ve({},La,{key:function(t){if(t.key){var e=lP[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ql(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?uP[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:np,charCode:function(t){return t.type==="keypress"?ql(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ql(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),hP=Yt(dP),pP=Ve({},rc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ry=Yt(pP),mP=Ve({},La,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:np}),gP=Yt(mP),yP=Ve({},Go,{propertyName:0,elapsedTime:0,pseudoElement:0}),_P=Yt(yP),vP=Ve({},rc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),TP=Yt(vP),EP=[9,13,27,32],rp=jn&&"CompositionEvent"in window,Gs=null;jn&&"documentMode"in document&&(Gs=document.documentMode);var CP=jn&&"TextEvent"in window&&!Gs,fC=jn&&(!rp||Gs&&8<Gs&&11>=Gs),iy=" ",oy=!1;function dC(t,e){switch(t){case"keyup":return EP.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function hC(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var to=!1;function IP(t,e){switch(t){case"compositionend":return hC(e);case"keypress":return e.which!==32?null:(oy=!0,iy);case"textInput":return t=e.data,t===iy&&oy?null:t;default:return null}}function wP(t,e){if(to)return t==="compositionend"||!rp&&dC(t,e)?(t=cC(),Bl=ep=Rr=null,to=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return fC&&e.locale!=="ko"?null:e.data;default:return null}}var SP={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function sy(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!SP[t.type]:e==="textarea"}function pC(t,e,n,r){zE(r),e=pu(e,"onChange"),0<e.length&&(n=new tp("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var zs=null,fa=null;function AP(t){SC(t,0)}function ic(t){var e=io(t);if(bE(e))return t}function RP(t,e){if(t==="change")return e}var mC=!1;if(jn){var Cf;if(jn){var If="oninput"in document;if(!If){var ay=document.createElement("div");ay.setAttribute("oninput","return;"),If=typeof ay.oninput=="function"}Cf=If}else Cf=!1;mC=Cf&&(!document.documentMode||9<document.documentMode)}function ly(){zs&&(zs.detachEvent("onpropertychange",gC),fa=zs=null)}function gC(t){if(t.propertyName==="value"&&ic(fa)){var e=[];pC(e,fa,t,Yh(t)),YE(AP,e)}}function PP(t,e,n){t==="focusin"?(ly(),zs=e,fa=n,zs.attachEvent("onpropertychange",gC)):t==="focusout"&&ly()}function kP(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ic(fa)}function NP(t,e){if(t==="click")return ic(e)}function MP(t,e){if(t==="input"||t==="change")return ic(e)}function xP(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var yn=typeof Object.is=="function"?Object.is:xP;function da(t,e){if(yn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!ld.call(e,i)||!yn(t[i],e[i]))return!1}return!0}function uy(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function cy(t,e){var n=uy(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=uy(n)}}function yC(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?yC(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function _C(){for(var t=window,e=au();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=au(t.document)}return e}function ip(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function DP(t){var e=_C(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&yC(n.ownerDocument.documentElement,n)){if(r!==null&&ip(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!t.extend&&o>r&&(i=r,r=o,o=i),i=cy(n,o);var s=cy(n,r);i&&s&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==s.node||t.focusOffset!==s.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),o>r?(t.addRange(e),t.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var VP=jn&&"documentMode"in document&&11>=document.documentMode,no=null,Rd=null,Ws=null,Pd=!1;function fy(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Pd||no==null||no!==au(r)||(r=no,"selectionStart"in r&&ip(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ws&&da(Ws,r)||(Ws=r,r=pu(Rd,"onSelect"),0<r.length&&(e=new tp("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=no)))}function yl(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ro={animationend:yl("Animation","AnimationEnd"),animationiteration:yl("Animation","AnimationIteration"),animationstart:yl("Animation","AnimationStart"),transitionend:yl("Transition","TransitionEnd")},wf={},vC={};jn&&(vC=document.createElement("div").style,"AnimationEvent"in window||(delete ro.animationend.animation,delete ro.animationiteration.animation,delete ro.animationstart.animation),"TransitionEvent"in window||delete ro.transitionend.transition);function oc(t){if(wf[t])return wf[t];if(!ro[t])return t;var e=ro[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in vC)return wf[t]=e[n];return t}var TC=oc("animationend"),EC=oc("animationiteration"),CC=oc("animationstart"),IC=oc("transitionend"),wC=new Map,dy="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function jr(t,e){wC.set(t,e),Li(e,[t])}for(var Sf=0;Sf<dy.length;Sf++){var Af=dy[Sf],LP=Af.toLowerCase(),UP=Af[0].toUpperCase()+Af.slice(1);jr(LP,"on"+UP)}jr(TC,"onAnimationEnd");jr(EC,"onAnimationIteration");jr(CC,"onAnimationStart");jr("dblclick","onDoubleClick");jr("focusin","onFocus");jr("focusout","onBlur");jr(IC,"onTransitionEnd");Po("onMouseEnter",["mouseout","mouseover"]);Po("onMouseLeave",["mouseout","mouseover"]);Po("onPointerEnter",["pointerout","pointerover"]);Po("onPointerLeave",["pointerout","pointerover"]);Li("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Li("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Li("onBeforeInput",["compositionend","keypress","textInput","paste"]);Li("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Li("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Li("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ls="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),FP=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ls));function hy(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,L0(r,e,void 0,t),t.currentTarget=null}function SC(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var o=void 0;if(e)for(var s=r.length-1;0<=s;s--){var u=r[s],c=u.instance,f=u.currentTarget;if(u=u.listener,c!==o&&i.isPropagationStopped())break e;hy(i,u,f),o=c}else for(s=0;s<r.length;s++){if(u=r[s],c=u.instance,f=u.currentTarget,u=u.listener,c!==o&&i.isPropagationStopped())break e;hy(i,u,f),o=c}}}if(uu)throw t=Id,uu=!1,Id=null,t}function we(t,e){var n=e[Dd];n===void 0&&(n=e[Dd]=new Set);var r=t+"__bubble";n.has(r)||(AC(e,t,2,!1),n.add(r))}function Rf(t,e,n){var r=0;e&&(r|=4),AC(n,t,r,e)}var _l="_reactListening"+Math.random().toString(36).slice(2);function ha(t){if(!t[_l]){t[_l]=!0,DE.forEach(function(n){n!=="selectionchange"&&(FP.has(n)||Rf(n,!1,t),Rf(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[_l]||(e[_l]=!0,Rf("selectionchange",!1,e))}}function AC(t,e,n,r){switch(uC(e)){case 1:var i=X0;break;case 4:i=Z0;break;default:i=jh}n=i.bind(null,e,n,t),i=void 0,!Cd||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Pf(t,e,n,r,i){var o=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var u=r.stateNode.containerInfo;if(u===i||u.nodeType===8&&u.parentNode===i)break;if(s===4)for(s=r.return;s!==null;){var c=s.tag;if((c===3||c===4)&&(c=s.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;s=s.return}for(;u!==null;){if(s=pi(u),s===null)return;if(c=s.tag,c===5||c===6){r=o=s;continue e}u=u.parentNode}}r=r.return}YE(function(){var f=o,h=Yh(n),p=[];e:{var m=wC.get(t);if(m!==void 0){var _=tp,I=t;switch(t){case"keypress":if(ql(n)===0)break e;case"keydown":case"keyup":_=hP;break;case"focusin":I="focus",_=Ef;break;case"focusout":I="blur",_=Ef;break;case"beforeblur":case"afterblur":_=Ef;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_=ty;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_=tP;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_=gP;break;case TC:case EC:case CC:_=iP;break;case IC:_=_P;break;case"scroll":_=j0;break;case"wheel":_=TP;break;case"copy":case"cut":case"paste":_=sP;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_=ry}var P=(e&4)!==0,x=!P&&t==="scroll",S=P?m!==null?m+"Capture":null:m;P=[];for(var C=f,A;C!==null;){A=C;var D=A.stateNode;if(A.tag===5&&D!==null&&(A=D,S!==null&&(D=aa(C,S),D!=null&&P.push(pa(C,D,A)))),x)break;C=C.return}0<P.length&&(m=new _(m,I,null,n,h),p.push({event:m,listeners:P}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",_=t==="mouseout"||t==="pointerout",m&&n!==Td&&(I=n.relatedTarget||n.fromElement)&&(pi(I)||I[er]))break e;if((_||m)&&(m=h.window===h?h:(m=h.ownerDocument)?m.defaultView||m.parentWindow:window,_?(I=n.relatedTarget||n.toElement,_=f,I=I?pi(I):null,I!==null&&(x=Ui(I),I!==x||I.tag!==5&&I.tag!==6)&&(I=null)):(_=null,I=f),_!==I)){if(P=ty,D="onMouseLeave",S="onMouseEnter",C="mouse",(t==="pointerout"||t==="pointerover")&&(P=ry,D="onPointerLeave",S="onPointerEnter",C="pointer"),x=_==null?m:io(_),A=I==null?m:io(I),m=new P(D,C+"leave",_,n,h),m.target=x,m.relatedTarget=A,D=null,pi(h)===f&&(P=new P(S,C+"enter",I,n,h),P.target=A,P.relatedTarget=x,D=P),x=D,_&&I)t:{for(P=_,S=I,C=0,A=P;A;A=Ki(A))C++;for(A=0,D=S;D;D=Ki(D))A++;for(;0<C-A;)P=Ki(P),C--;for(;0<A-C;)S=Ki(S),A--;for(;C--;){if(P===S||S!==null&&P===S.alternate)break t;P=Ki(P),S=Ki(S)}P=null}else P=null;_!==null&&py(p,m,_,P,!1),I!==null&&x!==null&&py(p,x,I,P,!0)}}e:{if(m=f?io(f):window,_=m.nodeName&&m.nodeName.toLowerCase(),_==="select"||_==="input"&&m.type==="file")var F=RP;else if(sy(m))if(mC)F=MP;else{F=kP;var b=PP}else(_=m.nodeName)&&_.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(F=NP);if(F&&(F=F(t,f))){pC(p,F,n,h);break e}b&&b(t,m,f),t==="focusout"&&(b=m._wrapperState)&&b.controlled&&m.type==="number"&&md(m,"number",m.value)}switch(b=f?io(f):window,t){case"focusin":(sy(b)||b.contentEditable==="true")&&(no=b,Rd=f,Ws=null);break;case"focusout":Ws=Rd=no=null;break;case"mousedown":Pd=!0;break;case"contextmenu":case"mouseup":case"dragend":Pd=!1,fy(p,n,h);break;case"selectionchange":if(VP)break;case"keydown":case"keyup":fy(p,n,h)}var v;if(rp)e:{switch(t){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else to?dC(t,n)&&(T="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(fC&&n.locale!=="ko"&&(to||T!=="onCompositionStart"?T==="onCompositionEnd"&&to&&(v=cC()):(Rr=h,ep="value"in Rr?Rr.value:Rr.textContent,to=!0)),b=pu(f,T),0<b.length&&(T=new ny(T,t,null,n,h),p.push({event:T,listeners:b}),v?T.data=v:(v=hC(n),v!==null&&(T.data=v)))),(v=CP?IP(t,n):wP(t,n))&&(f=pu(f,"onBeforeInput"),0<f.length&&(h=new ny("onBeforeInput","beforeinput",null,n,h),p.push({event:h,listeners:f}),h.data=v))}SC(p,e)})}function pa(t,e,n){return{instance:t,listener:e,currentTarget:n}}function pu(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=aa(t,n),o!=null&&r.unshift(pa(t,o,i)),o=aa(t,e),o!=null&&r.push(pa(t,o,i))),t=t.return}return r}function Ki(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function py(t,e,n,r,i){for(var o=e._reactName,s=[];n!==null&&n!==r;){var u=n,c=u.alternate,f=u.stateNode;if(c!==null&&c===r)break;u.tag===5&&f!==null&&(u=f,i?(c=aa(n,o),c!=null&&s.unshift(pa(n,c,u))):i||(c=aa(n,o),c!=null&&s.push(pa(n,c,u)))),n=n.return}s.length!==0&&t.push({event:e,listeners:s})}var bP=/\r\n?/g,OP=/\u0000|\uFFFD/g;function my(t){return(typeof t=="string"?t:""+t).replace(bP,`
`).replace(OP,"")}function vl(t,e,n){if(e=my(e),my(t)!==e&&n)throw Error($(425))}function mu(){}var kd=null,Nd=null;function Md(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var xd=typeof setTimeout=="function"?setTimeout:void 0,BP=typeof clearTimeout=="function"?clearTimeout:void 0,gy=typeof Promise=="function"?Promise:void 0,qP=typeof queueMicrotask=="function"?queueMicrotask:typeof gy<"u"?function(t){return gy.resolve(null).then(t).catch($P)}:xd;function $P(t){setTimeout(function(){throw t})}function kf(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),ca(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);ca(e)}function Dr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function yy(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var zo=Math.random().toString(36).slice(2),Nn="__reactFiber$"+zo,ma="__reactProps$"+zo,er="__reactContainer$"+zo,Dd="__reactEvents$"+zo,HP="__reactListeners$"+zo,GP="__reactHandles$"+zo;function pi(t){var e=t[Nn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[er]||n[Nn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=yy(t);t!==null;){if(n=t[Nn])return n;t=yy(t)}return e}t=n,n=t.parentNode}return null}function Ua(t){return t=t[Nn]||t[er],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function io(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error($(33))}function sc(t){return t[ma]||null}var Vd=[],oo=-1;function ei(t){return{current:t}}function Re(t){0>oo||(t.current=Vd[oo],Vd[oo]=null,oo--)}function Ce(t,e){oo++,Vd[oo]=t.current,t.current=e}var Gr={},_t=ei(Gr),Lt=ei(!1),Ii=Gr;function ko(t,e){var n=t.type.contextTypes;if(!n)return Gr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=e[o];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Ut(t){return t=t.childContextTypes,t!=null}function gu(){Re(Lt),Re(_t)}function _y(t,e,n){if(_t.current!==Gr)throw Error($(168));Ce(_t,e),Ce(Lt,n)}function RC(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error($(108,P0(t)||"Unknown",i));return Ve({},n,r)}function yu(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Gr,Ii=_t.current,Ce(_t,t),Ce(Lt,Lt.current),!0}function vy(t,e,n){var r=t.stateNode;if(!r)throw Error($(169));n?(t=RC(t,e,Ii),r.__reactInternalMemoizedMergedChildContext=t,Re(Lt),Re(_t),Ce(_t,t)):Re(Lt),Ce(Lt,n)}var Wn=null,ac=!1,Nf=!1;function PC(t){Wn===null?Wn=[t]:Wn.push(t)}function zP(t){ac=!0,PC(t)}function ti(){if(!Nf&&Wn!==null){Nf=!0;var t=0,e=ge;try{var n=Wn;for(ge=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Wn=null,ac=!1}catch(i){throw Wn!==null&&(Wn=Wn.slice(t+1)),jE(Qh,ti),i}finally{ge=e,Nf=!1}}return null}var so=[],ao=0,_u=null,vu=0,Qt=[],Xt=0,wi=null,Kn=1,Jn="";function fi(t,e){so[ao++]=vu,so[ao++]=_u,_u=t,vu=e}function kC(t,e,n){Qt[Xt++]=Kn,Qt[Xt++]=Jn,Qt[Xt++]=wi,wi=t;var r=Kn;t=Jn;var i=32-mn(r)-1;r&=~(1<<i),n+=1;var o=32-mn(e)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,Kn=1<<32-mn(e)+i|n<<i|r,Jn=o+t}else Kn=1<<o|n<<i|r,Jn=t}function op(t){t.return!==null&&(fi(t,1),kC(t,1,0))}function sp(t){for(;t===_u;)_u=so[--ao],so[ao]=null,vu=so[--ao],so[ao]=null;for(;t===wi;)wi=Qt[--Xt],Qt[Xt]=null,Jn=Qt[--Xt],Qt[Xt]=null,Kn=Qt[--Xt],Qt[Xt]=null}var zt=null,$t=null,Ne=!1,hn=null;function NC(t,e){var n=en(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Ty(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,zt=t,$t=Dr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,zt=t,$t=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=wi!==null?{id:Kn,overflow:Jn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=en(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,zt=t,$t=null,!0):!1;default:return!1}}function Ld(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Ud(t){if(Ne){var e=$t;if(e){var n=e;if(!Ty(t,e)){if(Ld(t))throw Error($(418));e=Dr(n.nextSibling);var r=zt;e&&Ty(t,e)?NC(r,n):(t.flags=t.flags&-4097|2,Ne=!1,zt=t)}}else{if(Ld(t))throw Error($(418));t.flags=t.flags&-4097|2,Ne=!1,zt=t}}}function Ey(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;zt=t}function Tl(t){if(t!==zt)return!1;if(!Ne)return Ey(t),Ne=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Md(t.type,t.memoizedProps)),e&&(e=$t)){if(Ld(t))throw MC(),Error($(418));for(;e;)NC(t,e),e=Dr(e.nextSibling)}if(Ey(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error($(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){$t=Dr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}$t=null}}else $t=zt?Dr(t.stateNode.nextSibling):null;return!0}function MC(){for(var t=$t;t;)t=Dr(t.nextSibling)}function No(){$t=zt=null,Ne=!1}function ap(t){hn===null?hn=[t]:hn.push(t)}var WP=ar.ReactCurrentBatchConfig;function Rs(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error($(309));var r=n.stateNode}if(!r)throw Error($(147,t));var i=r,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(s){var u=i.refs;s===null?delete u[o]:u[o]=s},e._stringRef=o,e)}if(typeof t!="string")throw Error($(284));if(!n._owner)throw Error($(290,t))}return t}function El(t,e){throw t=Object.prototype.toString.call(e),Error($(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Cy(t){var e=t._init;return e(t._payload)}function xC(t){function e(S,C){if(t){var A=S.deletions;A===null?(S.deletions=[C],S.flags|=16):A.push(C)}}function n(S,C){if(!t)return null;for(;C!==null;)e(S,C),C=C.sibling;return null}function r(S,C){for(S=new Map;C!==null;)C.key!==null?S.set(C.key,C):S.set(C.index,C),C=C.sibling;return S}function i(S,C){return S=Fr(S,C),S.index=0,S.sibling=null,S}function o(S,C,A){return S.index=A,t?(A=S.alternate,A!==null?(A=A.index,A<C?(S.flags|=2,C):A):(S.flags|=2,C)):(S.flags|=1048576,C)}function s(S){return t&&S.alternate===null&&(S.flags|=2),S}function u(S,C,A,D){return C===null||C.tag!==6?(C=Ff(A,S.mode,D),C.return=S,C):(C=i(C,A),C.return=S,C)}function c(S,C,A,D){var F=A.type;return F===eo?h(S,C,A.props.children,D,A.key):C!==null&&(C.elementType===F||typeof F=="object"&&F!==null&&F.$$typeof===yr&&Cy(F)===C.type)?(D=i(C,A.props),D.ref=Rs(S,C,A),D.return=S,D):(D=Jl(A.type,A.key,A.props,null,S.mode,D),D.ref=Rs(S,C,A),D.return=S,D)}function f(S,C,A,D){return C===null||C.tag!==4||C.stateNode.containerInfo!==A.containerInfo||C.stateNode.implementation!==A.implementation?(C=bf(A,S.mode,D),C.return=S,C):(C=i(C,A.children||[]),C.return=S,C)}function h(S,C,A,D,F){return C===null||C.tag!==7?(C=Ti(A,S.mode,D,F),C.return=S,C):(C=i(C,A),C.return=S,C)}function p(S,C,A){if(typeof C=="string"&&C!==""||typeof C=="number")return C=Ff(""+C,S.mode,A),C.return=S,C;if(typeof C=="object"&&C!==null){switch(C.$$typeof){case cl:return A=Jl(C.type,C.key,C.props,null,S.mode,A),A.ref=Rs(S,null,C),A.return=S,A;case ji:return C=bf(C,S.mode,A),C.return=S,C;case yr:var D=C._init;return p(S,D(C._payload),A)}if(Ds(C)||Cs(C))return C=Ti(C,S.mode,A,null),C.return=S,C;El(S,C)}return null}function m(S,C,A,D){var F=C!==null?C.key:null;if(typeof A=="string"&&A!==""||typeof A=="number")return F!==null?null:u(S,C,""+A,D);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case cl:return A.key===F?c(S,C,A,D):null;case ji:return A.key===F?f(S,C,A,D):null;case yr:return F=A._init,m(S,C,F(A._payload),D)}if(Ds(A)||Cs(A))return F!==null?null:h(S,C,A,D,null);El(S,A)}return null}function _(S,C,A,D,F){if(typeof D=="string"&&D!==""||typeof D=="number")return S=S.get(A)||null,u(C,S,""+D,F);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case cl:return S=S.get(D.key===null?A:D.key)||null,c(C,S,D,F);case ji:return S=S.get(D.key===null?A:D.key)||null,f(C,S,D,F);case yr:var b=D._init;return _(S,C,A,b(D._payload),F)}if(Ds(D)||Cs(D))return S=S.get(A)||null,h(C,S,D,F,null);El(C,D)}return null}function I(S,C,A,D){for(var F=null,b=null,v=C,T=C=0,w=null;v!==null&&T<A.length;T++){v.index>T?(w=v,v=null):w=v.sibling;var R=m(S,v,A[T],D);if(R===null){v===null&&(v=w);break}t&&v&&R.alternate===null&&e(S,v),C=o(R,C,T),b===null?F=R:b.sibling=R,b=R,v=w}if(T===A.length)return n(S,v),Ne&&fi(S,T),F;if(v===null){for(;T<A.length;T++)v=p(S,A[T],D),v!==null&&(C=o(v,C,T),b===null?F=v:b.sibling=v,b=v);return Ne&&fi(S,T),F}for(v=r(S,v);T<A.length;T++)w=_(v,S,T,A[T],D),w!==null&&(t&&w.alternate!==null&&v.delete(w.key===null?T:w.key),C=o(w,C,T),b===null?F=w:b.sibling=w,b=w);return t&&v.forEach(function(k){return e(S,k)}),Ne&&fi(S,T),F}function P(S,C,A,D){var F=Cs(A);if(typeof F!="function")throw Error($(150));if(A=F.call(A),A==null)throw Error($(151));for(var b=F=null,v=C,T=C=0,w=null,R=A.next();v!==null&&!R.done;T++,R=A.next()){v.index>T?(w=v,v=null):w=v.sibling;var k=m(S,v,R.value,D);if(k===null){v===null&&(v=w);break}t&&v&&k.alternate===null&&e(S,v),C=o(k,C,T),b===null?F=k:b.sibling=k,b=k,v=w}if(R.done)return n(S,v),Ne&&fi(S,T),F;if(v===null){for(;!R.done;T++,R=A.next())R=p(S,R.value,D),R!==null&&(C=o(R,C,T),b===null?F=R:b.sibling=R,b=R);return Ne&&fi(S,T),F}for(v=r(S,v);!R.done;T++,R=A.next())R=_(v,S,T,R.value,D),R!==null&&(t&&R.alternate!==null&&v.delete(R.key===null?T:R.key),C=o(R,C,T),b===null?F=R:b.sibling=R,b=R);return t&&v.forEach(function(M){return e(S,M)}),Ne&&fi(S,T),F}function x(S,C,A,D){if(typeof A=="object"&&A!==null&&A.type===eo&&A.key===null&&(A=A.props.children),typeof A=="object"&&A!==null){switch(A.$$typeof){case cl:e:{for(var F=A.key,b=C;b!==null;){if(b.key===F){if(F=A.type,F===eo){if(b.tag===7){n(S,b.sibling),C=i(b,A.props.children),C.return=S,S=C;break e}}else if(b.elementType===F||typeof F=="object"&&F!==null&&F.$$typeof===yr&&Cy(F)===b.type){n(S,b.sibling),C=i(b,A.props),C.ref=Rs(S,b,A),C.return=S,S=C;break e}n(S,b);break}else e(S,b);b=b.sibling}A.type===eo?(C=Ti(A.props.children,S.mode,D,A.key),C.return=S,S=C):(D=Jl(A.type,A.key,A.props,null,S.mode,D),D.ref=Rs(S,C,A),D.return=S,S=D)}return s(S);case ji:e:{for(b=A.key;C!==null;){if(C.key===b)if(C.tag===4&&C.stateNode.containerInfo===A.containerInfo&&C.stateNode.implementation===A.implementation){n(S,C.sibling),C=i(C,A.children||[]),C.return=S,S=C;break e}else{n(S,C);break}else e(S,C);C=C.sibling}C=bf(A,S.mode,D),C.return=S,S=C}return s(S);case yr:return b=A._init,x(S,C,b(A._payload),D)}if(Ds(A))return I(S,C,A,D);if(Cs(A))return P(S,C,A,D);El(S,A)}return typeof A=="string"&&A!==""||typeof A=="number"?(A=""+A,C!==null&&C.tag===6?(n(S,C.sibling),C=i(C,A),C.return=S,S=C):(n(S,C),C=Ff(A,S.mode,D),C.return=S,S=C),s(S)):n(S,C)}return x}var Mo=xC(!0),DC=xC(!1),Tu=ei(null),Eu=null,lo=null,lp=null;function up(){lp=lo=Eu=null}function cp(t){var e=Tu.current;Re(Tu),t._currentValue=e}function Fd(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function _o(t,e){Eu=t,lp=lo=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Vt=!0),t.firstContext=null)}function sn(t){var e=t._currentValue;if(lp!==t)if(t={context:t,memoizedValue:e,next:null},lo===null){if(Eu===null)throw Error($(308));lo=t,Eu.dependencies={lanes:0,firstContext:t}}else lo=lo.next=t;return e}var mi=null;function fp(t){mi===null?mi=[t]:mi.push(t)}function VC(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,fp(e)):(n.next=i.next,i.next=n),e.interleaved=n,tr(t,r)}function tr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var _r=!1;function dp(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function LC(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Xn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Vr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,de&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,tr(t,n)}return i=r.interleaved,i===null?(e.next=e,fp(r)):(e.next=i.next,i.next=e),r.interleaved=e,tr(t,n)}function $l(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Xh(t,n)}}function Iy(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=s:o=o.next=s,n=n.next}while(n!==null);o===null?i=o=e:o=o.next=e}else i=o=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Cu(t,e,n,r){var i=t.updateQueue;_r=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,u=i.shared.pending;if(u!==null){i.shared.pending=null;var c=u,f=c.next;c.next=null,s===null?o=f:s.next=f,s=c;var h=t.alternate;h!==null&&(h=h.updateQueue,u=h.lastBaseUpdate,u!==s&&(u===null?h.firstBaseUpdate=f:u.next=f,h.lastBaseUpdate=c))}if(o!==null){var p=i.baseState;s=0,h=f=c=null,u=o;do{var m=u.lane,_=u.eventTime;if((r&m)===m){h!==null&&(h=h.next={eventTime:_,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var I=t,P=u;switch(m=e,_=n,P.tag){case 1:if(I=P.payload,typeof I=="function"){p=I.call(_,p,m);break e}p=I;break e;case 3:I.flags=I.flags&-65537|128;case 0:if(I=P.payload,m=typeof I=="function"?I.call(_,p,m):I,m==null)break e;p=Ve({},p,m);break e;case 2:_r=!0}}u.callback!==null&&u.lane!==0&&(t.flags|=64,m=i.effects,m===null?i.effects=[u]:m.push(u))}else _={eventTime:_,lane:m,tag:u.tag,payload:u.payload,callback:u.callback,next:null},h===null?(f=h=_,c=p):h=h.next=_,s|=m;if(u=u.next,u===null){if(u=i.shared.pending,u===null)break;m=u,u=m.next,m.next=null,i.lastBaseUpdate=m,i.shared.pending=null}}while(!0);if(h===null&&(c=p),i.baseState=c,i.firstBaseUpdate=f,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do s|=i.lane,i=i.next;while(i!==e)}else o===null&&(i.shared.lanes=0);Ai|=s,t.lanes=s,t.memoizedState=p}}function wy(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error($(191,i));i.call(r)}}}var Fa={},Dn=ei(Fa),ga=ei(Fa),ya=ei(Fa);function gi(t){if(t===Fa)throw Error($(174));return t}function hp(t,e){switch(Ce(ya,e),Ce(ga,t),Ce(Dn,Fa),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:yd(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=yd(e,t)}Re(Dn),Ce(Dn,e)}function xo(){Re(Dn),Re(ga),Re(ya)}function UC(t){gi(ya.current);var e=gi(Dn.current),n=yd(e,t.type);e!==n&&(Ce(ga,t),Ce(Dn,n))}function pp(t){ga.current===t&&(Re(Dn),Re(ga))}var xe=ei(0);function Iu(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Mf=[];function mp(){for(var t=0;t<Mf.length;t++)Mf[t]._workInProgressVersionPrimary=null;Mf.length=0}var Hl=ar.ReactCurrentDispatcher,xf=ar.ReactCurrentBatchConfig,Si=0,De=null,Ye=null,et=null,wu=!1,Ks=!1,_a=0,KP=0;function ct(){throw Error($(321))}function gp(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!yn(t[n],e[n]))return!1;return!0}function yp(t,e,n,r,i,o){if(Si=o,De=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Hl.current=t===null||t.memoizedState===null?XP:ZP,t=n(r,i),Ks){o=0;do{if(Ks=!1,_a=0,25<=o)throw Error($(301));o+=1,et=Ye=null,e.updateQueue=null,Hl.current=jP,t=n(r,i)}while(Ks)}if(Hl.current=Su,e=Ye!==null&&Ye.next!==null,Si=0,et=Ye=De=null,wu=!1,e)throw Error($(300));return t}function _p(){var t=_a!==0;return _a=0,t}function Pn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return et===null?De.memoizedState=et=t:et=et.next=t,et}function an(){if(Ye===null){var t=De.alternate;t=t!==null?t.memoizedState:null}else t=Ye.next;var e=et===null?De.memoizedState:et.next;if(e!==null)et=e,Ye=t;else{if(t===null)throw Error($(310));Ye=t,t={memoizedState:Ye.memoizedState,baseState:Ye.baseState,baseQueue:Ye.baseQueue,queue:Ye.queue,next:null},et===null?De.memoizedState=et=t:et=et.next=t}return et}function va(t,e){return typeof e=="function"?e(t):e}function Df(t){var e=an(),n=e.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=t;var r=Ye,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var u=s=null,c=null,f=o;do{var h=f.lane;if((Si&h)===h)c!==null&&(c=c.next={lane:0,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null}),r=f.hasEagerState?f.eagerState:t(r,f.action);else{var p={lane:h,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null};c===null?(u=c=p,s=r):c=c.next=p,De.lanes|=h,Ai|=h}f=f.next}while(f!==null&&f!==o);c===null?s=r:c.next=u,yn(r,e.memoizedState)||(Vt=!0),e.memoizedState=r,e.baseState=s,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do o=i.lane,De.lanes|=o,Ai|=o,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Vf(t){var e=an(),n=e.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,o=e.memoizedState;if(i!==null){n.pending=null;var s=i=i.next;do o=t(o,s.action),s=s.next;while(s!==i);yn(o,e.memoizedState)||(Vt=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function FC(){}function bC(t,e){var n=De,r=an(),i=e(),o=!yn(r.memoizedState,i);if(o&&(r.memoizedState=i,Vt=!0),r=r.queue,vp(qC.bind(null,n,r,t),[t]),r.getSnapshot!==e||o||et!==null&&et.memoizedState.tag&1){if(n.flags|=2048,Ta(9,BC.bind(null,n,r,i,e),void 0,null),tt===null)throw Error($(349));Si&30||OC(n,e,i)}return i}function OC(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=De.updateQueue,e===null?(e={lastEffect:null,stores:null},De.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function BC(t,e,n,r){e.value=n,e.getSnapshot=r,$C(e)&&HC(t)}function qC(t,e,n){return n(function(){$C(e)&&HC(t)})}function $C(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!yn(t,n)}catch{return!0}}function HC(t){var e=tr(t,1);e!==null&&gn(e,t,1,-1)}function Sy(t){var e=Pn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:va,lastRenderedState:t},e.queue=t,t=t.dispatch=QP.bind(null,De,t),[e.memoizedState,t]}function Ta(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=De.updateQueue,e===null?(e={lastEffect:null,stores:null},De.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function GC(){return an().memoizedState}function Gl(t,e,n,r){var i=Pn();De.flags|=t,i.memoizedState=Ta(1|e,n,void 0,r===void 0?null:r)}function lc(t,e,n,r){var i=an();r=r===void 0?null:r;var o=void 0;if(Ye!==null){var s=Ye.memoizedState;if(o=s.destroy,r!==null&&gp(r,s.deps)){i.memoizedState=Ta(e,n,o,r);return}}De.flags|=t,i.memoizedState=Ta(1|e,n,o,r)}function Ay(t,e){return Gl(8390656,8,t,e)}function vp(t,e){return lc(2048,8,t,e)}function zC(t,e){return lc(4,2,t,e)}function WC(t,e){return lc(4,4,t,e)}function KC(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function JC(t,e,n){return n=n!=null?n.concat([t]):null,lc(4,4,KC.bind(null,e,t),n)}function Tp(){}function YC(t,e){var n=an();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&gp(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function QC(t,e){var n=an();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&gp(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function XC(t,e,n){return Si&21?(yn(n,e)||(n=nC(),De.lanes|=n,Ai|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Vt=!0),t.memoizedState=n)}function JP(t,e){var n=ge;ge=n!==0&&4>n?n:4,t(!0);var r=xf.transition;xf.transition={};try{t(!1),e()}finally{ge=n,xf.transition=r}}function ZC(){return an().memoizedState}function YP(t,e,n){var r=Ur(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},jC(t))eI(e,n);else if(n=VC(t,e,n,r),n!==null){var i=St();gn(n,t,r,i),tI(n,e,r)}}function QP(t,e,n){var r=Ur(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(jC(t))eI(e,i);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var s=e.lastRenderedState,u=o(s,n);if(i.hasEagerState=!0,i.eagerState=u,yn(u,s)){var c=e.interleaved;c===null?(i.next=i,fp(e)):(i.next=c.next,c.next=i),e.interleaved=i;return}}catch{}finally{}n=VC(t,e,i,r),n!==null&&(i=St(),gn(n,t,r,i),tI(n,e,r))}}function jC(t){var e=t.alternate;return t===De||e!==null&&e===De}function eI(t,e){Ks=wu=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function tI(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Xh(t,n)}}var Su={readContext:sn,useCallback:ct,useContext:ct,useEffect:ct,useImperativeHandle:ct,useInsertionEffect:ct,useLayoutEffect:ct,useMemo:ct,useReducer:ct,useRef:ct,useState:ct,useDebugValue:ct,useDeferredValue:ct,useTransition:ct,useMutableSource:ct,useSyncExternalStore:ct,useId:ct,unstable_isNewReconciler:!1},XP={readContext:sn,useCallback:function(t,e){return Pn().memoizedState=[t,e===void 0?null:e],t},useContext:sn,useEffect:Ay,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Gl(4194308,4,KC.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Gl(4194308,4,t,e)},useInsertionEffect:function(t,e){return Gl(4,2,t,e)},useMemo:function(t,e){var n=Pn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Pn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=YP.bind(null,De,t),[r.memoizedState,t]},useRef:function(t){var e=Pn();return t={current:t},e.memoizedState=t},useState:Sy,useDebugValue:Tp,useDeferredValue:function(t){return Pn().memoizedState=t},useTransition:function(){var t=Sy(!1),e=t[0];return t=JP.bind(null,t[1]),Pn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=De,i=Pn();if(Ne){if(n===void 0)throw Error($(407));n=n()}else{if(n=e(),tt===null)throw Error($(349));Si&30||OC(r,e,n)}i.memoizedState=n;var o={value:n,getSnapshot:e};return i.queue=o,Ay(qC.bind(null,r,o,t),[t]),r.flags|=2048,Ta(9,BC.bind(null,r,o,n,e),void 0,null),n},useId:function(){var t=Pn(),e=tt.identifierPrefix;if(Ne){var n=Jn,r=Kn;n=(r&~(1<<32-mn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=_a++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=KP++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},ZP={readContext:sn,useCallback:YC,useContext:sn,useEffect:vp,useImperativeHandle:JC,useInsertionEffect:zC,useLayoutEffect:WC,useMemo:QC,useReducer:Df,useRef:GC,useState:function(){return Df(va)},useDebugValue:Tp,useDeferredValue:function(t){var e=an();return XC(e,Ye.memoizedState,t)},useTransition:function(){var t=Df(va)[0],e=an().memoizedState;return[t,e]},useMutableSource:FC,useSyncExternalStore:bC,useId:ZC,unstable_isNewReconciler:!1},jP={readContext:sn,useCallback:YC,useContext:sn,useEffect:vp,useImperativeHandle:JC,useInsertionEffect:zC,useLayoutEffect:WC,useMemo:QC,useReducer:Vf,useRef:GC,useState:function(){return Vf(va)},useDebugValue:Tp,useDeferredValue:function(t){var e=an();return Ye===null?e.memoizedState=t:XC(e,Ye.memoizedState,t)},useTransition:function(){var t=Vf(va)[0],e=an().memoizedState;return[t,e]},useMutableSource:FC,useSyncExternalStore:bC,useId:ZC,unstable_isNewReconciler:!1};function fn(t,e){if(t&&t.defaultProps){e=Ve({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function bd(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ve({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var uc={isMounted:function(t){return(t=t._reactInternals)?Ui(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=St(),i=Ur(t),o=Xn(r,i);o.payload=e,n!=null&&(o.callback=n),e=Vr(t,o,i),e!==null&&(gn(e,t,i,r),$l(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=St(),i=Ur(t),o=Xn(r,i);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=Vr(t,o,i),e!==null&&(gn(e,t,i,r),$l(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=St(),r=Ur(t),i=Xn(n,r);i.tag=2,e!=null&&(i.callback=e),e=Vr(t,i,r),e!==null&&(gn(e,t,r,n),$l(e,t,r))}};function Ry(t,e,n,r,i,o,s){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,o,s):e.prototype&&e.prototype.isPureReactComponent?!da(n,r)||!da(i,o):!0}function nI(t,e,n){var r=!1,i=Gr,o=e.contextType;return typeof o=="object"&&o!==null?o=sn(o):(i=Ut(e)?Ii:_t.current,r=e.contextTypes,o=(r=r!=null)?ko(t,i):Gr),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=uc,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function Py(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&uc.enqueueReplaceState(e,e.state,null)}function Od(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},dp(t);var o=e.contextType;typeof o=="object"&&o!==null?i.context=sn(o):(o=Ut(e)?Ii:_t.current,i.context=ko(t,o)),i.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(bd(t,e,o,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&uc.enqueueReplaceState(i,i.state,null),Cu(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Do(t,e){try{var n="",r=e;do n+=R0(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:i,digest:null}}function Lf(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Bd(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var ek=typeof WeakMap=="function"?WeakMap:Map;function rI(t,e,n){n=Xn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Ru||(Ru=!0,Qd=r),Bd(t,e)},n}function iI(t,e,n){n=Xn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Bd(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){Bd(t,e),typeof r!="function"&&(Lr===null?Lr=new Set([this]):Lr.add(this));var s=e.stack;this.componentDidCatch(e.value,{componentStack:s!==null?s:""})}),n}function ky(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new ek;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=pk.bind(null,t,e,n),e.then(t,t))}function Ny(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function My(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Xn(-1,1),e.tag=2,Vr(n,e,1))),n.lanes|=1),t)}var tk=ar.ReactCurrentOwner,Vt=!1;function wt(t,e,n,r){e.child=t===null?DC(e,null,n,r):Mo(e,t.child,n,r)}function xy(t,e,n,r,i){n=n.render;var o=e.ref;return _o(e,i),r=yp(t,e,n,r,o,i),n=_p(),t!==null&&!Vt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,nr(t,e,i)):(Ne&&n&&op(e),e.flags|=1,wt(t,e,r,i),e.child)}function Dy(t,e,n,r,i){if(t===null){var o=n.type;return typeof o=="function"&&!Pp(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,oI(t,e,o,r,i)):(t=Jl(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&i)){var s=o.memoizedProps;if(n=n.compare,n=n!==null?n:da,n(s,r)&&t.ref===e.ref)return nr(t,e,i)}return e.flags|=1,t=Fr(o,r),t.ref=e.ref,t.return=e,e.child=t}function oI(t,e,n,r,i){if(t!==null){var o=t.memoizedProps;if(da(o,r)&&t.ref===e.ref)if(Vt=!1,e.pendingProps=r=o,(t.lanes&i)!==0)t.flags&131072&&(Vt=!0);else return e.lanes=t.lanes,nr(t,e,i)}return qd(t,e,n,r,i)}function sI(t,e,n){var r=e.pendingProps,i=r.children,o=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ce(co,qt),qt|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ce(co,qt),qt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,Ce(co,qt),qt|=r}else o!==null?(r=o.baseLanes|n,e.memoizedState=null):r=n,Ce(co,qt),qt|=r;return wt(t,e,i,n),e.child}function aI(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function qd(t,e,n,r,i){var o=Ut(n)?Ii:_t.current;return o=ko(e,o),_o(e,i),n=yp(t,e,n,r,o,i),r=_p(),t!==null&&!Vt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,nr(t,e,i)):(Ne&&r&&op(e),e.flags|=1,wt(t,e,n,i),e.child)}function Vy(t,e,n,r,i){if(Ut(n)){var o=!0;yu(e)}else o=!1;if(_o(e,i),e.stateNode===null)zl(t,e),nI(e,n,r),Od(e,n,r,i),r=!0;else if(t===null){var s=e.stateNode,u=e.memoizedProps;s.props=u;var c=s.context,f=n.contextType;typeof f=="object"&&f!==null?f=sn(f):(f=Ut(n)?Ii:_t.current,f=ko(e,f));var h=n.getDerivedStateFromProps,p=typeof h=="function"||typeof s.getSnapshotBeforeUpdate=="function";p||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(u!==r||c!==f)&&Py(e,s,r,f),_r=!1;var m=e.memoizedState;s.state=m,Cu(e,r,s,i),c=e.memoizedState,u!==r||m!==c||Lt.current||_r?(typeof h=="function"&&(bd(e,n,h,r),c=e.memoizedState),(u=_r||Ry(e,n,u,r,m,c,f))?(p||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),s.props=r,s.state=c,s.context=f,r=u):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{s=e.stateNode,LC(t,e),u=e.memoizedProps,f=e.type===e.elementType?u:fn(e.type,u),s.props=f,p=e.pendingProps,m=s.context,c=n.contextType,typeof c=="object"&&c!==null?c=sn(c):(c=Ut(n)?Ii:_t.current,c=ko(e,c));var _=n.getDerivedStateFromProps;(h=typeof _=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(u!==p||m!==c)&&Py(e,s,r,c),_r=!1,m=e.memoizedState,s.state=m,Cu(e,r,s,i);var I=e.memoizedState;u!==p||m!==I||Lt.current||_r?(typeof _=="function"&&(bd(e,n,_,r),I=e.memoizedState),(f=_r||Ry(e,n,f,r,m,I,c)||!1)?(h||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,I,c),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,I,c)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||u===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=I),s.props=r,s.state=I,s.context=c,r=f):(typeof s.componentDidUpdate!="function"||u===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return $d(t,e,n,r,o,i)}function $d(t,e,n,r,i,o){aI(t,e);var s=(e.flags&128)!==0;if(!r&&!s)return i&&vy(e,n,!1),nr(t,e,o);r=e.stateNode,tk.current=e;var u=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&s?(e.child=Mo(e,t.child,null,o),e.child=Mo(e,null,u,o)):wt(t,e,u,o),e.memoizedState=r.state,i&&vy(e,n,!0),e.child}function lI(t){var e=t.stateNode;e.pendingContext?_y(t,e.pendingContext,e.pendingContext!==e.context):e.context&&_y(t,e.context,!1),hp(t,e.containerInfo)}function Ly(t,e,n,r,i){return No(),ap(i),e.flags|=256,wt(t,e,n,r),e.child}var Hd={dehydrated:null,treeContext:null,retryLane:0};function Gd(t){return{baseLanes:t,cachePool:null,transitions:null}}function uI(t,e,n){var r=e.pendingProps,i=xe.current,o=!1,s=(e.flags&128)!==0,u;if((u=s)||(u=t!==null&&t.memoizedState===null?!1:(i&2)!==0),u?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Ce(xe,i&1),t===null)return Ud(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(s=r.children,t=r.fallback,o?(r=e.mode,o=e.child,s={mode:"hidden",children:s},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=s):o=dc(s,r,0,null),t=Ti(t,r,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=Gd(n),e.memoizedState=Hd,t):Ep(e,s));if(i=t.memoizedState,i!==null&&(u=i.dehydrated,u!==null))return nk(t,e,s,r,u,i,n);if(o){o=r.fallback,s=e.mode,i=t.child,u=i.sibling;var c={mode:"hidden",children:r.children};return!(s&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=Fr(i,c),r.subtreeFlags=i.subtreeFlags&14680064),u!==null?o=Fr(u,o):(o=Ti(o,s,n,null),o.flags|=2),o.return=e,r.return=e,r.sibling=o,e.child=r,r=o,o=e.child,s=t.child.memoizedState,s=s===null?Gd(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},o.memoizedState=s,o.childLanes=t.childLanes&~n,e.memoizedState=Hd,r}return o=t.child,t=o.sibling,r=Fr(o,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Ep(t,e){return e=dc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Cl(t,e,n,r){return r!==null&&ap(r),Mo(e,t.child,null,n),t=Ep(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function nk(t,e,n,r,i,o,s){if(n)return e.flags&256?(e.flags&=-257,r=Lf(Error($(422))),Cl(t,e,s,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=r.fallback,i=e.mode,r=dc({mode:"visible",children:r.children},i,0,null),o=Ti(o,i,s,null),o.flags|=2,r.return=e,o.return=e,r.sibling=o,e.child=r,e.mode&1&&Mo(e,t.child,null,s),e.child.memoizedState=Gd(s),e.memoizedState=Hd,o);if(!(e.mode&1))return Cl(t,e,s,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var u=r.dgst;return r=u,o=Error($(419)),r=Lf(o,r,void 0),Cl(t,e,s,r)}if(u=(s&t.childLanes)!==0,Vt||u){if(r=tt,r!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|s)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,tr(t,i),gn(r,t,i,-1))}return Rp(),r=Lf(Error($(421))),Cl(t,e,s,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=mk.bind(null,t),i._reactRetry=e,null):(t=o.treeContext,$t=Dr(i.nextSibling),zt=e,Ne=!0,hn=null,t!==null&&(Qt[Xt++]=Kn,Qt[Xt++]=Jn,Qt[Xt++]=wi,Kn=t.id,Jn=t.overflow,wi=e),e=Ep(e,r.children),e.flags|=4096,e)}function Uy(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Fd(t.return,e,n)}function Uf(t,e,n,r,i){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function cI(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(wt(t,e,r.children,n),r=xe.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Uy(t,n,e);else if(t.tag===19)Uy(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ce(xe,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Iu(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Uf(e,!1,i,n,o);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Iu(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Uf(e,!0,n,null,o);break;case"together":Uf(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function zl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function nr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ai|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error($(153));if(e.child!==null){for(t=e.child,n=Fr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Fr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function rk(t,e,n){switch(e.tag){case 3:lI(e),No();break;case 5:UC(e);break;case 1:Ut(e.type)&&yu(e);break;case 4:hp(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Ce(Tu,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ce(xe,xe.current&1),e.flags|=128,null):n&e.child.childLanes?uI(t,e,n):(Ce(xe,xe.current&1),t=nr(t,e,n),t!==null?t.sibling:null);Ce(xe,xe.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return cI(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ce(xe,xe.current),r)break;return null;case 22:case 23:return e.lanes=0,sI(t,e,n)}return nr(t,e,n)}var fI,zd,dI,hI;fI=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};zd=function(){};dI=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,gi(Dn.current);var o=null;switch(n){case"input":i=hd(t,i),r=hd(t,r),o=[];break;case"select":i=Ve({},i,{value:void 0}),r=Ve({},r,{value:void 0}),o=[];break;case"textarea":i=gd(t,i),r=gd(t,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=mu)}_d(n,r);var s;n=null;for(f in i)if(!r.hasOwnProperty(f)&&i.hasOwnProperty(f)&&i[f]!=null)if(f==="style"){var u=i[f];for(s in u)u.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else f!=="dangerouslySetInnerHTML"&&f!=="children"&&f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(oa.hasOwnProperty(f)?o||(o=[]):(o=o||[]).push(f,null));for(f in r){var c=r[f];if(u=i!=null?i[f]:void 0,r.hasOwnProperty(f)&&c!==u&&(c!=null||u!=null))if(f==="style")if(u){for(s in u)!u.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&u[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(o||(o=[]),o.push(f,n)),n=c;else f==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,u=u?u.__html:void 0,c!=null&&u!==c&&(o=o||[]).push(f,c)):f==="children"?typeof c!="string"&&typeof c!="number"||(o=o||[]).push(f,""+c):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&(oa.hasOwnProperty(f)?(c!=null&&f==="onScroll"&&we("scroll",t),o||u===c||(o=[])):(o=o||[]).push(f,c))}n&&(o=o||[]).push("style",n);var f=o;(e.updateQueue=f)&&(e.flags|=4)}};hI=function(t,e,n,r){n!==r&&(e.flags|=4)};function Ps(t,e){if(!Ne)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function ft(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function ik(t,e,n){var r=e.pendingProps;switch(sp(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ft(e),null;case 1:return Ut(e.type)&&gu(),ft(e),null;case 3:return r=e.stateNode,xo(),Re(Lt),Re(_t),mp(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Tl(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,hn!==null&&(jd(hn),hn=null))),zd(t,e),ft(e),null;case 5:pp(e);var i=gi(ya.current);if(n=e.type,t!==null&&e.stateNode!=null)dI(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error($(166));return ft(e),null}if(t=gi(Dn.current),Tl(e)){r=e.stateNode,n=e.type;var o=e.memoizedProps;switch(r[Nn]=e,r[ma]=o,t=(e.mode&1)!==0,n){case"dialog":we("cancel",r),we("close",r);break;case"iframe":case"object":case"embed":we("load",r);break;case"video":case"audio":for(i=0;i<Ls.length;i++)we(Ls[i],r);break;case"source":we("error",r);break;case"img":case"image":case"link":we("error",r),we("load",r);break;case"details":we("toggle",r);break;case"input":zg(r,o),we("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},we("invalid",r);break;case"textarea":Kg(r,o),we("invalid",r)}_d(n,o),i=null;for(var s in o)if(o.hasOwnProperty(s)){var u=o[s];s==="children"?typeof u=="string"?r.textContent!==u&&(o.suppressHydrationWarning!==!0&&vl(r.textContent,u,t),i=["children",u]):typeof u=="number"&&r.textContent!==""+u&&(o.suppressHydrationWarning!==!0&&vl(r.textContent,u,t),i=["children",""+u]):oa.hasOwnProperty(s)&&u!=null&&s==="onScroll"&&we("scroll",r)}switch(n){case"input":fl(r),Wg(r,o,!0);break;case"textarea":fl(r),Jg(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=mu)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=qE(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=s.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=s.createElement(n,{is:r.is}):(t=s.createElement(n),n==="select"&&(s=t,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):t=s.createElementNS(t,n),t[Nn]=e,t[ma]=r,fI(t,e,!1,!1),e.stateNode=t;e:{switch(s=vd(n,r),n){case"dialog":we("cancel",t),we("close",t),i=r;break;case"iframe":case"object":case"embed":we("load",t),i=r;break;case"video":case"audio":for(i=0;i<Ls.length;i++)we(Ls[i],t);i=r;break;case"source":we("error",t),i=r;break;case"img":case"image":case"link":we("error",t),we("load",t),i=r;break;case"details":we("toggle",t),i=r;break;case"input":zg(t,r),i=hd(t,r),we("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Ve({},r,{value:void 0}),we("invalid",t);break;case"textarea":Kg(t,r),i=gd(t,r),we("invalid",t);break;default:i=r}_d(n,i),u=i;for(o in u)if(u.hasOwnProperty(o)){var c=u[o];o==="style"?GE(t,c):o==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&$E(t,c)):o==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&sa(t,c):typeof c=="number"&&sa(t,""+c):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(oa.hasOwnProperty(o)?c!=null&&o==="onScroll"&&we("scroll",t):c!=null&&zh(t,o,c,s))}switch(n){case"input":fl(t),Wg(t,r,!1);break;case"textarea":fl(t),Jg(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Hr(r.value));break;case"select":t.multiple=!!r.multiple,o=r.value,o!=null?po(t,!!r.multiple,o,!1):r.defaultValue!=null&&po(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=mu)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ft(e),null;case 6:if(t&&e.stateNode!=null)hI(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error($(166));if(n=gi(ya.current),gi(Dn.current),Tl(e)){if(r=e.stateNode,n=e.memoizedProps,r[Nn]=e,(o=r.nodeValue!==n)&&(t=zt,t!==null))switch(t.tag){case 3:vl(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&vl(r.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Nn]=e,e.stateNode=r}return ft(e),null;case 13:if(Re(xe),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ne&&$t!==null&&e.mode&1&&!(e.flags&128))MC(),No(),e.flags|=98560,o=!1;else if(o=Tl(e),r!==null&&r.dehydrated!==null){if(t===null){if(!o)throw Error($(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error($(317));o[Nn]=e}else No(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ft(e),o=!1}else hn!==null&&(jd(hn),hn=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||xe.current&1?Qe===0&&(Qe=3):Rp())),e.updateQueue!==null&&(e.flags|=4),ft(e),null);case 4:return xo(),zd(t,e),t===null&&ha(e.stateNode.containerInfo),ft(e),null;case 10:return cp(e.type._context),ft(e),null;case 17:return Ut(e.type)&&gu(),ft(e),null;case 19:if(Re(xe),o=e.memoizedState,o===null)return ft(e),null;if(r=(e.flags&128)!==0,s=o.rendering,s===null)if(r)Ps(o,!1);else{if(Qe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(s=Iu(t),s!==null){for(e.flags|=128,Ps(o,!1),r=s.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)o=n,t=r,o.flags&=14680066,s=o.alternate,s===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,t=s.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ce(xe,xe.current&1|2),e.child}t=t.sibling}o.tail!==null&&He()>Vo&&(e.flags|=128,r=!0,Ps(o,!1),e.lanes=4194304)}else{if(!r)if(t=Iu(s),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Ps(o,!0),o.tail===null&&o.tailMode==="hidden"&&!s.alternate&&!Ne)return ft(e),null}else 2*He()-o.renderingStartTime>Vo&&n!==1073741824&&(e.flags|=128,r=!0,Ps(o,!1),e.lanes=4194304);o.isBackwards?(s.sibling=e.child,e.child=s):(n=o.last,n!==null?n.sibling=s:e.child=s,o.last=s)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=He(),e.sibling=null,n=xe.current,Ce(xe,r?n&1|2:n&1),e):(ft(e),null);case 22:case 23:return Ap(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?qt&1073741824&&(ft(e),e.subtreeFlags&6&&(e.flags|=8192)):ft(e),null;case 24:return null;case 25:return null}throw Error($(156,e.tag))}function ok(t,e){switch(sp(e),e.tag){case 1:return Ut(e.type)&&gu(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return xo(),Re(Lt),Re(_t),mp(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return pp(e),null;case 13:if(Re(xe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error($(340));No()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Re(xe),null;case 4:return xo(),null;case 10:return cp(e.type._context),null;case 22:case 23:return Ap(),null;case 24:return null;default:return null}}var Il=!1,mt=!1,sk=typeof WeakSet=="function"?WeakSet:Set,K=null;function uo(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Fe(t,e,r)}else n.current=null}function Wd(t,e,n){try{n()}catch(r){Fe(t,e,r)}}var Fy=!1;function ak(t,e){if(kd=du,t=_C(),ip(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var s=0,u=-1,c=-1,f=0,h=0,p=t,m=null;t:for(;;){for(var _;p!==n||i!==0&&p.nodeType!==3||(u=s+i),p!==o||r!==0&&p.nodeType!==3||(c=s+r),p.nodeType===3&&(s+=p.nodeValue.length),(_=p.firstChild)!==null;)m=p,p=_;for(;;){if(p===t)break t;if(m===n&&++f===i&&(u=s),m===o&&++h===r&&(c=s),(_=p.nextSibling)!==null)break;p=m,m=p.parentNode}p=_}n=u===-1||c===-1?null:{start:u,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Nd={focusedElem:t,selectionRange:n},du=!1,K=e;K!==null;)if(e=K,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,K=t;else for(;K!==null;){e=K;try{var I=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(I!==null){var P=I.memoizedProps,x=I.memoizedState,S=e.stateNode,C=S.getSnapshotBeforeUpdate(e.elementType===e.type?P:fn(e.type,P),x);S.__reactInternalSnapshotBeforeUpdate=C}break;case 3:var A=e.stateNode.containerInfo;A.nodeType===1?A.textContent="":A.nodeType===9&&A.documentElement&&A.removeChild(A.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error($(163))}}catch(D){Fe(e,e.return,D)}if(t=e.sibling,t!==null){t.return=e.return,K=t;break}K=e.return}return I=Fy,Fy=!1,I}function Js(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,o!==void 0&&Wd(e,n,o)}i=i.next}while(i!==r)}}function cc(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Kd(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function pI(t){var e=t.alternate;e!==null&&(t.alternate=null,pI(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Nn],delete e[ma],delete e[Dd],delete e[HP],delete e[GP])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function mI(t){return t.tag===5||t.tag===3||t.tag===4}function by(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||mI(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Jd(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=mu));else if(r!==4&&(t=t.child,t!==null))for(Jd(t,e,n),t=t.sibling;t!==null;)Jd(t,e,n),t=t.sibling}function Yd(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Yd(t,e,n),t=t.sibling;t!==null;)Yd(t,e,n),t=t.sibling}var rt=null,dn=!1;function mr(t,e,n){for(n=n.child;n!==null;)gI(t,e,n),n=n.sibling}function gI(t,e,n){if(xn&&typeof xn.onCommitFiberUnmount=="function")try{xn.onCommitFiberUnmount(nc,n)}catch{}switch(n.tag){case 5:mt||uo(n,e);case 6:var r=rt,i=dn;rt=null,mr(t,e,n),rt=r,dn=i,rt!==null&&(dn?(t=rt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):rt.removeChild(n.stateNode));break;case 18:rt!==null&&(dn?(t=rt,n=n.stateNode,t.nodeType===8?kf(t.parentNode,n):t.nodeType===1&&kf(t,n),ca(t)):kf(rt,n.stateNode));break;case 4:r=rt,i=dn,rt=n.stateNode.containerInfo,dn=!0,mr(t,e,n),rt=r,dn=i;break;case 0:case 11:case 14:case 15:if(!mt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,s=o.destroy;o=o.tag,s!==void 0&&(o&2||o&4)&&Wd(n,e,s),i=i.next}while(i!==r)}mr(t,e,n);break;case 1:if(!mt&&(uo(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){Fe(n,e,u)}mr(t,e,n);break;case 21:mr(t,e,n);break;case 22:n.mode&1?(mt=(r=mt)||n.memoizedState!==null,mr(t,e,n),mt=r):mr(t,e,n);break;default:mr(t,e,n)}}function Oy(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new sk),e.forEach(function(r){var i=gk.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function un(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=t,s=e,u=s;e:for(;u!==null;){switch(u.tag){case 5:rt=u.stateNode,dn=!1;break e;case 3:rt=u.stateNode.containerInfo,dn=!0;break e;case 4:rt=u.stateNode.containerInfo,dn=!0;break e}u=u.return}if(rt===null)throw Error($(160));gI(o,s,i),rt=null,dn=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(f){Fe(i,e,f)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)yI(e,t),e=e.sibling}function yI(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(un(e,t),Rn(t),r&4){try{Js(3,t,t.return),cc(3,t)}catch(P){Fe(t,t.return,P)}try{Js(5,t,t.return)}catch(P){Fe(t,t.return,P)}}break;case 1:un(e,t),Rn(t),r&512&&n!==null&&uo(n,n.return);break;case 5:if(un(e,t),Rn(t),r&512&&n!==null&&uo(n,n.return),t.flags&32){var i=t.stateNode;try{sa(i,"")}catch(P){Fe(t,t.return,P)}}if(r&4&&(i=t.stateNode,i!=null)){var o=t.memoizedProps,s=n!==null?n.memoizedProps:o,u=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{u==="input"&&o.type==="radio"&&o.name!=null&&OE(i,o),vd(u,s);var f=vd(u,o);for(s=0;s<c.length;s+=2){var h=c[s],p=c[s+1];h==="style"?GE(i,p):h==="dangerouslySetInnerHTML"?$E(i,p):h==="children"?sa(i,p):zh(i,h,p,f)}switch(u){case"input":pd(i,o);break;case"textarea":BE(i,o);break;case"select":var m=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var _=o.value;_!=null?po(i,!!o.multiple,_,!1):m!==!!o.multiple&&(o.defaultValue!=null?po(i,!!o.multiple,o.defaultValue,!0):po(i,!!o.multiple,o.multiple?[]:"",!1))}i[ma]=o}catch(P){Fe(t,t.return,P)}}break;case 6:if(un(e,t),Rn(t),r&4){if(t.stateNode===null)throw Error($(162));i=t.stateNode,o=t.memoizedProps;try{i.nodeValue=o}catch(P){Fe(t,t.return,P)}}break;case 3:if(un(e,t),Rn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ca(e.containerInfo)}catch(P){Fe(t,t.return,P)}break;case 4:un(e,t),Rn(t);break;case 13:un(e,t),Rn(t),i=t.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(wp=He())),r&4&&Oy(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(mt=(f=mt)||h,un(e,t),mt=f):un(e,t),Rn(t),r&8192){if(f=t.memoizedState!==null,(t.stateNode.isHidden=f)&&!h&&t.mode&1)for(K=t,h=t.child;h!==null;){for(p=K=h;K!==null;){switch(m=K,_=m.child,m.tag){case 0:case 11:case 14:case 15:Js(4,m,m.return);break;case 1:uo(m,m.return);var I=m.stateNode;if(typeof I.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,I.props=e.memoizedProps,I.state=e.memoizedState,I.componentWillUnmount()}catch(P){Fe(r,n,P)}}break;case 5:uo(m,m.return);break;case 22:if(m.memoizedState!==null){qy(p);continue}}_!==null?(_.return=m,K=_):qy(p)}h=h.sibling}e:for(h=null,p=t;;){if(p.tag===5){if(h===null){h=p;try{i=p.stateNode,f?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(u=p.stateNode,c=p.memoizedProps.style,s=c!=null&&c.hasOwnProperty("display")?c.display:null,u.style.display=HE("display",s))}catch(P){Fe(t,t.return,P)}}}else if(p.tag===6){if(h===null)try{p.stateNode.nodeValue=f?"":p.memoizedProps}catch(P){Fe(t,t.return,P)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;h===p&&(h=null),p=p.return}h===p&&(h=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:un(e,t),Rn(t),r&4&&Oy(t);break;case 21:break;default:un(e,t),Rn(t)}}function Rn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(mI(n)){var r=n;break e}n=n.return}throw Error($(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(sa(i,""),r.flags&=-33);var o=by(t);Yd(t,o,i);break;case 3:case 4:var s=r.stateNode.containerInfo,u=by(t);Jd(t,u,s);break;default:throw Error($(161))}}catch(c){Fe(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function lk(t,e,n){K=t,_I(t)}function _I(t,e,n){for(var r=(t.mode&1)!==0;K!==null;){var i=K,o=i.child;if(i.tag===22&&r){var s=i.memoizedState!==null||Il;if(!s){var u=i.alternate,c=u!==null&&u.memoizedState!==null||mt;u=Il;var f=mt;if(Il=s,(mt=c)&&!f)for(K=i;K!==null;)s=K,c=s.child,s.tag===22&&s.memoizedState!==null?$y(i):c!==null?(c.return=s,K=c):$y(i);for(;o!==null;)K=o,_I(o),o=o.sibling;K=i,Il=u,mt=f}By(t)}else i.subtreeFlags&8772&&o!==null?(o.return=i,K=o):By(t)}}function By(t){for(;K!==null;){var e=K;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:mt||cc(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!mt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:fn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&wy(e,o,r);break;case 3:var s=e.updateQueue;if(s!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}wy(e,s,n)}break;case 5:var u=e.stateNode;if(n===null&&e.flags&4){n=u;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var f=e.alternate;if(f!==null){var h=f.memoizedState;if(h!==null){var p=h.dehydrated;p!==null&&ca(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error($(163))}mt||e.flags&512&&Kd(e)}catch(m){Fe(e,e.return,m)}}if(e===t){K=null;break}if(n=e.sibling,n!==null){n.return=e.return,K=n;break}K=e.return}}function qy(t){for(;K!==null;){var e=K;if(e===t){K=null;break}var n=e.sibling;if(n!==null){n.return=e.return,K=n;break}K=e.return}}function $y(t){for(;K!==null;){var e=K;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{cc(4,e)}catch(c){Fe(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(c){Fe(e,i,c)}}var o=e.return;try{Kd(e)}catch(c){Fe(e,o,c)}break;case 5:var s=e.return;try{Kd(e)}catch(c){Fe(e,s,c)}}}catch(c){Fe(e,e.return,c)}if(e===t){K=null;break}var u=e.sibling;if(u!==null){u.return=e.return,K=u;break}K=e.return}}var uk=Math.ceil,Au=ar.ReactCurrentDispatcher,Cp=ar.ReactCurrentOwner,tn=ar.ReactCurrentBatchConfig,de=0,tt=null,ze=null,st=0,qt=0,co=ei(0),Qe=0,Ea=null,Ai=0,fc=0,Ip=0,Ys=null,xt=null,wp=0,Vo=1/0,Gn=null,Ru=!1,Qd=null,Lr=null,wl=!1,Pr=null,Pu=0,Qs=0,Xd=null,Wl=-1,Kl=0;function St(){return de&6?He():Wl!==-1?Wl:Wl=He()}function Ur(t){return t.mode&1?de&2&&st!==0?st&-st:WP.transition!==null?(Kl===0&&(Kl=nC()),Kl):(t=ge,t!==0||(t=window.event,t=t===void 0?16:uC(t.type)),t):1}function gn(t,e,n,r){if(50<Qs)throw Qs=0,Xd=null,Error($(185));Va(t,n,r),(!(de&2)||t!==tt)&&(t===tt&&(!(de&2)&&(fc|=n),Qe===4&&Er(t,st)),Ft(t,r),n===1&&de===0&&!(e.mode&1)&&(Vo=He()+500,ac&&ti()))}function Ft(t,e){var n=t.callbackNode;W0(t,e);var r=fu(t,t===tt?st:0);if(r===0)n!==null&&Xg(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Xg(n),e===1)t.tag===0?zP(Hy.bind(null,t)):PC(Hy.bind(null,t)),qP(function(){!(de&6)&&ti()}),n=null;else{switch(rC(r)){case 1:n=Qh;break;case 4:n=eC;break;case 16:n=cu;break;case 536870912:n=tC;break;default:n=cu}n=AI(n,vI.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function vI(t,e){if(Wl=-1,Kl=0,de&6)throw Error($(327));var n=t.callbackNode;if(vo()&&t.callbackNode!==n)return null;var r=fu(t,t===tt?st:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=ku(t,r);else{e=r;var i=de;de|=2;var o=EI();(tt!==t||st!==e)&&(Gn=null,Vo=He()+500,vi(t,e));do try{dk();break}catch(u){TI(t,u)}while(!0);up(),Au.current=o,de=i,ze!==null?e=0:(tt=null,st=0,e=Qe)}if(e!==0){if(e===2&&(i=wd(t),i!==0&&(r=i,e=Zd(t,i))),e===1)throw n=Ea,vi(t,0),Er(t,r),Ft(t,He()),n;if(e===6)Er(t,r);else{if(i=t.current.alternate,!(r&30)&&!ck(i)&&(e=ku(t,r),e===2&&(o=wd(t),o!==0&&(r=o,e=Zd(t,o))),e===1))throw n=Ea,vi(t,0),Er(t,r),Ft(t,He()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error($(345));case 2:di(t,xt,Gn);break;case 3:if(Er(t,r),(r&130023424)===r&&(e=wp+500-He(),10<e)){if(fu(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){St(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=xd(di.bind(null,t,xt,Gn),e);break}di(t,xt,Gn);break;case 4:if(Er(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var s=31-mn(r);o=1<<s,s=e[s],s>i&&(i=s),r&=~o}if(r=i,r=He()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*uk(r/1960))-r,10<r){t.timeoutHandle=xd(di.bind(null,t,xt,Gn),r);break}di(t,xt,Gn);break;case 5:di(t,xt,Gn);break;default:throw Error($(329))}}}return Ft(t,He()),t.callbackNode===n?vI.bind(null,t):null}function Zd(t,e){var n=Ys;return t.current.memoizedState.isDehydrated&&(vi(t,e).flags|=256),t=ku(t,e),t!==2&&(e=xt,xt=n,e!==null&&jd(e)),t}function jd(t){xt===null?xt=t:xt.push.apply(xt,t)}function ck(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!yn(o(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Er(t,e){for(e&=~Ip,e&=~fc,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-mn(e),r=1<<n;t[n]=-1,e&=~r}}function Hy(t){if(de&6)throw Error($(327));vo();var e=fu(t,0);if(!(e&1))return Ft(t,He()),null;var n=ku(t,e);if(t.tag!==0&&n===2){var r=wd(t);r!==0&&(e=r,n=Zd(t,r))}if(n===1)throw n=Ea,vi(t,0),Er(t,e),Ft(t,He()),n;if(n===6)throw Error($(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,di(t,xt,Gn),Ft(t,He()),null}function Sp(t,e){var n=de;de|=1;try{return t(e)}finally{de=n,de===0&&(Vo=He()+500,ac&&ti())}}function Ri(t){Pr!==null&&Pr.tag===0&&!(de&6)&&vo();var e=de;de|=1;var n=tn.transition,r=ge;try{if(tn.transition=null,ge=1,t)return t()}finally{ge=r,tn.transition=n,de=e,!(de&6)&&ti()}}function Ap(){qt=co.current,Re(co)}function vi(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,BP(n)),ze!==null)for(n=ze.return;n!==null;){var r=n;switch(sp(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&gu();break;case 3:xo(),Re(Lt),Re(_t),mp();break;case 5:pp(r);break;case 4:xo();break;case 13:Re(xe);break;case 19:Re(xe);break;case 10:cp(r.type._context);break;case 22:case 23:Ap()}n=n.return}if(tt=t,ze=t=Fr(t.current,null),st=qt=e,Qe=0,Ea=null,Ip=fc=Ai=0,xt=Ys=null,mi!==null){for(e=0;e<mi.length;e++)if(n=mi[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var s=o.next;o.next=i,r.next=s}n.pending=r}mi=null}return t}function TI(t,e){do{var n=ze;try{if(up(),Hl.current=Su,wu){for(var r=De.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}wu=!1}if(Si=0,et=Ye=De=null,Ks=!1,_a=0,Cp.current=null,n===null||n.return===null){Qe=1,Ea=e,ze=null;break}e:{var o=t,s=n.return,u=n,c=e;if(e=st,u.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var f=c,h=u,p=h.tag;if(!(h.mode&1)&&(p===0||p===11||p===15)){var m=h.alternate;m?(h.updateQueue=m.updateQueue,h.memoizedState=m.memoizedState,h.lanes=m.lanes):(h.updateQueue=null,h.memoizedState=null)}var _=Ny(s);if(_!==null){_.flags&=-257,My(_,s,u,o,e),_.mode&1&&ky(o,f,e),e=_,c=f;var I=e.updateQueue;if(I===null){var P=new Set;P.add(c),e.updateQueue=P}else I.add(c);break e}else{if(!(e&1)){ky(o,f,e),Rp();break e}c=Error($(426))}}else if(Ne&&u.mode&1){var x=Ny(s);if(x!==null){!(x.flags&65536)&&(x.flags|=256),My(x,s,u,o,e),ap(Do(c,u));break e}}o=c=Do(c,u),Qe!==4&&(Qe=2),Ys===null?Ys=[o]:Ys.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var S=rI(o,c,e);Iy(o,S);break e;case 1:u=c;var C=o.type,A=o.stateNode;if(!(o.flags&128)&&(typeof C.getDerivedStateFromError=="function"||A!==null&&typeof A.componentDidCatch=="function"&&(Lr===null||!Lr.has(A)))){o.flags|=65536,e&=-e,o.lanes|=e;var D=iI(o,u,e);Iy(o,D);break e}}o=o.return}while(o!==null)}II(n)}catch(F){e=F,ze===n&&n!==null&&(ze=n=n.return);continue}break}while(!0)}function EI(){var t=Au.current;return Au.current=Su,t===null?Su:t}function Rp(){(Qe===0||Qe===3||Qe===2)&&(Qe=4),tt===null||!(Ai&268435455)&&!(fc&268435455)||Er(tt,st)}function ku(t,e){var n=de;de|=2;var r=EI();(tt!==t||st!==e)&&(Gn=null,vi(t,e));do try{fk();break}catch(i){TI(t,i)}while(!0);if(up(),de=n,Au.current=r,ze!==null)throw Error($(261));return tt=null,st=0,Qe}function fk(){for(;ze!==null;)CI(ze)}function dk(){for(;ze!==null&&!F0();)CI(ze)}function CI(t){var e=SI(t.alternate,t,qt);t.memoizedProps=t.pendingProps,e===null?II(t):ze=e,Cp.current=null}function II(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=ok(n,e),n!==null){n.flags&=32767,ze=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Qe=6,ze=null;return}}else if(n=ik(n,e,qt),n!==null){ze=n;return}if(e=e.sibling,e!==null){ze=e;return}ze=e=t}while(e!==null);Qe===0&&(Qe=5)}function di(t,e,n){var r=ge,i=tn.transition;try{tn.transition=null,ge=1,hk(t,e,n,r)}finally{tn.transition=i,ge=r}return null}function hk(t,e,n,r){do vo();while(Pr!==null);if(de&6)throw Error($(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error($(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(K0(t,o),t===tt&&(ze=tt=null,st=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||wl||(wl=!0,AI(cu,function(){return vo(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=tn.transition,tn.transition=null;var s=ge;ge=1;var u=de;de|=4,Cp.current=null,ak(t,n),yI(n,t),DP(Nd),du=!!kd,Nd=kd=null,t.current=n,lk(n),b0(),de=u,ge=s,tn.transition=o}else t.current=n;if(wl&&(wl=!1,Pr=t,Pu=i),o=t.pendingLanes,o===0&&(Lr=null),q0(n.stateNode),Ft(t,He()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Ru)throw Ru=!1,t=Qd,Qd=null,t;return Pu&1&&t.tag!==0&&vo(),o=t.pendingLanes,o&1?t===Xd?Qs++:(Qs=0,Xd=t):Qs=0,ti(),null}function vo(){if(Pr!==null){var t=rC(Pu),e=tn.transition,n=ge;try{if(tn.transition=null,ge=16>t?16:t,Pr===null)var r=!1;else{if(t=Pr,Pr=null,Pu=0,de&6)throw Error($(331));var i=de;for(de|=4,K=t.current;K!==null;){var o=K,s=o.child;if(K.flags&16){var u=o.deletions;if(u!==null){for(var c=0;c<u.length;c++){var f=u[c];for(K=f;K!==null;){var h=K;switch(h.tag){case 0:case 11:case 15:Js(8,h,o)}var p=h.child;if(p!==null)p.return=h,K=p;else for(;K!==null;){h=K;var m=h.sibling,_=h.return;if(pI(h),h===f){K=null;break}if(m!==null){m.return=_,K=m;break}K=_}}}var I=o.alternate;if(I!==null){var P=I.child;if(P!==null){I.child=null;do{var x=P.sibling;P.sibling=null,P=x}while(P!==null)}}K=o}}if(o.subtreeFlags&2064&&s!==null)s.return=o,K=s;else e:for(;K!==null;){if(o=K,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Js(9,o,o.return)}var S=o.sibling;if(S!==null){S.return=o.return,K=S;break e}K=o.return}}var C=t.current;for(K=C;K!==null;){s=K;var A=s.child;if(s.subtreeFlags&2064&&A!==null)A.return=s,K=A;else e:for(s=C;K!==null;){if(u=K,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:cc(9,u)}}catch(F){Fe(u,u.return,F)}if(u===s){K=null;break e}var D=u.sibling;if(D!==null){D.return=u.return,K=D;break e}K=u.return}}if(de=i,ti(),xn&&typeof xn.onPostCommitFiberRoot=="function")try{xn.onPostCommitFiberRoot(nc,t)}catch{}r=!0}return r}finally{ge=n,tn.transition=e}}return!1}function Gy(t,e,n){e=Do(n,e),e=rI(t,e,1),t=Vr(t,e,1),e=St(),t!==null&&(Va(t,1,e),Ft(t,e))}function Fe(t,e,n){if(t.tag===3)Gy(t,t,n);else for(;e!==null;){if(e.tag===3){Gy(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Lr===null||!Lr.has(r))){t=Do(n,t),t=iI(e,t,1),e=Vr(e,t,1),t=St(),e!==null&&(Va(e,1,t),Ft(e,t));break}}e=e.return}}function pk(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=St(),t.pingedLanes|=t.suspendedLanes&n,tt===t&&(st&n)===n&&(Qe===4||Qe===3&&(st&130023424)===st&&500>He()-wp?vi(t,0):Ip|=n),Ft(t,e)}function wI(t,e){e===0&&(t.mode&1?(e=pl,pl<<=1,!(pl&130023424)&&(pl=4194304)):e=1);var n=St();t=tr(t,e),t!==null&&(Va(t,e,n),Ft(t,n))}function mk(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),wI(t,n)}function gk(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error($(314))}r!==null&&r.delete(e),wI(t,n)}var SI;SI=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Lt.current)Vt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Vt=!1,rk(t,e,n);Vt=!!(t.flags&131072)}else Vt=!1,Ne&&e.flags&1048576&&kC(e,vu,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;zl(t,e),t=e.pendingProps;var i=ko(e,_t.current);_o(e,n),i=yp(null,e,r,t,i,n);var o=_p();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ut(r)?(o=!0,yu(e)):o=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,dp(e),i.updater=uc,e.stateNode=i,i._reactInternals=e,Od(e,r,t,n),e=$d(null,e,r,!0,o,n)):(e.tag=0,Ne&&o&&op(e),wt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(zl(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=_k(r),t=fn(r,t),i){case 0:e=qd(null,e,r,t,n);break e;case 1:e=Vy(null,e,r,t,n);break e;case 11:e=xy(null,e,r,t,n);break e;case 14:e=Dy(null,e,r,fn(r.type,t),n);break e}throw Error($(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:fn(r,i),qd(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:fn(r,i),Vy(t,e,r,i,n);case 3:e:{if(lI(e),t===null)throw Error($(387));r=e.pendingProps,o=e.memoizedState,i=o.element,LC(t,e),Cu(e,r,null,n);var s=e.memoizedState;if(r=s.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){i=Do(Error($(423)),e),e=Ly(t,e,r,n,i);break e}else if(r!==i){i=Do(Error($(424)),e),e=Ly(t,e,r,n,i);break e}else for($t=Dr(e.stateNode.containerInfo.firstChild),zt=e,Ne=!0,hn=null,n=DC(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(No(),r===i){e=nr(t,e,n);break e}wt(t,e,r,n)}e=e.child}return e;case 5:return UC(e),t===null&&Ud(e),r=e.type,i=e.pendingProps,o=t!==null?t.memoizedProps:null,s=i.children,Md(r,i)?s=null:o!==null&&Md(r,o)&&(e.flags|=32),aI(t,e),wt(t,e,s,n),e.child;case 6:return t===null&&Ud(e),null;case 13:return uI(t,e,n);case 4:return hp(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Mo(e,null,r,n):wt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:fn(r,i),xy(t,e,r,i,n);case 7:return wt(t,e,e.pendingProps,n),e.child;case 8:return wt(t,e,e.pendingProps.children,n),e.child;case 12:return wt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,o=e.memoizedProps,s=i.value,Ce(Tu,r._currentValue),r._currentValue=s,o!==null)if(yn(o.value,s)){if(o.children===i.children&&!Lt.current){e=nr(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var u=o.dependencies;if(u!==null){s=o.child;for(var c=u.firstContext;c!==null;){if(c.context===r){if(o.tag===1){c=Xn(-1,n&-n),c.tag=2;var f=o.updateQueue;if(f!==null){f=f.shared;var h=f.pending;h===null?c.next=c:(c.next=h.next,h.next=c),f.pending=c}}o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),Fd(o.return,n,e),u.lanes|=n;break}c=c.next}}else if(o.tag===10)s=o.type===e.type?null:o.child;else if(o.tag===18){if(s=o.return,s===null)throw Error($(341));s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),Fd(s,n,e),s=o.sibling}else s=o.child;if(s!==null)s.return=o;else for(s=o;s!==null;){if(s===e){s=null;break}if(o=s.sibling,o!==null){o.return=s.return,s=o;break}s=s.return}o=s}wt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,_o(e,n),i=sn(i),r=r(i),e.flags|=1,wt(t,e,r,n),e.child;case 14:return r=e.type,i=fn(r,e.pendingProps),i=fn(r.type,i),Dy(t,e,r,i,n);case 15:return oI(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:fn(r,i),zl(t,e),e.tag=1,Ut(r)?(t=!0,yu(e)):t=!1,_o(e,n),nI(e,r,i),Od(e,r,i,n),$d(null,e,r,!0,t,n);case 19:return cI(t,e,n);case 22:return sI(t,e,n)}throw Error($(156,e.tag))};function AI(t,e){return jE(t,e)}function yk(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function en(t,e,n,r){return new yk(t,e,n,r)}function Pp(t){return t=t.prototype,!(!t||!t.isReactComponent)}function _k(t){if(typeof t=="function")return Pp(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Kh)return 11;if(t===Jh)return 14}return 2}function Fr(t,e){var n=t.alternate;return n===null?(n=en(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Jl(t,e,n,r,i,o){var s=2;if(r=t,typeof t=="function")Pp(t)&&(s=1);else if(typeof t=="string")s=5;else e:switch(t){case eo:return Ti(n.children,i,o,e);case Wh:s=8,i|=8;break;case ud:return t=en(12,n,e,i|2),t.elementType=ud,t.lanes=o,t;case cd:return t=en(13,n,e,i),t.elementType=cd,t.lanes=o,t;case fd:return t=en(19,n,e,i),t.elementType=fd,t.lanes=o,t;case UE:return dc(n,i,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case VE:s=10;break e;case LE:s=9;break e;case Kh:s=11;break e;case Jh:s=14;break e;case yr:s=16,r=null;break e}throw Error($(130,t==null?t:typeof t,""))}return e=en(s,n,e,i),e.elementType=t,e.type=r,e.lanes=o,e}function Ti(t,e,n,r){return t=en(7,t,r,e),t.lanes=n,t}function dc(t,e,n,r){return t=en(22,t,r,e),t.elementType=UE,t.lanes=n,t.stateNode={isHidden:!1},t}function Ff(t,e,n){return t=en(6,t,null,e),t.lanes=n,t}function bf(t,e,n){return e=en(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function vk(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=_f(0),this.expirationTimes=_f(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_f(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function kp(t,e,n,r,i,o,s,u,c){return t=new vk(t,e,n,u,c),e===1?(e=1,o===!0&&(e|=8)):e=0,o=en(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},dp(o),t}function Tk(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ji,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function RI(t){if(!t)return Gr;t=t._reactInternals;e:{if(Ui(t)!==t||t.tag!==1)throw Error($(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ut(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error($(171))}if(t.tag===1){var n=t.type;if(Ut(n))return RC(t,n,e)}return e}function PI(t,e,n,r,i,o,s,u,c){return t=kp(n,r,!0,t,i,o,s,u,c),t.context=RI(null),n=t.current,r=St(),i=Ur(n),o=Xn(r,i),o.callback=e??null,Vr(n,o,i),t.current.lanes=i,Va(t,i,r),Ft(t,r),t}function hc(t,e,n,r){var i=e.current,o=St(),s=Ur(i);return n=RI(n),e.context===null?e.context=n:e.pendingContext=n,e=Xn(o,s),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Vr(i,e,s),t!==null&&(gn(t,i,s,o),$l(t,i,s)),s}function Nu(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function zy(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Np(t,e){zy(t,e),(t=t.alternate)&&zy(t,e)}function Ek(){return null}var kI=typeof reportError=="function"?reportError:function(t){console.error(t)};function Mp(t){this._internalRoot=t}pc.prototype.render=Mp.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error($(409));hc(t,e,null,null)};pc.prototype.unmount=Mp.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ri(function(){hc(null,t,null,null)}),e[er]=null}};function pc(t){this._internalRoot=t}pc.prototype.unstable_scheduleHydration=function(t){if(t){var e=sC();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Tr.length&&e!==0&&e<Tr[n].priority;n++);Tr.splice(n,0,t),n===0&&lC(t)}};function xp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function mc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Wy(){}function Ck(t,e,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var f=Nu(s);o.call(f)}}var s=PI(e,r,t,0,null,!1,!1,"",Wy);return t._reactRootContainer=s,t[er]=s.current,ha(t.nodeType===8?t.parentNode:t),Ri(),s}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var u=r;r=function(){var f=Nu(c);u.call(f)}}var c=kp(t,0,!1,null,null,!1,!1,"",Wy);return t._reactRootContainer=c,t[er]=c.current,ha(t.nodeType===8?t.parentNode:t),Ri(function(){hc(e,c,n,r)}),c}function gc(t,e,n,r,i){var o=n._reactRootContainer;if(o){var s=o;if(typeof i=="function"){var u=i;i=function(){var c=Nu(s);u.call(c)}}hc(e,s,t,i)}else s=Ck(n,e,t,i,r);return Nu(s)}iC=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Vs(e.pendingLanes);n!==0&&(Xh(e,n|1),Ft(e,He()),!(de&6)&&(Vo=He()+500,ti()))}break;case 13:Ri(function(){var r=tr(t,1);if(r!==null){var i=St();gn(r,t,1,i)}}),Np(t,1)}};Zh=function(t){if(t.tag===13){var e=tr(t,134217728);if(e!==null){var n=St();gn(e,t,134217728,n)}Np(t,134217728)}};oC=function(t){if(t.tag===13){var e=Ur(t),n=tr(t,e);if(n!==null){var r=St();gn(n,t,e,r)}Np(t,e)}};sC=function(){return ge};aC=function(t,e){var n=ge;try{return ge=t,e()}finally{ge=n}};Ed=function(t,e,n){switch(e){case"input":if(pd(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=sc(r);if(!i)throw Error($(90));bE(r),pd(r,i)}}}break;case"textarea":BE(t,n);break;case"select":e=n.value,e!=null&&po(t,!!n.multiple,e,!1)}};KE=Sp;JE=Ri;var Ik={usingClientEntryPoint:!1,Events:[Ua,io,sc,zE,WE,Sp]},ks={findFiberByHostInstance:pi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},wk={bundleType:ks.bundleType,version:ks.version,rendererPackageName:ks.rendererPackageName,rendererConfig:ks.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ar.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=XE(t),t===null?null:t.stateNode},findFiberByHostInstance:ks.findFiberByHostInstance||Ek,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Sl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Sl.isDisabled&&Sl.supportsFiber)try{nc=Sl.inject(wk),xn=Sl}catch{}}Jt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ik;Jt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!xp(e))throw Error($(200));return Tk(t,e,null,n)};Jt.createRoot=function(t,e){if(!xp(t))throw Error($(299));var n=!1,r="",i=kI;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=kp(t,1,!1,null,null,n,!1,r,i),t[er]=e.current,ha(t.nodeType===8?t.parentNode:t),new Mp(e)};Jt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error($(188)):(t=Object.keys(t).join(","),Error($(268,t)));return t=XE(e),t=t===null?null:t.stateNode,t};Jt.flushSync=function(t){return Ri(t)};Jt.hydrate=function(t,e,n){if(!mc(e))throw Error($(200));return gc(null,t,e,!0,n)};Jt.hydrateRoot=function(t,e,n){if(!xp(t))throw Error($(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",s=kI;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),e=PI(e,null,t,1,n??null,i,!1,o,s),t[er]=e.current,ha(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new pc(e)};Jt.render=function(t,e,n){if(!mc(e))throw Error($(200));return gc(null,t,e,!1,n)};Jt.unmountComponentAtNode=function(t){if(!mc(t))throw Error($(40));return t._reactRootContainer?(Ri(function(){gc(null,null,t,!1,function(){t._reactRootContainer=null,t[er]=null})}),!0):!1};Jt.unstable_batchedUpdates=Sp;Jt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!mc(n))throw Error($(200));if(t==null||t._reactInternals===void 0)throw Error($(38));return gc(t,e,n,!1,r)};Jt.version="18.3.1-next-f1338f8080-20240426";function NI(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(NI)}catch(t){console.error(t)}}NI(),NE.exports=Jt;var Sk=NE.exports,MI,Ky=Sk;MI=Ky.createRoot,Ky.hydrateRoot;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Ak,Rk;function Pk(){return{geminiUrl:Ak,vertexUrl:Rk}}function kk(t,e,n,r){var i,o;if(!(t!=null&&t.baseUrl)){const s=Pk();return e?(i=s.vertexUrl)!==null&&i!==void 0?i:n:(o=s.geminiUrl)!==null&&o!==void 0?o:r}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Fi{}function J(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(r,i)=>{if(Object.prototype.hasOwnProperty.call(e,i)){const o=e[i];return o!=null?String(o):""}else throw new Error(`Key '${i}' not found in valueMap.`)})}function l(t,e,n){for(let o=0;o<e.length-1;o++){const s=e[o];if(s.endsWith("[]")){const u=s.slice(0,-2);if(!(u in t))if(Array.isArray(n))t[u]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${s}`);if(Array.isArray(t[u])){const c=t[u];if(Array.isArray(n))for(let f=0;f<c.length;f++){const h=c[f];l(h,e.slice(o+1),n[f])}else for(const f of c)l(f,e.slice(o+1),n)}return}else if(s.endsWith("[0]")){const u=s.slice(0,-3);u in t||(t[u]=[{}]);const c=t[u];l(c[0],e.slice(o+1),n);return}(!t[s]||typeof t[s]!="object")&&(t[s]={}),t=t[s]}const r=e[e.length-1],i=t[r];if(i!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===i)return;if(typeof i=="object"&&typeof n=="object"&&i!==null&&n!==null)Object.assign(i,n);else throw new Error(`Cannot set value for an existing key. Key: ${r}`)}else r==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[r]=n}function a(t,e){try{if(e.length===1&&e[0]==="_self")return t;for(let n=0;n<e.length;n++){if(typeof t!="object"||t===null)return;const r=e[n];if(r.endsWith("[]")){const i=r.slice(0,-2);if(i in t){const o=t[i];return Array.isArray(o)?o.map(s=>a(s,e.slice(n+1))):void 0}else return}else t=t[r]}return t}catch(n){if(n instanceof TypeError)return;throw n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Dp(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Nk(t){const e={},n=a(t,["operationName"]);n!=null&&l(e,["_url","operationName"],n);const r=a(t,["config"]);return r!=null&&l(e,["config"],r),e}function Mk(t){const e={},n=a(t,["operationName"]);n!=null&&l(e,["operationName"],n);const r=a(t,["resourceName"]);r!=null&&l(e,["_url","resourceName"],r);const i=a(t,["config"]);return i!=null&&l(e,["config"],i),e}function xk(t){const e={},n=a(t,["operationName"]);n!=null&&l(e,["_url","operationName"],n);const r=a(t,["config"]);return r!=null&&l(e,["config"],r),e}function Dk(t){const e={},n=a(t,["video","uri"]);n!=null&&l(e,["uri"],n);const r=a(t,["video","encodedVideo"]);r!=null&&l(e,["videoBytes"],Dp(r));const i=a(t,["encoding"]);return i!=null&&l(e,["mimeType"],i),e}function Vk(t){const e={},n=a(t,["_self"]);return n!=null&&l(e,["video"],Dk(n)),e}function Lk(t){const e={},n=a(t,["generatedSamples"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>Vk(s))),l(e,["generatedVideos"],o)}const r=a(t,["raiMediaFilteredCount"]);r!=null&&l(e,["raiMediaFilteredCount"],r);const i=a(t,["raiMediaFilteredReasons"]);return i!=null&&l(e,["raiMediaFilteredReasons"],i),e}function Uk(t){const e={},n=a(t,["name"]);n!=null&&l(e,["name"],n);const r=a(t,["metadata"]);r!=null&&l(e,["metadata"],r);const i=a(t,["done"]);i!=null&&l(e,["done"],i);const o=a(t,["error"]);o!=null&&l(e,["error"],o);const s=a(t,["response","generateVideoResponse"]);return s!=null&&l(e,["response"],Lk(s)),e}function Fk(t){const e={},n=a(t,["gcsUri"]);n!=null&&l(e,["uri"],n);const r=a(t,["bytesBase64Encoded"]);r!=null&&l(e,["videoBytes"],Dp(r));const i=a(t,["mimeType"]);return i!=null&&l(e,["mimeType"],i),e}function bk(t){const e={},n=a(t,["_self"]);return n!=null&&l(e,["video"],Fk(n)),e}function Ok(t){const e={},n=a(t,["videos"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>bk(s))),l(e,["generatedVideos"],o)}const r=a(t,["raiMediaFilteredCount"]);r!=null&&l(e,["raiMediaFilteredCount"],r);const i=a(t,["raiMediaFilteredReasons"]);return i!=null&&l(e,["raiMediaFilteredReasons"],i),e}function Bk(t){const e={},n=a(t,["name"]);n!=null&&l(e,["name"],n);const r=a(t,["metadata"]);r!=null&&l(e,["metadata"],r);const i=a(t,["done"]);i!=null&&l(e,["done"],i);const o=a(t,["error"]);o!=null&&l(e,["error"],o);const s=a(t,["response"]);return s!=null&&l(e,["response"],Ok(s)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Jy;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Jy||(Jy={}));var Yy;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(Yy||(Yy={}));var ht;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(ht||(ht={}));var Qy;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT"})(Qy||(Qy={}));var Xy;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(Xy||(Xy={}));var Zy;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(Zy||(Zy={}));var jy;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(jy||(jy={}));var e_;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(e_||(e_={}));var t_;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(t_||(t_={}));var n_;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(n_||(n_={}));var r_;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL"})(r_||(r_={}));var i_;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(i_||(i_={}));var o_;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(o_||(o_={}));var s_;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY"})(s_||(s_={}));var a_;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(a_||(a_={}));var Mu;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(Mu||(Mu={}));var l_;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(l_||(l_={}));var eh;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(eh||(eh={}));var u_;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(u_||(u_={}));var c_;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(c_||(c_={}));var f_;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(f_||(f_={}));var d_;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(d_||(d_={}));var h_;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(h_||(h_={}));var p_;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(p_||(p_={}));var m_;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(m_||(m_={}));var g_;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(g_||(g_={}));var y_;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(y_||(y_={}));var __;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(__||(__={}));var v_;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(v_||(v_={}));var T_;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(T_||(T_={}));var E_;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(E_||(E_={}));var C_;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(C_||(C_={}));var I_;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(I_||(I_={}));var w_;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(w_||(w_={}));var S_;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(S_||(S_={}));var A_;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(A_||(A_={}));var R_;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(R_||(R_={}));var P_;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(P_||(P_={}));var k_;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(k_||(k_={}));var N_;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(N_||(N_={}));var M_;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(M_||(M_={}));var x_;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(x_||(x_={}));var D_;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(D_||(D_={}));var V_;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(V_||(V_={}));var L_;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(L_||(L_={}));var U_;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(U_||(U_={}));var F_;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(F_||(F_={}));var fo;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(fo||(fo={}));class th{constructor(e){const n={};for(const r of e.headers.entries())n[r[0]]=r[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class Ns{get text(){var e,n,r,i,o,s,u,c;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let f="",h=!1;const p=[];for(const m of(c=(u=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||u===void 0?void 0:u.parts)!==null&&c!==void 0?c:[]){for(const[_,I]of Object.entries(m))_!=="text"&&_!=="thought"&&(I!==null||I!==void 0)&&p.push(_);if(typeof m.text=="string"){if(typeof m.thought=="boolean"&&m.thought)continue;h=!0,f+=m.text}}return p.length>0&&console.warn(`there are non-text parts ${p} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),h?f:void 0}get data(){var e,n,r,i,o,s,u,c;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let f="";const h=[];for(const p of(c=(u=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||u===void 0?void 0:u.parts)!==null&&c!==void 0?c:[]){for(const[m,_]of Object.entries(p))m!=="inlineData"&&(_!==null||_!==void 0)&&h.push(m);p.inlineData&&typeof p.inlineData.data=="string"&&(f+=atob(p.inlineData.data))}return h.length>0&&console.warn(`there are non-data parts ${h} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),f.length>0?btoa(f):void 0}get functionCalls(){var e,n,r,i,o,s,u,c;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const f=(c=(u=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||u===void 0?void 0:u.parts)===null||c===void 0?void 0:c.filter(h=>h.functionCall).map(h=>h.functionCall).filter(h=>h!==void 0);if((f==null?void 0:f.length)!==0)return f}get executableCode(){var e,n,r,i,o,s,u,c,f;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const h=(c=(u=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||u===void 0?void 0:u.parts)===null||c===void 0?void 0:c.filter(p=>p.executableCode).map(p=>p.executableCode).filter(p=>p!==void 0);if((h==null?void 0:h.length)!==0)return(f=h==null?void 0:h[0])===null||f===void 0?void 0:f.code}get codeExecutionResult(){var e,n,r,i,o,s,u,c,f;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const h=(c=(u=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||u===void 0?void 0:u.parts)===null||c===void 0?void 0:c.filter(p=>p.codeExecutionResult).map(p=>p.codeExecutionResult).filter(p=>p!==void 0);if((h==null?void 0:h.length)!==0)return(f=h==null?void 0:h[0])===null||f===void 0?void 0:f.output}}class b_{}class O_{}class qk{}class $k{}class Hk{}class Gk{}class B_{}class q_{}class $_{}class zk{}class xu{_fromAPIResponse({apiResponse:e,isVertexAI:n}){const r=new xu;let i;const o=e;return n?i=Bk(o):i=Uk(o),Object.assign(r,i),r}}class H_{}class G_{}class z_{}class Wk{}class Kk{}class Jk{}class W_{}class Yk{get text(){var e,n,r;let i="",o=!1;const s=[];for(const u of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[c,f]of Object.entries(u))c!=="text"&&c!=="thought"&&f!==null&&s.push(c);if(typeof u.text=="string"){if(typeof u.thought=="boolean"&&u.thought)continue;o=!0,i+=u.text}}return s.length>0&&console.warn(`there are non-text parts ${s} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),o?i:void 0}get data(){var e,n,r;let i="";const o=[];for(const s of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[u,c]of Object.entries(s))u!=="inlineData"&&c!==null&&o.push(u);s.inlineData&&typeof s.inlineData.data=="string"&&(i+=atob(s.inlineData.data))}return o.length>0&&console.warn(`there are non-data parts ${o} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),i.length>0?btoa(i):void 0}}class Qk{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function he(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function xI(t,e){const n=he(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function DI(t){return Array.isArray(t)?t.map(e=>Du(e)):[Du(t)]}function Du(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function VI(t){const e=Du(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function LI(t){const e=Du(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function K_(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function UI(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>K_(e)):[K_(t)]}function nh(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function J_(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function Y_(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function yt(t){if(t==null)throw new Error("ContentUnion is required");return nh(t)?t:{role:"user",parts:UI(t)}}function Vp(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const r=yt(n);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]});if(t.isVertexAI()){const n=yt(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>yt(n)):[yt(e)]}function nn(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(J_(t)||Y_(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[yt(t)]}const e=[],n=[],r=nh(t[0]);for(const i of t){const o=nh(i);if(o!=r)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(o)e.push(i);else{if(J_(i)||Y_(i))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(i)}}return r||e.push({role:"user",parts:UI(n)}),e}function Xk(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(r=>r!=="null");if(n.length===1)e.type=Object.values(ht).includes(n[0].toUpperCase())?n[0].toUpperCase():ht.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const r of n)e.anyOf.push({type:Object.values(ht).includes(r.toUpperCase())?r.toUpperCase():ht.TYPE_UNSPECIFIED})}}function To(t){const e={},n=["items"],r=["anyOf"],i=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const o=t.anyOf;o!=null&&o.length==2&&(o[0].type==="null"?(e.nullable=!0,t=o[1]):o[1].type==="null"&&(e.nullable=!0,t=o[0])),t.type instanceof Array&&Xk(t.type,e);for(const[s,u]of Object.entries(t))if(u!=null)if(s=="type"){if(u==="null")throw new Error("type: null can not be the only possible type for the field.");if(u instanceof Array)continue;e.type=Object.values(ht).includes(u.toUpperCase())?u.toUpperCase():ht.TYPE_UNSPECIFIED}else if(n.includes(s))e[s]=To(u);else if(r.includes(s)){const c=[];for(const f of u){if(f.type=="null"){e.nullable=!0;continue}c.push(To(f))}e[s]=c}else if(i.includes(s)){const c={};for(const[f,h]of Object.entries(u))c[f]=To(h);e[s]=c}else{if(s==="additionalProperties")continue;e[s]=u}return e}function Lp(t){return To(t)}function Up(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function Fp(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function Wo(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=To(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=To(e.response));return t}function Ko(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function Zk(t,e,n,r=1){const i=!e.startsWith(`${n}/`)&&e.split("/").length===r;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:i?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:i?`${n}/${e}`:e}function lr(t,e){if(typeof e!="string")throw new Error("name must be a string");return Zk(t,e,"cachedContents")}function FI(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function bi(t){return Dp(t)}function jk(t){return t!=null&&typeof t=="object"&&"name"in t}function eN(t){return t!=null&&typeof t=="object"&&"video"in t}function tN(t){return t!=null&&typeof t=="object"&&"uri"in t}function bI(t){var e;let n;if(jk(t)&&(n=t.name),!(tN(t)&&(n=t.uri,n===void 0))&&!(eN(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const i=n.split("files/")[1].match(/[a-z0-9]+/);if(i===null)throw new Error(`Could not extract file name from URI ${n}`);n=i[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function OI(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function BI(t){for(const e of["models","tunedModels","publisherModels"])if(nN(t,e))return t[e];return[]}function nN(t,e){return t!==null&&typeof t=="object"&&e in t}function rN(t,e={}){const n=t,r={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(r.responseJsonSchema=n.outputSchema),e.behavior&&(r.behavior=e.behavior),{functionDeclarations:[r]}}function iN(t,e={}){const n=[],r=new Set;for(const i of t){const o=i.name;if(r.has(o))throw new Error(`Duplicate function name ${o} found in MCP tools. Please ensure function names are unique.`);r.add(o);const s=rN(i,e);s.functionDeclarations&&n.push(...s.functionDeclarations)}return{functionDeclarations:n}}function qI(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const r=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,i=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(i>0||r!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(r>0||i!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function oN(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function $I(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const i=n.inlinedResponses;if(!Array.isArray(i)||i.length===0)return t;let o=!1;for(const s of i){if(typeof s!="object"||s===null)continue;const c=s.response;if(typeof c!="object"||c===null)continue;if(c.embedding!==void 0){o=!0;break}}return o&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function Jo(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function HI(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function sN(t){const e={},n=a(t,["fps"]);n!=null&&l(e,["fps"],n);const r=a(t,["endOffset"]);r!=null&&l(e,["endOffset"],r);const i=a(t,["startOffset"]);return i!=null&&l(e,["startOffset"],i),e}function aN(t){const e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=a(t,["data"]);n!=null&&l(e,["data"],n);const r=a(t,["mimeType"]);return r!=null&&l(e,["mimeType"],r),e}function lN(t){const e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=a(t,["fileUri"]);n!=null&&l(e,["fileUri"],n);const r=a(t,["mimeType"]);return r!=null&&l(e,["mimeType"],r),e}function uN(t){const e={},n=a(t,["id"]);n!=null&&l(e,["id"],n);const r=a(t,["args"]);r!=null&&l(e,["args"],r);const i=a(t,["name"]);return i!=null&&l(e,["name"],i),e}function cN(t){const e={},n=a(t,["videoMetadata"]);n!=null&&l(e,["videoMetadata"],sN(n));const r=a(t,["thought"]);r!=null&&l(e,["thought"],r);const i=a(t,["inlineData"]);i!=null&&l(e,["inlineData"],aN(i));const o=a(t,["fileData"]);o!=null&&l(e,["fileData"],lN(o));const s=a(t,["thoughtSignature"]);s!=null&&l(e,["thoughtSignature"],s);const u=a(t,["functionCall"]);u!=null&&l(e,["functionCall"],uN(u));const c=a(t,["codeExecutionResult"]);c!=null&&l(e,["codeExecutionResult"],c);const f=a(t,["executableCode"]);f!=null&&l(e,["executableCode"],f);const h=a(t,["functionResponse"]);h!=null&&l(e,["functionResponse"],h);const p=a(t,["text"]);return p!=null&&l(e,["text"],p),e}function GI(t){const e={},n=a(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>cN(o))),l(e,["parts"],i)}const r=a(t,["role"]);return r!=null&&l(e,["role"],r),e}function fN(t){const e={},n=a(t,["anyOf"]);n!=null&&l(e,["anyOf"],n);const r=a(t,["default"]);r!=null&&l(e,["default"],r);const i=a(t,["description"]);i!=null&&l(e,["description"],i);const o=a(t,["enum"]);o!=null&&l(e,["enum"],o);const s=a(t,["example"]);s!=null&&l(e,["example"],s);const u=a(t,["format"]);u!=null&&l(e,["format"],u);const c=a(t,["items"]);c!=null&&l(e,["items"],c);const f=a(t,["maxItems"]);f!=null&&l(e,["maxItems"],f);const h=a(t,["maxLength"]);h!=null&&l(e,["maxLength"],h);const p=a(t,["maxProperties"]);p!=null&&l(e,["maxProperties"],p);const m=a(t,["maximum"]);m!=null&&l(e,["maximum"],m);const _=a(t,["minItems"]);_!=null&&l(e,["minItems"],_);const I=a(t,["minLength"]);I!=null&&l(e,["minLength"],I);const P=a(t,["minProperties"]);P!=null&&l(e,["minProperties"],P);const x=a(t,["minimum"]);x!=null&&l(e,["minimum"],x);const S=a(t,["nullable"]);S!=null&&l(e,["nullable"],S);const C=a(t,["pattern"]);C!=null&&l(e,["pattern"],C);const A=a(t,["properties"]);A!=null&&l(e,["properties"],A);const D=a(t,["propertyOrdering"]);D!=null&&l(e,["propertyOrdering"],D);const F=a(t,["required"]);F!=null&&l(e,["required"],F);const b=a(t,["title"]);b!=null&&l(e,["title"],b);const v=a(t,["type"]);return v!=null&&l(e,["type"],v),e}function dN(t){const e={};if(a(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=a(t,["category"]);n!=null&&l(e,["category"],n);const r=a(t,["threshold"]);return r!=null&&l(e,["threshold"],r),e}function hN(t){const e={},n=a(t,["behavior"]);n!=null&&l(e,["behavior"],n);const r=a(t,["description"]);r!=null&&l(e,["description"],r);const i=a(t,["name"]);i!=null&&l(e,["name"],i);const o=a(t,["parameters"]);o!=null&&l(e,["parameters"],o);const s=a(t,["parametersJsonSchema"]);s!=null&&l(e,["parametersJsonSchema"],s);const u=a(t,["response"]);u!=null&&l(e,["response"],u);const c=a(t,["responseJsonSchema"]);return c!=null&&l(e,["responseJsonSchema"],c),e}function pN(t){const e={},n=a(t,["startTime"]);n!=null&&l(e,["startTime"],n);const r=a(t,["endTime"]);return r!=null&&l(e,["endTime"],r),e}function mN(t){const e={},n=a(t,["timeRangeFilter"]);if(n!=null&&l(e,["timeRangeFilter"],pN(n)),a(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function gN(t){const e={},n=a(t,["mode"]);n!=null&&l(e,["mode"],n);const r=a(t,["dynamicThreshold"]);return r!=null&&l(e,["dynamicThreshold"],r),e}function yN(t){const e={},n=a(t,["dynamicRetrievalConfig"]);return n!=null&&l(e,["dynamicRetrievalConfig"],gN(n)),e}function _N(){return{}}function vN(t){const e={},n=a(t,["environment"]);return n!=null&&l(e,["environment"],n),e}function TN(t){const e={},n=a(t,["functionDeclarations"]);if(n!=null){let c=n;Array.isArray(c)&&(c=c.map(f=>hN(f))),l(e,["functionDeclarations"],c)}if(a(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=a(t,["googleSearch"]);r!=null&&l(e,["googleSearch"],mN(r));const i=a(t,["googleSearchRetrieval"]);if(i!=null&&l(e,["googleSearchRetrieval"],yN(i)),a(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(a(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");a(t,["urlContext"])!=null&&l(e,["urlContext"],_N());const s=a(t,["computerUse"]);s!=null&&l(e,["computerUse"],vN(s));const u=a(t,["codeExecution"]);return u!=null&&l(e,["codeExecution"],u),e}function EN(t){const e={},n=a(t,["mode"]);n!=null&&l(e,["mode"],n);const r=a(t,["allowedFunctionNames"]);return r!=null&&l(e,["allowedFunctionNames"],r),e}function CN(t){const e={},n=a(t,["latitude"]);n!=null&&l(e,["latitude"],n);const r=a(t,["longitude"]);return r!=null&&l(e,["longitude"],r),e}function IN(t){const e={},n=a(t,["latLng"]);n!=null&&l(e,["latLng"],CN(n));const r=a(t,["languageCode"]);return r!=null&&l(e,["languageCode"],r),e}function wN(t){const e={},n=a(t,["functionCallingConfig"]);n!=null&&l(e,["functionCallingConfig"],EN(n));const r=a(t,["retrievalConfig"]);return r!=null&&l(e,["retrievalConfig"],IN(r)),e}function SN(t){const e={},n=a(t,["voiceName"]);return n!=null&&l(e,["voiceName"],n),e}function zI(t){const e={},n=a(t,["prebuiltVoiceConfig"]);return n!=null&&l(e,["prebuiltVoiceConfig"],SN(n)),e}function AN(t){const e={},n=a(t,["speaker"]);n!=null&&l(e,["speaker"],n);const r=a(t,["voiceConfig"]);return r!=null&&l(e,["voiceConfig"],zI(r)),e}function RN(t){const e={},n=a(t,["speakerVoiceConfigs"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>AN(i))),l(e,["speakerVoiceConfigs"],r)}return e}function PN(t){const e={},n=a(t,["voiceConfig"]);n!=null&&l(e,["voiceConfig"],zI(n));const r=a(t,["multiSpeakerVoiceConfig"]);r!=null&&l(e,["multiSpeakerVoiceConfig"],RN(r));const i=a(t,["languageCode"]);return i!=null&&l(e,["languageCode"],i),e}function kN(t){const e={},n=a(t,["includeThoughts"]);n!=null&&l(e,["includeThoughts"],n);const r=a(t,["thinkingBudget"]);return r!=null&&l(e,["thinkingBudget"],r),e}function NN(t,e,n){const r={},i=a(e,["systemInstruction"]);n!==void 0&&i!=null&&l(n,["systemInstruction"],GI(yt(i)));const o=a(e,["temperature"]);o!=null&&l(r,["temperature"],o);const s=a(e,["topP"]);s!=null&&l(r,["topP"],s);const u=a(e,["topK"]);u!=null&&l(r,["topK"],u);const c=a(e,["candidateCount"]);c!=null&&l(r,["candidateCount"],c);const f=a(e,["maxOutputTokens"]);f!=null&&l(r,["maxOutputTokens"],f);const h=a(e,["stopSequences"]);h!=null&&l(r,["stopSequences"],h);const p=a(e,["responseLogprobs"]);p!=null&&l(r,["responseLogprobs"],p);const m=a(e,["logprobs"]);m!=null&&l(r,["logprobs"],m);const _=a(e,["presencePenalty"]);_!=null&&l(r,["presencePenalty"],_);const I=a(e,["frequencyPenalty"]);I!=null&&l(r,["frequencyPenalty"],I);const P=a(e,["seed"]);P!=null&&l(r,["seed"],P);const x=a(e,["responseMimeType"]);x!=null&&l(r,["responseMimeType"],x);const S=a(e,["responseSchema"]);S!=null&&l(r,["responseSchema"],fN(Lp(S)));const C=a(e,["responseJsonSchema"]);if(C!=null&&l(r,["responseJsonSchema"],C),a(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(a(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const A=a(e,["safetySettings"]);if(n!==void 0&&A!=null){let k=A;Array.isArray(k)&&(k=k.map(M=>dN(M))),l(n,["safetySettings"],k)}const D=a(e,["tools"]);if(n!==void 0&&D!=null){let k=Ko(D);Array.isArray(k)&&(k=k.map(M=>TN(Wo(M)))),l(n,["tools"],k)}const F=a(e,["toolConfig"]);if(n!==void 0&&F!=null&&l(n,["toolConfig"],wN(F)),a(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const b=a(e,["cachedContent"]);n!==void 0&&b!=null&&l(n,["cachedContent"],lr(t,b));const v=a(e,["responseModalities"]);v!=null&&l(r,["responseModalities"],v);const T=a(e,["mediaResolution"]);T!=null&&l(r,["mediaResolution"],T);const w=a(e,["speechConfig"]);if(w!=null&&l(r,["speechConfig"],PN(Up(w))),a(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const R=a(e,["thinkingConfig"]);return R!=null&&l(r,["thinkingConfig"],kN(R)),r}function MN(t,e){const n={},r=a(e,["model"]);r!=null&&l(n,["request","model"],he(t,r));const i=a(e,["contents"]);if(i!=null){let s=nn(i);Array.isArray(s)&&(s=s.map(u=>GI(u))),l(n,["request","contents"],s)}const o=a(e,["config"]);return o!=null&&l(n,["request","generationConfig"],NN(t,o,n)),n}function xN(t,e){const n={};if(a(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(a(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(a(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const r=a(e,["fileName"]);r!=null&&l(n,["fileName"],r);const i=a(e,["inlinedRequests"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>MN(t,s))),l(n,["requests","requests"],o)}return n}function DN(t,e){const n={},r=a(t,["displayName"]);if(e!==void 0&&r!=null&&l(e,["batch","displayName"],r),a(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function Of(t,e){const n={},r=a(e,["model"]);r!=null&&l(n,["_url","model"],he(t,r));const i=a(e,["src"]);i!=null&&l(n,["batch","inputConfig"],xN(t,qI(t,i)));const o=a(e,["config"]);return o!=null&&l(n,["config"],DN(o,n)),n}function VN(t,e){const n={},r=a(t,["taskType"]);e!==void 0&&r!=null&&l(e,["requests[]","taskType"],r);const i=a(t,["title"]);e!==void 0&&i!=null&&l(e,["requests[]","title"],i);const o=a(t,["outputDimensionality"]);if(e!==void 0&&o!=null&&l(e,["requests[]","outputDimensionality"],o),a(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(a(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function LN(t,e){const n={},r=a(e,["contents"]);r!=null&&l(n,["requests[]","request","content"],Vp(t,r));const i=a(e,["config"]);return i!=null&&l(n,["config"],VN(i,n)),n}function UN(t,e){const n={},r=a(e,["fileName"]);r!=null&&l(n,["file_name"],r);const i=a(e,["inlinedRequests"]);return i!=null&&l(n,["requests"],LN(t,i)),n}function FN(t,e){const n={},r=a(t,["displayName"]);return e!==void 0&&r!=null&&l(e,["batch","displayName"],r),n}function Bf(t,e){const n={},r=a(e,["model"]);r!=null&&l(n,["_url","model"],he(t,r));const i=a(e,["src"]);i!=null&&l(n,["batch","inputConfig"],UN(t,i));const o=a(e,["config"]);return o!=null&&l(n,["config"],FN(o,n)),n}function bN(t,e){const n={},r=a(e,["name"]);r!=null&&l(n,["_url","name"],Jo(t,r));const i=a(e,["config"]);return i!=null&&l(n,["config"],i),n}function ON(t,e){const n={},r=a(e,["name"]);r!=null&&l(n,["_url","name"],Jo(t,r));const i=a(e,["config"]);return i!=null&&l(n,["config"],i),n}function BN(t,e){const n={},r=a(t,["pageSize"]);e!==void 0&&r!=null&&l(e,["_query","pageSize"],r);const i=a(t,["pageToken"]);if(e!==void 0&&i!=null&&l(e,["_query","pageToken"],i),a(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function qN(t){const e={},n=a(t,["config"]);return n!=null&&l(e,["config"],BN(n,e)),e}function $N(t,e){const n={},r=a(e,["name"]);r!=null&&l(n,["_url","name"],Jo(t,r));const i=a(e,["config"]);return i!=null&&l(n,["config"],i),n}function HN(t){const e={},n=a(t,["format"]);n!=null&&l(e,["instancesFormat"],n);const r=a(t,["gcsUri"]);r!=null&&l(e,["gcsSource","uris"],r);const i=a(t,["bigqueryUri"]);if(i!=null&&l(e,["bigquerySource","inputUri"],i),a(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(a(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function GN(t){const e={},n=a(t,["format"]);n!=null&&l(e,["predictionsFormat"],n);const r=a(t,["gcsUri"]);r!=null&&l(e,["gcsDestination","outputUriPrefix"],r);const i=a(t,["bigqueryUri"]);if(i!=null&&l(e,["bigqueryDestination","outputUri"],i),a(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(a(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(a(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function zN(t,e){const n={},r=a(t,["displayName"]);e!==void 0&&r!=null&&l(e,["displayName"],r);const i=a(t,["dest"]);return e!==void 0&&i!=null&&l(e,["outputConfig"],GN(oN(i))),n}function WN(t,e){const n={},r=a(e,["model"]);r!=null&&l(n,["model"],he(t,r));const i=a(e,["src"]);i!=null&&l(n,["inputConfig"],HN(qI(t,i)));const o=a(e,["config"]);return o!=null&&l(n,["config"],zN(o,n)),n}function KN(t,e){const n={},r=a(e,["name"]);r!=null&&l(n,["_url","name"],Jo(t,r));const i=a(e,["config"]);return i!=null&&l(n,["config"],i),n}function JN(t,e){const n={},r=a(e,["name"]);r!=null&&l(n,["_url","name"],Jo(t,r));const i=a(e,["config"]);return i!=null&&l(n,["config"],i),n}function YN(t,e){const n={},r=a(t,["pageSize"]);e!==void 0&&r!=null&&l(e,["_query","pageSize"],r);const i=a(t,["pageToken"]);e!==void 0&&i!=null&&l(e,["_query","pageToken"],i);const o=a(t,["filter"]);return e!==void 0&&o!=null&&l(e,["_query","filter"],o),n}function QN(t){const e={},n=a(t,["config"]);return n!=null&&l(e,["config"],YN(n,e)),e}function XN(t,e){const n={},r=a(e,["name"]);r!=null&&l(n,["_url","name"],Jo(t,r));const i=a(e,["config"]);return i!=null&&l(n,["config"],i),n}function ZN(t){const e={},n=a(t,["fps"]);n!=null&&l(e,["fps"],n);const r=a(t,["endOffset"]);r!=null&&l(e,["endOffset"],r);const i=a(t,["startOffset"]);return i!=null&&l(e,["startOffset"],i),e}function jN(t){const e={},n=a(t,["data"]);n!=null&&l(e,["data"],n);const r=a(t,["mimeType"]);return r!=null&&l(e,["mimeType"],r),e}function eM(t){const e={},n=a(t,["fileUri"]);n!=null&&l(e,["fileUri"],n);const r=a(t,["mimeType"]);return r!=null&&l(e,["mimeType"],r),e}function tM(t){const e={},n=a(t,["id"]);n!=null&&l(e,["id"],n);const r=a(t,["args"]);r!=null&&l(e,["args"],r);const i=a(t,["name"]);return i!=null&&l(e,["name"],i),e}function nM(t){const e={},n=a(t,["videoMetadata"]);n!=null&&l(e,["videoMetadata"],ZN(n));const r=a(t,["thought"]);r!=null&&l(e,["thought"],r);const i=a(t,["inlineData"]);i!=null&&l(e,["inlineData"],jN(i));const o=a(t,["fileData"]);o!=null&&l(e,["fileData"],eM(o));const s=a(t,["thoughtSignature"]);s!=null&&l(e,["thoughtSignature"],s);const u=a(t,["functionCall"]);u!=null&&l(e,["functionCall"],tM(u));const c=a(t,["codeExecutionResult"]);c!=null&&l(e,["codeExecutionResult"],c);const f=a(t,["executableCode"]);f!=null&&l(e,["executableCode"],f);const h=a(t,["functionResponse"]);h!=null&&l(e,["functionResponse"],h);const p=a(t,["text"]);return p!=null&&l(e,["text"],p),e}function rM(t){const e={},n=a(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>nM(o))),l(e,["parts"],i)}const r=a(t,["role"]);return r!=null&&l(e,["role"],r),e}function iM(t){const e={},n=a(t,["citationSources"]);return n!=null&&l(e,["citations"],n),e}function oM(t){const e={},n=a(t,["retrievedUrl"]);n!=null&&l(e,["retrievedUrl"],n);const r=a(t,["urlRetrievalStatus"]);return r!=null&&l(e,["urlRetrievalStatus"],r),e}function sM(t){const e={},n=a(t,["urlMetadata"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>oM(i))),l(e,["urlMetadata"],r)}return e}function aM(t){const e={},n=a(t,["content"]);n!=null&&l(e,["content"],rM(n));const r=a(t,["citationMetadata"]);r!=null&&l(e,["citationMetadata"],iM(r));const i=a(t,["tokenCount"]);i!=null&&l(e,["tokenCount"],i);const o=a(t,["finishReason"]);o!=null&&l(e,["finishReason"],o);const s=a(t,["urlContextMetadata"]);s!=null&&l(e,["urlContextMetadata"],sM(s));const u=a(t,["avgLogprobs"]);u!=null&&l(e,["avgLogprobs"],u);const c=a(t,["groundingMetadata"]);c!=null&&l(e,["groundingMetadata"],c);const f=a(t,["index"]);f!=null&&l(e,["index"],f);const h=a(t,["logprobsResult"]);h!=null&&l(e,["logprobsResult"],h);const p=a(t,["safetyRatings"]);return p!=null&&l(e,["safetyRatings"],p),e}function lM(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const r=a(t,["candidates"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(f=>aM(f))),l(e,["candidates"],c)}const i=a(t,["modelVersion"]);i!=null&&l(e,["modelVersion"],i);const o=a(t,["promptFeedback"]);o!=null&&l(e,["promptFeedback"],o);const s=a(t,["responseId"]);s!=null&&l(e,["responseId"],s);const u=a(t,["usageMetadata"]);return u!=null&&l(e,["usageMetadata"],u),e}function bp(t){const e={},n=a(t,["details"]);n!=null&&l(e,["details"],n);const r=a(t,["code"]);r!=null&&l(e,["code"],r);const i=a(t,["message"]);return i!=null&&l(e,["message"],i),e}function uM(t){const e={},n=a(t,["response"]);n!=null&&l(e,["response"],lM(n));const r=a(t,["error"]);return r!=null&&l(e,["error"],bp(r)),e}function cM(t){const e={},n=a(t,["values"]);return n!=null&&l(e,["values"],n),e}function fM(t){const e={},n=a(t,["embedding"]);n!=null&&l(e,["embedding"],cM(n));const r=a(t,["tokenCount"]);return r!=null&&l(e,["tokenCount"],r),e}function dM(t){const e={},n=a(t,["response"]);n!=null&&l(e,["response"],fM(n));const r=a(t,["error"]);return r!=null&&l(e,["error"],bp(r)),e}function hM(t){const e={},n=a(t,["responsesFile"]);n!=null&&l(e,["fileName"],n);const r=a(t,["inlinedResponses","inlinedResponses"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>uM(s))),l(e,["inlinedResponses"],o)}const i=a(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>dM(s))),l(e,["inlinedEmbedContentResponses"],o)}return e}function Ji(t){const e={},n=a(t,["name"]);n!=null&&l(e,["name"],n);const r=a(t,["metadata","displayName"]);r!=null&&l(e,["displayName"],r);const i=a(t,["metadata","state"]);i!=null&&l(e,["state"],HI(i));const o=a(t,["metadata","createTime"]);o!=null&&l(e,["createTime"],o);const s=a(t,["metadata","endTime"]);s!=null&&l(e,["endTime"],s);const u=a(t,["metadata","updateTime"]);u!=null&&l(e,["updateTime"],u);const c=a(t,["metadata","model"]);c!=null&&l(e,["model"],c);const f=a(t,["metadata","output"]);return f!=null&&l(e,["dest"],hM($I(f))),e}function pM(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const r=a(t,["nextPageToken"]);r!=null&&l(e,["nextPageToken"],r);const i=a(t,["operations"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>Ji(s))),l(e,["batchJobs"],o)}return e}function mM(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const r=a(t,["name"]);r!=null&&l(e,["name"],r);const i=a(t,["done"]);i!=null&&l(e,["done"],i);const o=a(t,["error"]);return o!=null&&l(e,["error"],bp(o)),e}function WI(t){const e={},n=a(t,["details"]);n!=null&&l(e,["details"],n);const r=a(t,["code"]);r!=null&&l(e,["code"],r);const i=a(t,["message"]);return i!=null&&l(e,["message"],i),e}function gM(t){const e={},n=a(t,["instancesFormat"]);n!=null&&l(e,["format"],n);const r=a(t,["gcsSource","uris"]);r!=null&&l(e,["gcsUri"],r);const i=a(t,["bigquerySource","inputUri"]);return i!=null&&l(e,["bigqueryUri"],i),e}function yM(t){const e={},n=a(t,["predictionsFormat"]);n!=null&&l(e,["format"],n);const r=a(t,["gcsDestination","outputUriPrefix"]);r!=null&&l(e,["gcsUri"],r);const i=a(t,["bigqueryDestination","outputUri"]);return i!=null&&l(e,["bigqueryUri"],i),e}function rh(t){const e={},n=a(t,["name"]);n!=null&&l(e,["name"],n);const r=a(t,["displayName"]);r!=null&&l(e,["displayName"],r);const i=a(t,["state"]);i!=null&&l(e,["state"],HI(i));const o=a(t,["error"]);o!=null&&l(e,["error"],WI(o));const s=a(t,["createTime"]);s!=null&&l(e,["createTime"],s);const u=a(t,["startTime"]);u!=null&&l(e,["startTime"],u);const c=a(t,["endTime"]);c!=null&&l(e,["endTime"],c);const f=a(t,["updateTime"]);f!=null&&l(e,["updateTime"],f);const h=a(t,["model"]);h!=null&&l(e,["model"],h);const p=a(t,["inputConfig"]);p!=null&&l(e,["src"],gM(p));const m=a(t,["outputConfig"]);return m!=null&&l(e,["dest"],yM($I(m))),e}function _M(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const r=a(t,["nextPageToken"]);r!=null&&l(e,["nextPageToken"],r);const i=a(t,["batchPredictionJobs"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>rh(s))),l(e,["batchJobs"],o)}return e}function vM(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const r=a(t,["name"]);r!=null&&l(e,["name"],r);const i=a(t,["done"]);i!=null&&l(e,["done"],i);const o=a(t,["error"]);return o!=null&&l(e,["error"],WI(o)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Pi;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(Pi||(Pi={}));class ba{constructor(e,n,r,i){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,r,i)}init(e,n,r){var i,o;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let s={config:{}};!r||Object.keys(r).length===0?s={config:{}}:typeof r=="object"?s=Object.assign({},r):s=r,s.config&&(s.config.pageToken=n.nextPageToken),this.paramsInternal=s,this.pageInternalSize=(o=(i=s.config)===null||i===void 0?void 0:i.pageSize)!==null&&o!==void 0?o:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class TM extends Fi{constructor(e){super(),this.apiClient=e,this.create=async n=>{var r,i;if(this.apiClient.isVertexAI())return n.config=this.formatDestination(n.src,n.config),this.createInternal(n);const o=n.src;if(!(Array.isArray(n.src)||o.inlinedRequests!==void 0))return this.createInternal(n);const u=this.createInlinedGenerateContentRequest(n),c=u.path,f=u.body,h=Of(this.apiClient,n)._query||{};return this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(r=n.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=n.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()).then(m=>Ji(m))},this.createEmbeddings=async n=>{var r,i;if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");if(!(n.src.inlinedRequests!==void 0))return this.createEmbeddingsInternal(n);const u=this.createInlinedEmbedContentRequest(n),c=u.path,f=u.body,h=Bf(this.apiClient,n)._query||{};return this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(r=n.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=n.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()).then(m=>Ji(m))},this.list=async(n={})=>new ba(Pi.PAGED_ITEM_BATCH_JOBS,r=>this.listInternal(r),await this.listInternal(n),n)}createInlinedGenerateContentRequest(e){const n=Of(this.apiClient,e),r=n._url,i=J("{model}:batchGenerateContent",r),u=n.batch.inputConfig.requests,c=u.requests,f=[];for(const h of c){const p=Object.assign({},h);if(p.systemInstruction){const m=p.systemInstruction;delete p.systemInstruction;const _=p.request;_.systemInstruction=m,p.request=_}f.push(p)}return u.requests=f,delete n.config,delete n._url,delete n._query,{path:i,body:n}}createInlinedEmbedContentRequest(e){const n=Bf(this.apiClient,e),r=n._url,i=J("{model}:asyncBatchEmbedContent",r),u=n.batch.inputConfig.requests,c=u.requests,f=[];delete u.config;for(const h of c){const p=Object.assign({},h),m=p.request;for(const _ in p)_!=="request"&&(m[_]=p[_],delete p[_]);f.push(p)}return u.requests=f,delete n.config,delete n._url,delete n._query,{path:i,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const r=n?Object.assign({},n):{},i=Date.now().toString();if(r.displayName||(r.displayName=`genaiBatchJob_${i}`),r.dest===void 0){const o=this.getGcsUri(e),s=this.getBigqueryUri(e);if(o)o.endsWith(".jsonl")?r.dest=`${o.slice(0,-6)}/dest`:r.dest=`${o}_dest_${i}`;else if(s)r.dest=`${s}_dest_${i}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return r}async createInternal(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const f=WN(this.apiClient,e);return u=J("batchPredictionJobs",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>rh(h))}else{const f=Of(this.apiClient,e);return u=J("{model}:batchGenerateContent",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>Ji(h))}}async createEmbeddingsInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Bf(this.apiClient,e);return o=J("{model}:asyncBatchEmbedContent",u._url),s=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>Ji(c))}}async get(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const f=KN(this.apiClient,e);return u=J("batchPredictionJobs/{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>rh(h))}else{const f=bN(this.apiClient,e);return u=J("batches/{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>Ji(h))}}async cancel(e){var n,r,i,o;let s="",u={};if(this.apiClient.isVertexAI()){const c=JN(this.apiClient,e);s=J("batchPredictionJobs/{name}:cancel",c._url),u=c._query,delete c.config,delete c._url,delete c._query,await this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}else{const c=ON(this.apiClient,e);s=J("batches/{name}:cancel",c._url),u=c._query,delete c.config,delete c._url,delete c._query,await this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const f=QN(e);return u=J("batchPredictionJobs",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=_M(h),m=new W_;return Object.assign(m,p),m})}else{const f=qN(e);return u=J("batches",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=pM(h),m=new W_;return Object.assign(m,p),m})}}async delete(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const f=XN(this.apiClient,e);return u=J("batchPredictionJobs/{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>vM(h))}else{const f=$N(this.apiClient,e);return u=J("batches/{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>mM(h))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function EM(t){const e={},n=a(t,["fps"]);n!=null&&l(e,["fps"],n);const r=a(t,["endOffset"]);r!=null&&l(e,["endOffset"],r);const i=a(t,["startOffset"]);return i!=null&&l(e,["startOffset"],i),e}function CM(t){const e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=a(t,["data"]);n!=null&&l(e,["data"],n);const r=a(t,["mimeType"]);return r!=null&&l(e,["mimeType"],r),e}function IM(t){const e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=a(t,["fileUri"]);n!=null&&l(e,["fileUri"],n);const r=a(t,["mimeType"]);return r!=null&&l(e,["mimeType"],r),e}function wM(t){const e={},n=a(t,["id"]);n!=null&&l(e,["id"],n);const r=a(t,["args"]);r!=null&&l(e,["args"],r);const i=a(t,["name"]);return i!=null&&l(e,["name"],i),e}function SM(t){const e={},n=a(t,["videoMetadata"]);n!=null&&l(e,["videoMetadata"],EM(n));const r=a(t,["thought"]);r!=null&&l(e,["thought"],r);const i=a(t,["inlineData"]);i!=null&&l(e,["inlineData"],CM(i));const o=a(t,["fileData"]);o!=null&&l(e,["fileData"],IM(o));const s=a(t,["thoughtSignature"]);s!=null&&l(e,["thoughtSignature"],s);const u=a(t,["functionCall"]);u!=null&&l(e,["functionCall"],wM(u));const c=a(t,["codeExecutionResult"]);c!=null&&l(e,["codeExecutionResult"],c);const f=a(t,["executableCode"]);f!=null&&l(e,["executableCode"],f);const h=a(t,["functionResponse"]);h!=null&&l(e,["functionResponse"],h);const p=a(t,["text"]);return p!=null&&l(e,["text"],p),e}function Q_(t){const e={},n=a(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>SM(o))),l(e,["parts"],i)}const r=a(t,["role"]);return r!=null&&l(e,["role"],r),e}function AM(t){const e={},n=a(t,["behavior"]);n!=null&&l(e,["behavior"],n);const r=a(t,["description"]);r!=null&&l(e,["description"],r);const i=a(t,["name"]);i!=null&&l(e,["name"],i);const o=a(t,["parameters"]);o!=null&&l(e,["parameters"],o);const s=a(t,["parametersJsonSchema"]);s!=null&&l(e,["parametersJsonSchema"],s);const u=a(t,["response"]);u!=null&&l(e,["response"],u);const c=a(t,["responseJsonSchema"]);return c!=null&&l(e,["responseJsonSchema"],c),e}function RM(t){const e={},n=a(t,["startTime"]);n!=null&&l(e,["startTime"],n);const r=a(t,["endTime"]);return r!=null&&l(e,["endTime"],r),e}function PM(t){const e={},n=a(t,["timeRangeFilter"]);if(n!=null&&l(e,["timeRangeFilter"],RM(n)),a(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function kM(t){const e={},n=a(t,["mode"]);n!=null&&l(e,["mode"],n);const r=a(t,["dynamicThreshold"]);return r!=null&&l(e,["dynamicThreshold"],r),e}function NM(t){const e={},n=a(t,["dynamicRetrievalConfig"]);return n!=null&&l(e,["dynamicRetrievalConfig"],kM(n)),e}function MM(){return{}}function xM(t){const e={},n=a(t,["environment"]);return n!=null&&l(e,["environment"],n),e}function DM(t){const e={},n=a(t,["functionDeclarations"]);if(n!=null){let c=n;Array.isArray(c)&&(c=c.map(f=>AM(f))),l(e,["functionDeclarations"],c)}if(a(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=a(t,["googleSearch"]);r!=null&&l(e,["googleSearch"],PM(r));const i=a(t,["googleSearchRetrieval"]);if(i!=null&&l(e,["googleSearchRetrieval"],NM(i)),a(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(a(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");a(t,["urlContext"])!=null&&l(e,["urlContext"],MM());const s=a(t,["computerUse"]);s!=null&&l(e,["computerUse"],xM(s));const u=a(t,["codeExecution"]);return u!=null&&l(e,["codeExecution"],u),e}function VM(t){const e={},n=a(t,["mode"]);n!=null&&l(e,["mode"],n);const r=a(t,["allowedFunctionNames"]);return r!=null&&l(e,["allowedFunctionNames"],r),e}function LM(t){const e={},n=a(t,["latitude"]);n!=null&&l(e,["latitude"],n);const r=a(t,["longitude"]);return r!=null&&l(e,["longitude"],r),e}function UM(t){const e={},n=a(t,["latLng"]);n!=null&&l(e,["latLng"],LM(n));const r=a(t,["languageCode"]);return r!=null&&l(e,["languageCode"],r),e}function FM(t){const e={},n=a(t,["functionCallingConfig"]);n!=null&&l(e,["functionCallingConfig"],VM(n));const r=a(t,["retrievalConfig"]);return r!=null&&l(e,["retrievalConfig"],UM(r)),e}function bM(t,e){const n={},r=a(t,["ttl"]);e!==void 0&&r!=null&&l(e,["ttl"],r);const i=a(t,["expireTime"]);e!==void 0&&i!=null&&l(e,["expireTime"],i);const o=a(t,["displayName"]);e!==void 0&&o!=null&&l(e,["displayName"],o);const s=a(t,["contents"]);if(e!==void 0&&s!=null){let h=nn(s);Array.isArray(h)&&(h=h.map(p=>Q_(p))),l(e,["contents"],h)}const u=a(t,["systemInstruction"]);e!==void 0&&u!=null&&l(e,["systemInstruction"],Q_(yt(u)));const c=a(t,["tools"]);if(e!==void 0&&c!=null){let h=c;Array.isArray(h)&&(h=h.map(p=>DM(p))),l(e,["tools"],h)}const f=a(t,["toolConfig"]);if(e!==void 0&&f!=null&&l(e,["toolConfig"],FM(f)),a(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function OM(t,e){const n={},r=a(e,["model"]);r!=null&&l(n,["model"],xI(t,r));const i=a(e,["config"]);return i!=null&&l(n,["config"],bM(i,n)),n}function BM(t,e){const n={},r=a(e,["name"]);r!=null&&l(n,["_url","name"],lr(t,r));const i=a(e,["config"]);return i!=null&&l(n,["config"],i),n}function qM(t,e){const n={},r=a(e,["name"]);r!=null&&l(n,["_url","name"],lr(t,r));const i=a(e,["config"]);return i!=null&&l(n,["config"],i),n}function $M(t,e){const n={},r=a(t,["ttl"]);e!==void 0&&r!=null&&l(e,["ttl"],r);const i=a(t,["expireTime"]);return e!==void 0&&i!=null&&l(e,["expireTime"],i),n}function HM(t,e){const n={},r=a(e,["name"]);r!=null&&l(n,["_url","name"],lr(t,r));const i=a(e,["config"]);return i!=null&&l(n,["config"],$M(i,n)),n}function GM(t,e){const n={},r=a(t,["pageSize"]);e!==void 0&&r!=null&&l(e,["_query","pageSize"],r);const i=a(t,["pageToken"]);return e!==void 0&&i!=null&&l(e,["_query","pageToken"],i),n}function zM(t){const e={},n=a(t,["config"]);return n!=null&&l(e,["config"],GM(n,e)),e}function WM(t){const e={},n=a(t,["fps"]);n!=null&&l(e,["fps"],n);const r=a(t,["endOffset"]);r!=null&&l(e,["endOffset"],r);const i=a(t,["startOffset"]);return i!=null&&l(e,["startOffset"],i),e}function KM(t){const e={},n=a(t,["displayName"]);n!=null&&l(e,["displayName"],n);const r=a(t,["data"]);r!=null&&l(e,["data"],r);const i=a(t,["mimeType"]);return i!=null&&l(e,["mimeType"],i),e}function JM(t){const e={},n=a(t,["displayName"]);n!=null&&l(e,["displayName"],n);const r=a(t,["fileUri"]);r!=null&&l(e,["fileUri"],r);const i=a(t,["mimeType"]);return i!=null&&l(e,["mimeType"],i),e}function YM(t){const e={},n=a(t,["id"]);n!=null&&l(e,["id"],n);const r=a(t,["args"]);r!=null&&l(e,["args"],r);const i=a(t,["name"]);return i!=null&&l(e,["name"],i),e}function QM(t){const e={},n=a(t,["videoMetadata"]);n!=null&&l(e,["videoMetadata"],WM(n));const r=a(t,["thought"]);r!=null&&l(e,["thought"],r);const i=a(t,["inlineData"]);i!=null&&l(e,["inlineData"],KM(i));const o=a(t,["fileData"]);o!=null&&l(e,["fileData"],JM(o));const s=a(t,["thoughtSignature"]);s!=null&&l(e,["thoughtSignature"],s);const u=a(t,["functionCall"]);u!=null&&l(e,["functionCall"],YM(u));const c=a(t,["codeExecutionResult"]);c!=null&&l(e,["codeExecutionResult"],c);const f=a(t,["executableCode"]);f!=null&&l(e,["executableCode"],f);const h=a(t,["functionResponse"]);h!=null&&l(e,["functionResponse"],h);const p=a(t,["text"]);return p!=null&&l(e,["text"],p),e}function X_(t){const e={},n=a(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>QM(o))),l(e,["parts"],i)}const r=a(t,["role"]);return r!=null&&l(e,["role"],r),e}function XM(t){const e={};if(a(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=a(t,["description"]);n!=null&&l(e,["description"],n);const r=a(t,["name"]);r!=null&&l(e,["name"],r);const i=a(t,["parameters"]);i!=null&&l(e,["parameters"],i);const o=a(t,["parametersJsonSchema"]);o!=null&&l(e,["parametersJsonSchema"],o);const s=a(t,["response"]);s!=null&&l(e,["response"],s);const u=a(t,["responseJsonSchema"]);return u!=null&&l(e,["responseJsonSchema"],u),e}function ZM(t){const e={},n=a(t,["startTime"]);n!=null&&l(e,["startTime"],n);const r=a(t,["endTime"]);return r!=null&&l(e,["endTime"],r),e}function jM(t){const e={},n=a(t,["timeRangeFilter"]);n!=null&&l(e,["timeRangeFilter"],ZM(n));const r=a(t,["excludeDomains"]);return r!=null&&l(e,["excludeDomains"],r),e}function ex(t){const e={},n=a(t,["mode"]);n!=null&&l(e,["mode"],n);const r=a(t,["dynamicThreshold"]);return r!=null&&l(e,["dynamicThreshold"],r),e}function tx(t){const e={},n=a(t,["dynamicRetrievalConfig"]);return n!=null&&l(e,["dynamicRetrievalConfig"],ex(n)),e}function nx(t){const e={},n=a(t,["excludeDomains"]);return n!=null&&l(e,["excludeDomains"],n),e}function rx(t){const e={},n=a(t,["apiKeyString"]);return n!=null&&l(e,["apiKeyString"],n),e}function ix(t){const e={},n=a(t,["apiKeyConfig"]);n!=null&&l(e,["apiKeyConfig"],rx(n));const r=a(t,["authType"]);r!=null&&l(e,["authType"],r);const i=a(t,["googleServiceAccountConfig"]);i!=null&&l(e,["googleServiceAccountConfig"],i);const o=a(t,["httpBasicAuthConfig"]);o!=null&&l(e,["httpBasicAuthConfig"],o);const s=a(t,["oauthConfig"]);s!=null&&l(e,["oauthConfig"],s);const u=a(t,["oidcConfig"]);return u!=null&&l(e,["oidcConfig"],u),e}function ox(t){const e={},n=a(t,["authConfig"]);return n!=null&&l(e,["authConfig"],ix(n)),e}function sx(){return{}}function ax(t){const e={},n=a(t,["environment"]);return n!=null&&l(e,["environment"],n),e}function lx(t){const e={},n=a(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(m=>XM(m))),l(e,["functionDeclarations"],p)}const r=a(t,["retrieval"]);r!=null&&l(e,["retrieval"],r);const i=a(t,["googleSearch"]);i!=null&&l(e,["googleSearch"],jM(i));const o=a(t,["googleSearchRetrieval"]);o!=null&&l(e,["googleSearchRetrieval"],tx(o));const s=a(t,["enterpriseWebSearch"]);s!=null&&l(e,["enterpriseWebSearch"],nx(s));const u=a(t,["googleMaps"]);u!=null&&l(e,["googleMaps"],ox(u)),a(t,["urlContext"])!=null&&l(e,["urlContext"],sx());const f=a(t,["computerUse"]);f!=null&&l(e,["computerUse"],ax(f));const h=a(t,["codeExecution"]);return h!=null&&l(e,["codeExecution"],h),e}function ux(t){const e={},n=a(t,["mode"]);n!=null&&l(e,["mode"],n);const r=a(t,["allowedFunctionNames"]);return r!=null&&l(e,["allowedFunctionNames"],r),e}function cx(t){const e={},n=a(t,["latitude"]);n!=null&&l(e,["latitude"],n);const r=a(t,["longitude"]);return r!=null&&l(e,["longitude"],r),e}function fx(t){const e={},n=a(t,["latLng"]);n!=null&&l(e,["latLng"],cx(n));const r=a(t,["languageCode"]);return r!=null&&l(e,["languageCode"],r),e}function dx(t){const e={},n=a(t,["functionCallingConfig"]);n!=null&&l(e,["functionCallingConfig"],ux(n));const r=a(t,["retrievalConfig"]);return r!=null&&l(e,["retrievalConfig"],fx(r)),e}function hx(t,e){const n={},r=a(t,["ttl"]);e!==void 0&&r!=null&&l(e,["ttl"],r);const i=a(t,["expireTime"]);e!==void 0&&i!=null&&l(e,["expireTime"],i);const o=a(t,["displayName"]);e!==void 0&&o!=null&&l(e,["displayName"],o);const s=a(t,["contents"]);if(e!==void 0&&s!=null){let p=nn(s);Array.isArray(p)&&(p=p.map(m=>X_(m))),l(e,["contents"],p)}const u=a(t,["systemInstruction"]);e!==void 0&&u!=null&&l(e,["systemInstruction"],X_(yt(u)));const c=a(t,["tools"]);if(e!==void 0&&c!=null){let p=c;Array.isArray(p)&&(p=p.map(m=>lx(m))),l(e,["tools"],p)}const f=a(t,["toolConfig"]);e!==void 0&&f!=null&&l(e,["toolConfig"],dx(f));const h=a(t,["kmsKeyName"]);return e!==void 0&&h!=null&&l(e,["encryption_spec","kmsKeyName"],h),n}function px(t,e){const n={},r=a(e,["model"]);r!=null&&l(n,["model"],xI(t,r));const i=a(e,["config"]);return i!=null&&l(n,["config"],hx(i,n)),n}function mx(t,e){const n={},r=a(e,["name"]);r!=null&&l(n,["_url","name"],lr(t,r));const i=a(e,["config"]);return i!=null&&l(n,["config"],i),n}function gx(t,e){const n={},r=a(e,["name"]);r!=null&&l(n,["_url","name"],lr(t,r));const i=a(e,["config"]);return i!=null&&l(n,["config"],i),n}function yx(t,e){const n={},r=a(t,["ttl"]);e!==void 0&&r!=null&&l(e,["ttl"],r);const i=a(t,["expireTime"]);return e!==void 0&&i!=null&&l(e,["expireTime"],i),n}function _x(t,e){const n={},r=a(e,["name"]);r!=null&&l(n,["_url","name"],lr(t,r));const i=a(e,["config"]);return i!=null&&l(n,["config"],yx(i,n)),n}function vx(t,e){const n={},r=a(t,["pageSize"]);e!==void 0&&r!=null&&l(e,["_query","pageSize"],r);const i=a(t,["pageToken"]);return e!==void 0&&i!=null&&l(e,["_query","pageToken"],i),n}function Tx(t){const e={},n=a(t,["config"]);return n!=null&&l(e,["config"],vx(n,e)),e}function Yl(t){const e={},n=a(t,["name"]);n!=null&&l(e,["name"],n);const r=a(t,["displayName"]);r!=null&&l(e,["displayName"],r);const i=a(t,["model"]);i!=null&&l(e,["model"],i);const o=a(t,["createTime"]);o!=null&&l(e,["createTime"],o);const s=a(t,["updateTime"]);s!=null&&l(e,["updateTime"],s);const u=a(t,["expireTime"]);u!=null&&l(e,["expireTime"],u);const c=a(t,["usageMetadata"]);return c!=null&&l(e,["usageMetadata"],c),e}function Ex(t){const e={},n=a(t,["sdkHttpResponse"]);return n!=null&&l(e,["sdkHttpResponse"],n),e}function Cx(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const r=a(t,["nextPageToken"]);r!=null&&l(e,["nextPageToken"],r);const i=a(t,["cachedContents"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>Yl(s))),l(e,["cachedContents"],o)}return e}function Ql(t){const e={},n=a(t,["name"]);n!=null&&l(e,["name"],n);const r=a(t,["displayName"]);r!=null&&l(e,["displayName"],r);const i=a(t,["model"]);i!=null&&l(e,["model"],i);const o=a(t,["createTime"]);o!=null&&l(e,["createTime"],o);const s=a(t,["updateTime"]);s!=null&&l(e,["updateTime"],s);const u=a(t,["expireTime"]);u!=null&&l(e,["expireTime"],u);const c=a(t,["usageMetadata"]);return c!=null&&l(e,["usageMetadata"],c),e}function Ix(t){const e={},n=a(t,["sdkHttpResponse"]);return n!=null&&l(e,["sdkHttpResponse"],n),e}function wx(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const r=a(t,["nextPageToken"]);r!=null&&l(e,["nextPageToken"],r);const i=a(t,["cachedContents"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>Ql(s))),l(e,["cachedContents"],o)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Sx extends Fi{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new ba(Pi.PAGED_ITEM_CACHED_CONTENTS,r=>this.listInternal(r),await this.listInternal(n),n)}async create(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const f=px(this.apiClient,e);return u=J("cachedContents",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>Ql(h))}else{const f=OM(this.apiClient,e);return u=J("cachedContents",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>Yl(h))}}async get(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const f=mx(this.apiClient,e);return u=J("{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>Ql(h))}else{const f=BM(this.apiClient,e);return u=J("{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>Yl(h))}}async delete(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const f=gx(this.apiClient,e);return u=J("{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=Ix(h),m=new G_;return Object.assign(m,p),m})}else{const f=qM(this.apiClient,e);return u=J("{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=Ex(h),m=new G_;return Object.assign(m,p),m})}}async update(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const f=_x(this.apiClient,e);return u=J("{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>Ql(h))}else{const f=HM(this.apiClient,e);return u=J("{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>Yl(h))}}async listInternal(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const f=Tx(e);return u=J("cachedContents",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=wx(h),m=new z_;return Object.assign(m,p),m})}else{const f=zM(e);return u=J("cachedContents",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=Cx(h),m=new z_;return Object.assign(m,p),m})}}}function Z_(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Se(t){return this instanceof Se?(this.v=t,this):new Se(t)}function Eo(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),u("next"),u("throw"),u("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(_){return function(I){return Promise.resolve(I).then(_,p)}}function u(_,I){r[_]&&(i[_]=function(P){return new Promise(function(x,S){o.push([_,P,x,S])>1||c(_,P)})},I&&(i[_]=I(i[_])))}function c(_,I){try{f(r[_](I))}catch(P){m(o[0][3],P)}}function f(_){_.value instanceof Se?Promise.resolve(_.value.v).then(h,p):m(o[0][2],_)}function h(_){c("next",_)}function p(_){c("throw",_)}function m(_,I){_(I),o.shift(),o.length&&c(o[0][0],o[0][1])}}function Xs(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Z_=="function"?Z_(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(u,c){s=t[o](s),i(u,c,s.done,s.value)})}}function i(o,s,u,c){Promise.resolve(c).then(function(f){o({value:f,done:u})},s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ax(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:KI(n)}function KI(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function Rx(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function j_(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let r=0;for(;r<n;)if(t[r].role==="user")e.push(t[r]),r++;else{const i=[];let o=!0;for(;r<n&&t[r].role==="model";)i.push(t[r]),o&&!KI(t[r])&&(o=!1),r++;o?e.push(...i):e.pop()}return e}class Px{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new kx(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class kx{constructor(e,n,r,i={},o=[]){this.apiClient=e,this.modelsModule=n,this.model=r,this.config=i,this.history=o,this.sendPromise=Promise.resolve(),Rx(o)}async sendMessage(e){var n;await this.sendPromise;const r=yt(e.message),i=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var o,s,u;const c=await i,f=(s=(o=c.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content,h=c.automaticFunctionCallingHistory,p=this.getHistory(!0).length;let m=[];h!=null&&(m=(u=h.slice(p))!==null&&u!==void 0?u:[]);const _=f?[f]:[];this.recordHistory(r,_,m)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),i}async sendMessageStream(e){var n;await this.sendPromise;const r=yt(e.message),i=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=i.then(()=>{}).catch(()=>{});const o=await i;return this.processStreamResponse(o,r)}getHistory(e=!1){const n=e?j_(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){var r,i;return Eo(this,arguments,function*(){var s,u,c,f;const h=[];try{for(var p=!0,m=Xs(e),_;_=yield Se(m.next()),s=_.done,!s;p=!0){f=_.value,p=!1;const I=f;if(Ax(I)){const P=(i=(r=I.candidates)===null||r===void 0?void 0:r[0])===null||i===void 0?void 0:i.content;P!==void 0&&h.push(P)}yield yield Se(I)}}catch(I){u={error:I}}finally{try{!p&&!s&&(c=m.return)&&(yield Se(c.call(m)))}finally{if(u)throw u.error}}this.recordHistory(n,h)})}recordHistory(e,n,r){let i=[];n.length>0&&n.every(o=>o.role!==void 0)?i=n:i.push({role:"model",parts:[]}),r&&r.length>0?this.history.push(...j_(r)):this.history.push(e),this.history.push(...i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class yc extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,yc.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Nx(t,e){const n={},r=a(t,["pageSize"]);e!==void 0&&r!=null&&l(e,["_query","pageSize"],r);const i=a(t,["pageToken"]);return e!==void 0&&i!=null&&l(e,["_query","pageToken"],i),n}function Mx(t){const e={},n=a(t,["config"]);return n!=null&&l(e,["config"],Nx(n,e)),e}function xx(t){const e={},n=a(t,["details"]);n!=null&&l(e,["details"],n);const r=a(t,["message"]);r!=null&&l(e,["message"],r);const i=a(t,["code"]);return i!=null&&l(e,["code"],i),e}function Dx(t){const e={},n=a(t,["name"]);n!=null&&l(e,["name"],n);const r=a(t,["displayName"]);r!=null&&l(e,["displayName"],r);const i=a(t,["mimeType"]);i!=null&&l(e,["mimeType"],i);const o=a(t,["sizeBytes"]);o!=null&&l(e,["sizeBytes"],o);const s=a(t,["createTime"]);s!=null&&l(e,["createTime"],s);const u=a(t,["expirationTime"]);u!=null&&l(e,["expirationTime"],u);const c=a(t,["updateTime"]);c!=null&&l(e,["updateTime"],c);const f=a(t,["sha256Hash"]);f!=null&&l(e,["sha256Hash"],f);const h=a(t,["uri"]);h!=null&&l(e,["uri"],h);const p=a(t,["downloadUri"]);p!=null&&l(e,["downloadUri"],p);const m=a(t,["state"]);m!=null&&l(e,["state"],m);const _=a(t,["source"]);_!=null&&l(e,["source"],_);const I=a(t,["videoMetadata"]);I!=null&&l(e,["videoMetadata"],I);const P=a(t,["error"]);return P!=null&&l(e,["error"],xx(P)),e}function Vx(t){const e={},n=a(t,["file"]);n!=null&&l(e,["file"],Dx(n));const r=a(t,["config"]);return r!=null&&l(e,["config"],r),e}function Lx(t){const e={},n=a(t,["name"]);n!=null&&l(e,["_url","file"],bI(n));const r=a(t,["config"]);return r!=null&&l(e,["config"],r),e}function Ux(t){const e={},n=a(t,["name"]);n!=null&&l(e,["_url","file"],bI(n));const r=a(t,["config"]);return r!=null&&l(e,["config"],r),e}function Fx(t){const e={},n=a(t,["details"]);n!=null&&l(e,["details"],n);const r=a(t,["message"]);r!=null&&l(e,["message"],r);const i=a(t,["code"]);return i!=null&&l(e,["code"],i),e}function ih(t){const e={},n=a(t,["name"]);n!=null&&l(e,["name"],n);const r=a(t,["displayName"]);r!=null&&l(e,["displayName"],r);const i=a(t,["mimeType"]);i!=null&&l(e,["mimeType"],i);const o=a(t,["sizeBytes"]);o!=null&&l(e,["sizeBytes"],o);const s=a(t,["createTime"]);s!=null&&l(e,["createTime"],s);const u=a(t,["expirationTime"]);u!=null&&l(e,["expirationTime"],u);const c=a(t,["updateTime"]);c!=null&&l(e,["updateTime"],c);const f=a(t,["sha256Hash"]);f!=null&&l(e,["sha256Hash"],f);const h=a(t,["uri"]);h!=null&&l(e,["uri"],h);const p=a(t,["downloadUri"]);p!=null&&l(e,["downloadUri"],p);const m=a(t,["state"]);m!=null&&l(e,["state"],m);const _=a(t,["source"]);_!=null&&l(e,["source"],_);const I=a(t,["videoMetadata"]);I!=null&&l(e,["videoMetadata"],I);const P=a(t,["error"]);return P!=null&&l(e,["error"],Fx(P)),e}function bx(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const r=a(t,["nextPageToken"]);r!=null&&l(e,["nextPageToken"],r);const i=a(t,["files"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>ih(s))),l(e,["files"],o)}return e}function Ox(t){const e={},n=a(t,["sdkHttpResponse"]);return n!=null&&l(e,["sdkHttpResponse"],n),e}function Bx(t){const e={},n=a(t,["sdkHttpResponse"]);return n!=null&&l(e,["sdkHttpResponse"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class qx extends Fi{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new ba(Pi.PAGED_ITEM_FILES,r=>this.listInternal(r),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>ih(n))}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Mx(e);return o=J("files",u._url),s=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:c.headers},h})),i.then(c=>{const f=bx(c),h=new Wk;return Object.assign(h,f),h})}}async createInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Vx(e);return o=J("upload/v1beta/files",u._url),s=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>{const f=Ox(c),h=new Kk;return Object.assign(h,f),h})}}async get(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Lx(e);return o=J("files/{file}",u._url),s=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>ih(c))}}async delete(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Ux(e);return o=J("files/{file}",u._url),s=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:c.headers},h})),i.then(c=>{const f=Bx(c),h=new Jk;return Object.assign(h,f),h})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function $x(t){const e={},n=a(t,["voiceName"]);return n!=null&&l(e,["voiceName"],n),e}function JI(t){const e={},n=a(t,["prebuiltVoiceConfig"]);return n!=null&&l(e,["prebuiltVoiceConfig"],$x(n)),e}function Hx(t){const e={},n=a(t,["speaker"]);n!=null&&l(e,["speaker"],n);const r=a(t,["voiceConfig"]);return r!=null&&l(e,["voiceConfig"],JI(r)),e}function Gx(t){const e={},n=a(t,["speakerVoiceConfigs"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>Hx(i))),l(e,["speakerVoiceConfigs"],r)}return e}function zx(t){const e={},n=a(t,["voiceConfig"]);n!=null&&l(e,["voiceConfig"],JI(n));const r=a(t,["multiSpeakerVoiceConfig"]);r!=null&&l(e,["multiSpeakerVoiceConfig"],Gx(r));const i=a(t,["languageCode"]);return i!=null&&l(e,["languageCode"],i),e}function Wx(t){const e={},n=a(t,["fps"]);n!=null&&l(e,["fps"],n);const r=a(t,["endOffset"]);r!=null&&l(e,["endOffset"],r);const i=a(t,["startOffset"]);return i!=null&&l(e,["startOffset"],i),e}function Kx(t){const e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=a(t,["data"]);n!=null&&l(e,["data"],n);const r=a(t,["mimeType"]);return r!=null&&l(e,["mimeType"],r),e}function Jx(t){const e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=a(t,["fileUri"]);n!=null&&l(e,["fileUri"],n);const r=a(t,["mimeType"]);return r!=null&&l(e,["mimeType"],r),e}function Yx(t){const e={},n=a(t,["id"]);n!=null&&l(e,["id"],n);const r=a(t,["args"]);r!=null&&l(e,["args"],r);const i=a(t,["name"]);return i!=null&&l(e,["name"],i),e}function Qx(t){const e={},n=a(t,["videoMetadata"]);n!=null&&l(e,["videoMetadata"],Wx(n));const r=a(t,["thought"]);r!=null&&l(e,["thought"],r);const i=a(t,["inlineData"]);i!=null&&l(e,["inlineData"],Kx(i));const o=a(t,["fileData"]);o!=null&&l(e,["fileData"],Jx(o));const s=a(t,["thoughtSignature"]);s!=null&&l(e,["thoughtSignature"],s);const u=a(t,["functionCall"]);u!=null&&l(e,["functionCall"],Yx(u));const c=a(t,["codeExecutionResult"]);c!=null&&l(e,["codeExecutionResult"],c);const f=a(t,["executableCode"]);f!=null&&l(e,["executableCode"],f);const h=a(t,["functionResponse"]);h!=null&&l(e,["functionResponse"],h);const p=a(t,["text"]);return p!=null&&l(e,["text"],p),e}function Xx(t){const e={},n=a(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>Qx(o))),l(e,["parts"],i)}const r=a(t,["role"]);return r!=null&&l(e,["role"],r),e}function Zx(t){const e={},n=a(t,["behavior"]);n!=null&&l(e,["behavior"],n);const r=a(t,["description"]);r!=null&&l(e,["description"],r);const i=a(t,["name"]);i!=null&&l(e,["name"],i);const o=a(t,["parameters"]);o!=null&&l(e,["parameters"],o);const s=a(t,["parametersJsonSchema"]);s!=null&&l(e,["parametersJsonSchema"],s);const u=a(t,["response"]);u!=null&&l(e,["response"],u);const c=a(t,["responseJsonSchema"]);return c!=null&&l(e,["responseJsonSchema"],c),e}function jx(t){const e={},n=a(t,["startTime"]);n!=null&&l(e,["startTime"],n);const r=a(t,["endTime"]);return r!=null&&l(e,["endTime"],r),e}function eD(t){const e={},n=a(t,["timeRangeFilter"]);if(n!=null&&l(e,["timeRangeFilter"],jx(n)),a(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function tD(t){const e={},n=a(t,["mode"]);n!=null&&l(e,["mode"],n);const r=a(t,["dynamicThreshold"]);return r!=null&&l(e,["dynamicThreshold"],r),e}function nD(t){const e={},n=a(t,["dynamicRetrievalConfig"]);return n!=null&&l(e,["dynamicRetrievalConfig"],tD(n)),e}function rD(){return{}}function iD(t){const e={},n=a(t,["environment"]);return n!=null&&l(e,["environment"],n),e}function oD(t){const e={},n=a(t,["functionDeclarations"]);if(n!=null){let c=n;Array.isArray(c)&&(c=c.map(f=>Zx(f))),l(e,["functionDeclarations"],c)}if(a(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=a(t,["googleSearch"]);r!=null&&l(e,["googleSearch"],eD(r));const i=a(t,["googleSearchRetrieval"]);if(i!=null&&l(e,["googleSearchRetrieval"],nD(i)),a(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(a(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");a(t,["urlContext"])!=null&&l(e,["urlContext"],rD());const s=a(t,["computerUse"]);s!=null&&l(e,["computerUse"],iD(s));const u=a(t,["codeExecution"]);return u!=null&&l(e,["codeExecution"],u),e}function sD(t){const e={},n=a(t,["handle"]);if(n!=null&&l(e,["handle"],n),a(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function ev(){return{}}function aD(t){const e={},n=a(t,["disabled"]);n!=null&&l(e,["disabled"],n);const r=a(t,["startOfSpeechSensitivity"]);r!=null&&l(e,["startOfSpeechSensitivity"],r);const i=a(t,["endOfSpeechSensitivity"]);i!=null&&l(e,["endOfSpeechSensitivity"],i);const o=a(t,["prefixPaddingMs"]);o!=null&&l(e,["prefixPaddingMs"],o);const s=a(t,["silenceDurationMs"]);return s!=null&&l(e,["silenceDurationMs"],s),e}function lD(t){const e={},n=a(t,["automaticActivityDetection"]);n!=null&&l(e,["automaticActivityDetection"],aD(n));const r=a(t,["activityHandling"]);r!=null&&l(e,["activityHandling"],r);const i=a(t,["turnCoverage"]);return i!=null&&l(e,["turnCoverage"],i),e}function uD(t){const e={},n=a(t,["targetTokens"]);return n!=null&&l(e,["targetTokens"],n),e}function cD(t){const e={},n=a(t,["triggerTokens"]);n!=null&&l(e,["triggerTokens"],n);const r=a(t,["slidingWindow"]);return r!=null&&l(e,["slidingWindow"],uD(r)),e}function fD(t){const e={},n=a(t,["proactiveAudio"]);return n!=null&&l(e,["proactiveAudio"],n),e}function dD(t,e){const n={},r=a(t,["generationConfig"]);e!==void 0&&r!=null&&l(e,["setup","generationConfig"],r);const i=a(t,["responseModalities"]);e!==void 0&&i!=null&&l(e,["setup","generationConfig","responseModalities"],i);const o=a(t,["temperature"]);e!==void 0&&o!=null&&l(e,["setup","generationConfig","temperature"],o);const s=a(t,["topP"]);e!==void 0&&s!=null&&l(e,["setup","generationConfig","topP"],s);const u=a(t,["topK"]);e!==void 0&&u!=null&&l(e,["setup","generationConfig","topK"],u);const c=a(t,["maxOutputTokens"]);e!==void 0&&c!=null&&l(e,["setup","generationConfig","maxOutputTokens"],c);const f=a(t,["mediaResolution"]);e!==void 0&&f!=null&&l(e,["setup","generationConfig","mediaResolution"],f);const h=a(t,["seed"]);e!==void 0&&h!=null&&l(e,["setup","generationConfig","seed"],h);const p=a(t,["speechConfig"]);e!==void 0&&p!=null&&l(e,["setup","generationConfig","speechConfig"],zx(Fp(p)));const m=a(t,["enableAffectiveDialog"]);e!==void 0&&m!=null&&l(e,["setup","generationConfig","enableAffectiveDialog"],m);const _=a(t,["systemInstruction"]);e!==void 0&&_!=null&&l(e,["setup","systemInstruction"],Xx(yt(_)));const I=a(t,["tools"]);if(e!==void 0&&I!=null){let F=Ko(I);Array.isArray(F)&&(F=F.map(b=>oD(Wo(b)))),l(e,["setup","tools"],F)}const P=a(t,["sessionResumption"]);e!==void 0&&P!=null&&l(e,["setup","sessionResumption"],sD(P));const x=a(t,["inputAudioTranscription"]);e!==void 0&&x!=null&&l(e,["setup","inputAudioTranscription"],ev());const S=a(t,["outputAudioTranscription"]);e!==void 0&&S!=null&&l(e,["setup","outputAudioTranscription"],ev());const C=a(t,["realtimeInputConfig"]);e!==void 0&&C!=null&&l(e,["setup","realtimeInputConfig"],lD(C));const A=a(t,["contextWindowCompression"]);e!==void 0&&A!=null&&l(e,["setup","contextWindowCompression"],cD(A));const D=a(t,["proactivity"]);return e!==void 0&&D!=null&&l(e,["setup","proactivity"],fD(D)),n}function hD(t,e){const n={},r=a(e,["model"]);r!=null&&l(n,["setup","model"],he(t,r));const i=a(e,["config"]);return i!=null&&l(n,["config"],dD(i,n)),n}function pD(){return{}}function mD(){return{}}function gD(t){const e={},n=a(t,["media"]);n!=null&&l(e,["mediaChunks"],DI(n));const r=a(t,["audio"]);r!=null&&l(e,["audio"],LI(r));const i=a(t,["audioStreamEnd"]);i!=null&&l(e,["audioStreamEnd"],i);const o=a(t,["video"]);o!=null&&l(e,["video"],VI(o));const s=a(t,["text"]);return s!=null&&l(e,["text"],s),a(t,["activityStart"])!=null&&l(e,["activityStart"],pD()),a(t,["activityEnd"])!=null&&l(e,["activityEnd"],mD()),e}function YI(t){const e={},n=a(t,["text"]);n!=null&&l(e,["text"],n);const r=a(t,["weight"]);return r!=null&&l(e,["weight"],r),e}function yD(t){const e={},n=a(t,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>YI(i))),l(e,["weightedPrompts"],r)}return e}function QI(t){const e={},n=a(t,["temperature"]);n!=null&&l(e,["temperature"],n);const r=a(t,["topK"]);r!=null&&l(e,["topK"],r);const i=a(t,["seed"]);i!=null&&l(e,["seed"],i);const o=a(t,["guidance"]);o!=null&&l(e,["guidance"],o);const s=a(t,["bpm"]);s!=null&&l(e,["bpm"],s);const u=a(t,["density"]);u!=null&&l(e,["density"],u);const c=a(t,["brightness"]);c!=null&&l(e,["brightness"],c);const f=a(t,["scale"]);f!=null&&l(e,["scale"],f);const h=a(t,["muteBass"]);h!=null&&l(e,["muteBass"],h);const p=a(t,["muteDrums"]);p!=null&&l(e,["muteDrums"],p);const m=a(t,["onlyBassAndDrums"]);m!=null&&l(e,["onlyBassAndDrums"],m);const _=a(t,["musicGenerationMode"]);return _!=null&&l(e,["musicGenerationMode"],_),e}function _D(t){const e={},n=a(t,["musicGenerationConfig"]);return n!=null&&l(e,["musicGenerationConfig"],QI(n)),e}function XI(t){const e={},n=a(t,["model"]);return n!=null&&l(e,["model"],n),e}function ZI(t){const e={},n=a(t,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>YI(i))),l(e,["weightedPrompts"],r)}return e}function oh(t){const e={},n=a(t,["setup"]);n!=null&&l(e,["setup"],XI(n));const r=a(t,["clientContent"]);r!=null&&l(e,["clientContent"],ZI(r));const i=a(t,["musicGenerationConfig"]);i!=null&&l(e,["musicGenerationConfig"],QI(i));const o=a(t,["playbackControl"]);return o!=null&&l(e,["playbackControl"],o),e}function vD(t){const e={},n=a(t,["voiceName"]);return n!=null&&l(e,["voiceName"],n),e}function TD(t){const e={},n=a(t,["prebuiltVoiceConfig"]);return n!=null&&l(e,["prebuiltVoiceConfig"],vD(n)),e}function ED(t){const e={},n=a(t,["voiceConfig"]);if(n!=null&&l(e,["voiceConfig"],TD(n)),a(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const r=a(t,["languageCode"]);return r!=null&&l(e,["languageCode"],r),e}function CD(t){const e={},n=a(t,["fps"]);n!=null&&l(e,["fps"],n);const r=a(t,["endOffset"]);r!=null&&l(e,["endOffset"],r);const i=a(t,["startOffset"]);return i!=null&&l(e,["startOffset"],i),e}function ID(t){const e={},n=a(t,["displayName"]);n!=null&&l(e,["displayName"],n);const r=a(t,["data"]);r!=null&&l(e,["data"],r);const i=a(t,["mimeType"]);return i!=null&&l(e,["mimeType"],i),e}function wD(t){const e={},n=a(t,["displayName"]);n!=null&&l(e,["displayName"],n);const r=a(t,["fileUri"]);r!=null&&l(e,["fileUri"],r);const i=a(t,["mimeType"]);return i!=null&&l(e,["mimeType"],i),e}function SD(t){const e={},n=a(t,["id"]);n!=null&&l(e,["id"],n);const r=a(t,["args"]);r!=null&&l(e,["args"],r);const i=a(t,["name"]);return i!=null&&l(e,["name"],i),e}function AD(t){const e={},n=a(t,["videoMetadata"]);n!=null&&l(e,["videoMetadata"],CD(n));const r=a(t,["thought"]);r!=null&&l(e,["thought"],r);const i=a(t,["inlineData"]);i!=null&&l(e,["inlineData"],ID(i));const o=a(t,["fileData"]);o!=null&&l(e,["fileData"],wD(o));const s=a(t,["thoughtSignature"]);s!=null&&l(e,["thoughtSignature"],s);const u=a(t,["functionCall"]);u!=null&&l(e,["functionCall"],SD(u));const c=a(t,["codeExecutionResult"]);c!=null&&l(e,["codeExecutionResult"],c);const f=a(t,["executableCode"]);f!=null&&l(e,["executableCode"],f);const h=a(t,["functionResponse"]);h!=null&&l(e,["functionResponse"],h);const p=a(t,["text"]);return p!=null&&l(e,["text"],p),e}function RD(t){const e={},n=a(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>AD(o))),l(e,["parts"],i)}const r=a(t,["role"]);return r!=null&&l(e,["role"],r),e}function PD(t){const e={};if(a(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=a(t,["description"]);n!=null&&l(e,["description"],n);const r=a(t,["name"]);r!=null&&l(e,["name"],r);const i=a(t,["parameters"]);i!=null&&l(e,["parameters"],i);const o=a(t,["parametersJsonSchema"]);o!=null&&l(e,["parametersJsonSchema"],o);const s=a(t,["response"]);s!=null&&l(e,["response"],s);const u=a(t,["responseJsonSchema"]);return u!=null&&l(e,["responseJsonSchema"],u),e}function kD(t){const e={},n=a(t,["startTime"]);n!=null&&l(e,["startTime"],n);const r=a(t,["endTime"]);return r!=null&&l(e,["endTime"],r),e}function ND(t){const e={},n=a(t,["timeRangeFilter"]);n!=null&&l(e,["timeRangeFilter"],kD(n));const r=a(t,["excludeDomains"]);return r!=null&&l(e,["excludeDomains"],r),e}function MD(t){const e={},n=a(t,["mode"]);n!=null&&l(e,["mode"],n);const r=a(t,["dynamicThreshold"]);return r!=null&&l(e,["dynamicThreshold"],r),e}function xD(t){const e={},n=a(t,["dynamicRetrievalConfig"]);return n!=null&&l(e,["dynamicRetrievalConfig"],MD(n)),e}function DD(t){const e={},n=a(t,["excludeDomains"]);return n!=null&&l(e,["excludeDomains"],n),e}function VD(t){const e={},n=a(t,["apiKeyString"]);return n!=null&&l(e,["apiKeyString"],n),e}function LD(t){const e={},n=a(t,["apiKeyConfig"]);n!=null&&l(e,["apiKeyConfig"],VD(n));const r=a(t,["authType"]);r!=null&&l(e,["authType"],r);const i=a(t,["googleServiceAccountConfig"]);i!=null&&l(e,["googleServiceAccountConfig"],i);const o=a(t,["httpBasicAuthConfig"]);o!=null&&l(e,["httpBasicAuthConfig"],o);const s=a(t,["oauthConfig"]);s!=null&&l(e,["oauthConfig"],s);const u=a(t,["oidcConfig"]);return u!=null&&l(e,["oidcConfig"],u),e}function UD(t){const e={},n=a(t,["authConfig"]);return n!=null&&l(e,["authConfig"],LD(n)),e}function FD(){return{}}function bD(t){const e={},n=a(t,["environment"]);return n!=null&&l(e,["environment"],n),e}function OD(t){const e={},n=a(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(m=>PD(m))),l(e,["functionDeclarations"],p)}const r=a(t,["retrieval"]);r!=null&&l(e,["retrieval"],r);const i=a(t,["googleSearch"]);i!=null&&l(e,["googleSearch"],ND(i));const o=a(t,["googleSearchRetrieval"]);o!=null&&l(e,["googleSearchRetrieval"],xD(o));const s=a(t,["enterpriseWebSearch"]);s!=null&&l(e,["enterpriseWebSearch"],DD(s));const u=a(t,["googleMaps"]);u!=null&&l(e,["googleMaps"],UD(u)),a(t,["urlContext"])!=null&&l(e,["urlContext"],FD());const f=a(t,["computerUse"]);f!=null&&l(e,["computerUse"],bD(f));const h=a(t,["codeExecution"]);return h!=null&&l(e,["codeExecution"],h),e}function BD(t){const e={},n=a(t,["handle"]);n!=null&&l(e,["handle"],n);const r=a(t,["transparent"]);return r!=null&&l(e,["transparent"],r),e}function tv(){return{}}function qD(t){const e={},n=a(t,["disabled"]);n!=null&&l(e,["disabled"],n);const r=a(t,["startOfSpeechSensitivity"]);r!=null&&l(e,["startOfSpeechSensitivity"],r);const i=a(t,["endOfSpeechSensitivity"]);i!=null&&l(e,["endOfSpeechSensitivity"],i);const o=a(t,["prefixPaddingMs"]);o!=null&&l(e,["prefixPaddingMs"],o);const s=a(t,["silenceDurationMs"]);return s!=null&&l(e,["silenceDurationMs"],s),e}function $D(t){const e={},n=a(t,["automaticActivityDetection"]);n!=null&&l(e,["automaticActivityDetection"],qD(n));const r=a(t,["activityHandling"]);r!=null&&l(e,["activityHandling"],r);const i=a(t,["turnCoverage"]);return i!=null&&l(e,["turnCoverage"],i),e}function HD(t){const e={},n=a(t,["targetTokens"]);return n!=null&&l(e,["targetTokens"],n),e}function GD(t){const e={},n=a(t,["triggerTokens"]);n!=null&&l(e,["triggerTokens"],n);const r=a(t,["slidingWindow"]);return r!=null&&l(e,["slidingWindow"],HD(r)),e}function zD(t){const e={},n=a(t,["proactiveAudio"]);return n!=null&&l(e,["proactiveAudio"],n),e}function WD(t,e){const n={},r=a(t,["generationConfig"]);e!==void 0&&r!=null&&l(e,["setup","generationConfig"],r);const i=a(t,["responseModalities"]);e!==void 0&&i!=null&&l(e,["setup","generationConfig","responseModalities"],i);const o=a(t,["temperature"]);e!==void 0&&o!=null&&l(e,["setup","generationConfig","temperature"],o);const s=a(t,["topP"]);e!==void 0&&s!=null&&l(e,["setup","generationConfig","topP"],s);const u=a(t,["topK"]);e!==void 0&&u!=null&&l(e,["setup","generationConfig","topK"],u);const c=a(t,["maxOutputTokens"]);e!==void 0&&c!=null&&l(e,["setup","generationConfig","maxOutputTokens"],c);const f=a(t,["mediaResolution"]);e!==void 0&&f!=null&&l(e,["setup","generationConfig","mediaResolution"],f);const h=a(t,["seed"]);e!==void 0&&h!=null&&l(e,["setup","generationConfig","seed"],h);const p=a(t,["speechConfig"]);e!==void 0&&p!=null&&l(e,["setup","generationConfig","speechConfig"],ED(Fp(p)));const m=a(t,["enableAffectiveDialog"]);e!==void 0&&m!=null&&l(e,["setup","generationConfig","enableAffectiveDialog"],m);const _=a(t,["systemInstruction"]);e!==void 0&&_!=null&&l(e,["setup","systemInstruction"],RD(yt(_)));const I=a(t,["tools"]);if(e!==void 0&&I!=null){let F=Ko(I);Array.isArray(F)&&(F=F.map(b=>OD(Wo(b)))),l(e,["setup","tools"],F)}const P=a(t,["sessionResumption"]);e!==void 0&&P!=null&&l(e,["setup","sessionResumption"],BD(P));const x=a(t,["inputAudioTranscription"]);e!==void 0&&x!=null&&l(e,["setup","inputAudioTranscription"],tv());const S=a(t,["outputAudioTranscription"]);e!==void 0&&S!=null&&l(e,["setup","outputAudioTranscription"],tv());const C=a(t,["realtimeInputConfig"]);e!==void 0&&C!=null&&l(e,["setup","realtimeInputConfig"],$D(C));const A=a(t,["contextWindowCompression"]);e!==void 0&&A!=null&&l(e,["setup","contextWindowCompression"],GD(A));const D=a(t,["proactivity"]);return e!==void 0&&D!=null&&l(e,["setup","proactivity"],zD(D)),n}function KD(t,e){const n={},r=a(e,["model"]);r!=null&&l(n,["setup","model"],he(t,r));const i=a(e,["config"]);return i!=null&&l(n,["config"],WD(i,n)),n}function JD(){return{}}function YD(){return{}}function QD(t){const e={},n=a(t,["media"]);n!=null&&l(e,["mediaChunks"],DI(n));const r=a(t,["audio"]);r!=null&&l(e,["audio"],LI(r));const i=a(t,["audioStreamEnd"]);i!=null&&l(e,["audioStreamEnd"],i);const o=a(t,["video"]);o!=null&&l(e,["video"],VI(o));const s=a(t,["text"]);return s!=null&&l(e,["text"],s),a(t,["activityStart"])!=null&&l(e,["activityStart"],JD()),a(t,["activityEnd"])!=null&&l(e,["activityEnd"],YD()),e}function XD(){return{}}function ZD(t){const e={},n=a(t,["fps"]);n!=null&&l(e,["fps"],n);const r=a(t,["endOffset"]);r!=null&&l(e,["endOffset"],r);const i=a(t,["startOffset"]);return i!=null&&l(e,["startOffset"],i),e}function jD(t){const e={},n=a(t,["data"]);n!=null&&l(e,["data"],n);const r=a(t,["mimeType"]);return r!=null&&l(e,["mimeType"],r),e}function e1(t){const e={},n=a(t,["fileUri"]);n!=null&&l(e,["fileUri"],n);const r=a(t,["mimeType"]);return r!=null&&l(e,["mimeType"],r),e}function jI(t){const e={},n=a(t,["id"]);n!=null&&l(e,["id"],n);const r=a(t,["args"]);r!=null&&l(e,["args"],r);const i=a(t,["name"]);return i!=null&&l(e,["name"],i),e}function t1(t){const e={},n=a(t,["videoMetadata"]);n!=null&&l(e,["videoMetadata"],ZD(n));const r=a(t,["thought"]);r!=null&&l(e,["thought"],r);const i=a(t,["inlineData"]);i!=null&&l(e,["inlineData"],jD(i));const o=a(t,["fileData"]);o!=null&&l(e,["fileData"],e1(o));const s=a(t,["thoughtSignature"]);s!=null&&l(e,["thoughtSignature"],s);const u=a(t,["functionCall"]);u!=null&&l(e,["functionCall"],jI(u));const c=a(t,["codeExecutionResult"]);c!=null&&l(e,["codeExecutionResult"],c);const f=a(t,["executableCode"]);f!=null&&l(e,["executableCode"],f);const h=a(t,["functionResponse"]);h!=null&&l(e,["functionResponse"],h);const p=a(t,["text"]);return p!=null&&l(e,["text"],p),e}function n1(t){const e={},n=a(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>t1(o))),l(e,["parts"],i)}const r=a(t,["role"]);return r!=null&&l(e,["role"],r),e}function nv(t){const e={},n=a(t,["text"]);n!=null&&l(e,["text"],n);const r=a(t,["finished"]);return r!=null&&l(e,["finished"],r),e}function r1(t){const e={},n=a(t,["retrievedUrl"]);n!=null&&l(e,["retrievedUrl"],n);const r=a(t,["urlRetrievalStatus"]);return r!=null&&l(e,["urlRetrievalStatus"],r),e}function i1(t){const e={},n=a(t,["urlMetadata"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>r1(i))),l(e,["urlMetadata"],r)}return e}function o1(t){const e={},n=a(t,["modelTurn"]);n!=null&&l(e,["modelTurn"],n1(n));const r=a(t,["turnComplete"]);r!=null&&l(e,["turnComplete"],r);const i=a(t,["interrupted"]);i!=null&&l(e,["interrupted"],i);const o=a(t,["groundingMetadata"]);o!=null&&l(e,["groundingMetadata"],o);const s=a(t,["generationComplete"]);s!=null&&l(e,["generationComplete"],s);const u=a(t,["inputTranscription"]);u!=null&&l(e,["inputTranscription"],nv(u));const c=a(t,["outputTranscription"]);c!=null&&l(e,["outputTranscription"],nv(c));const f=a(t,["urlContextMetadata"]);f!=null&&l(e,["urlContextMetadata"],i1(f));const h=a(t,["turnCompleteReason"]);h!=null&&l(e,["turnCompleteReason"],h);const p=a(t,["waitingForInput"]);return p!=null&&l(e,["waitingForInput"],p),e}function s1(t){const e={},n=a(t,["functionCalls"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>jI(i))),l(e,["functionCalls"],r)}return e}function a1(t){const e={},n=a(t,["ids"]);return n!=null&&l(e,["ids"],n),e}function Al(t){const e={},n=a(t,["modality"]);n!=null&&l(e,["modality"],n);const r=a(t,["tokenCount"]);return r!=null&&l(e,["tokenCount"],r),e}function l1(t){const e={},n=a(t,["promptTokenCount"]);n!=null&&l(e,["promptTokenCount"],n);const r=a(t,["cachedContentTokenCount"]);r!=null&&l(e,["cachedContentTokenCount"],r);const i=a(t,["responseTokenCount"]);i!=null&&l(e,["responseTokenCount"],i);const o=a(t,["toolUsePromptTokenCount"]);o!=null&&l(e,["toolUsePromptTokenCount"],o);const s=a(t,["thoughtsTokenCount"]);s!=null&&l(e,["thoughtsTokenCount"],s);const u=a(t,["totalTokenCount"]);u!=null&&l(e,["totalTokenCount"],u);const c=a(t,["promptTokensDetails"]);if(c!=null){let m=c;Array.isArray(m)&&(m=m.map(_=>Al(_))),l(e,["promptTokensDetails"],m)}const f=a(t,["cacheTokensDetails"]);if(f!=null){let m=f;Array.isArray(m)&&(m=m.map(_=>Al(_))),l(e,["cacheTokensDetails"],m)}const h=a(t,["responseTokensDetails"]);if(h!=null){let m=h;Array.isArray(m)&&(m=m.map(_=>Al(_))),l(e,["responseTokensDetails"],m)}const p=a(t,["toolUsePromptTokensDetails"]);if(p!=null){let m=p;Array.isArray(m)&&(m=m.map(_=>Al(_))),l(e,["toolUsePromptTokensDetails"],m)}return e}function u1(t){const e={},n=a(t,["timeLeft"]);return n!=null&&l(e,["timeLeft"],n),e}function c1(t){const e={},n=a(t,["newHandle"]);n!=null&&l(e,["newHandle"],n);const r=a(t,["resumable"]);r!=null&&l(e,["resumable"],r);const i=a(t,["lastConsumedClientMessageIndex"]);return i!=null&&l(e,["lastConsumedClientMessageIndex"],i),e}function f1(t){const e={};a(t,["setupComplete"])!=null&&l(e,["setupComplete"],XD());const r=a(t,["serverContent"]);r!=null&&l(e,["serverContent"],o1(r));const i=a(t,["toolCall"]);i!=null&&l(e,["toolCall"],s1(i));const o=a(t,["toolCallCancellation"]);o!=null&&l(e,["toolCallCancellation"],a1(o));const s=a(t,["usageMetadata"]);s!=null&&l(e,["usageMetadata"],l1(s));const u=a(t,["goAway"]);u!=null&&l(e,["goAway"],u1(u));const c=a(t,["sessionResumptionUpdate"]);return c!=null&&l(e,["sessionResumptionUpdate"],c1(c)),e}function d1(){return{}}function h1(t){const e={},n=a(t,["text"]);n!=null&&l(e,["text"],n);const r=a(t,["weight"]);return r!=null&&l(e,["weight"],r),e}function p1(t){const e={},n=a(t,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>h1(i))),l(e,["weightedPrompts"],r)}return e}function m1(t){const e={},n=a(t,["temperature"]);n!=null&&l(e,["temperature"],n);const r=a(t,["topK"]);r!=null&&l(e,["topK"],r);const i=a(t,["seed"]);i!=null&&l(e,["seed"],i);const o=a(t,["guidance"]);o!=null&&l(e,["guidance"],o);const s=a(t,["bpm"]);s!=null&&l(e,["bpm"],s);const u=a(t,["density"]);u!=null&&l(e,["density"],u);const c=a(t,["brightness"]);c!=null&&l(e,["brightness"],c);const f=a(t,["scale"]);f!=null&&l(e,["scale"],f);const h=a(t,["muteBass"]);h!=null&&l(e,["muteBass"],h);const p=a(t,["muteDrums"]);p!=null&&l(e,["muteDrums"],p);const m=a(t,["onlyBassAndDrums"]);m!=null&&l(e,["onlyBassAndDrums"],m);const _=a(t,["musicGenerationMode"]);return _!=null&&l(e,["musicGenerationMode"],_),e}function g1(t){const e={},n=a(t,["clientContent"]);n!=null&&l(e,["clientContent"],p1(n));const r=a(t,["musicGenerationConfig"]);return r!=null&&l(e,["musicGenerationConfig"],m1(r)),e}function y1(t){const e={},n=a(t,["data"]);n!=null&&l(e,["data"],n);const r=a(t,["mimeType"]);r!=null&&l(e,["mimeType"],r);const i=a(t,["sourceMetadata"]);return i!=null&&l(e,["sourceMetadata"],g1(i)),e}function _1(t){const e={},n=a(t,["audioChunks"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>y1(i))),l(e,["audioChunks"],r)}return e}function v1(t){const e={},n=a(t,["text"]);n!=null&&l(e,["text"],n);const r=a(t,["filteredReason"]);return r!=null&&l(e,["filteredReason"],r),e}function T1(t){const e={};a(t,["setupComplete"])!=null&&l(e,["setupComplete"],d1());const r=a(t,["serverContent"]);r!=null&&l(e,["serverContent"],_1(r));const i=a(t,["filteredPrompt"]);return i!=null&&l(e,["filteredPrompt"],v1(i)),e}function E1(t){const e={},n=a(t,["sessionId"]);return n!=null&&l(e,["sessionId"],n),e}function C1(t){const e={},n=a(t,["fps"]);n!=null&&l(e,["fps"],n);const r=a(t,["endOffset"]);r!=null&&l(e,["endOffset"],r);const i=a(t,["startOffset"]);return i!=null&&l(e,["startOffset"],i),e}function I1(t){const e={},n=a(t,["displayName"]);n!=null&&l(e,["displayName"],n);const r=a(t,["data"]);r!=null&&l(e,["data"],r);const i=a(t,["mimeType"]);return i!=null&&l(e,["mimeType"],i),e}function w1(t){const e={},n=a(t,["displayName"]);n!=null&&l(e,["displayName"],n);const r=a(t,["fileUri"]);r!=null&&l(e,["fileUri"],r);const i=a(t,["mimeType"]);return i!=null&&l(e,["mimeType"],i),e}function ew(t){const e={},n=a(t,["id"]);n!=null&&l(e,["id"],n);const r=a(t,["args"]);r!=null&&l(e,["args"],r);const i=a(t,["name"]);return i!=null&&l(e,["name"],i),e}function S1(t){const e={},n=a(t,["videoMetadata"]);n!=null&&l(e,["videoMetadata"],C1(n));const r=a(t,["thought"]);r!=null&&l(e,["thought"],r);const i=a(t,["inlineData"]);i!=null&&l(e,["inlineData"],I1(i));const o=a(t,["fileData"]);o!=null&&l(e,["fileData"],w1(o));const s=a(t,["thoughtSignature"]);s!=null&&l(e,["thoughtSignature"],s);const u=a(t,["functionCall"]);u!=null&&l(e,["functionCall"],ew(u));const c=a(t,["codeExecutionResult"]);c!=null&&l(e,["codeExecutionResult"],c);const f=a(t,["executableCode"]);f!=null&&l(e,["executableCode"],f);const h=a(t,["functionResponse"]);h!=null&&l(e,["functionResponse"],h);const p=a(t,["text"]);return p!=null&&l(e,["text"],p),e}function A1(t){const e={},n=a(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>S1(o))),l(e,["parts"],i)}const r=a(t,["role"]);return r!=null&&l(e,["role"],r),e}function rv(t){const e={},n=a(t,["text"]);n!=null&&l(e,["text"],n);const r=a(t,["finished"]);return r!=null&&l(e,["finished"],r),e}function R1(t){const e={},n=a(t,["modelTurn"]);n!=null&&l(e,["modelTurn"],A1(n));const r=a(t,["turnComplete"]);r!=null&&l(e,["turnComplete"],r);const i=a(t,["interrupted"]);i!=null&&l(e,["interrupted"],i);const o=a(t,["groundingMetadata"]);o!=null&&l(e,["groundingMetadata"],o);const s=a(t,["generationComplete"]);s!=null&&l(e,["generationComplete"],s);const u=a(t,["inputTranscription"]);u!=null&&l(e,["inputTranscription"],rv(u));const c=a(t,["outputTranscription"]);c!=null&&l(e,["outputTranscription"],rv(c));const f=a(t,["turnCompleteReason"]);f!=null&&l(e,["turnCompleteReason"],f);const h=a(t,["waitingForInput"]);return h!=null&&l(e,["waitingForInput"],h),e}function P1(t){const e={},n=a(t,["functionCalls"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>ew(i))),l(e,["functionCalls"],r)}return e}function k1(t){const e={},n=a(t,["ids"]);return n!=null&&l(e,["ids"],n),e}function Rl(t){const e={},n=a(t,["modality"]);n!=null&&l(e,["modality"],n);const r=a(t,["tokenCount"]);return r!=null&&l(e,["tokenCount"],r),e}function N1(t){const e={},n=a(t,["promptTokenCount"]);n!=null&&l(e,["promptTokenCount"],n);const r=a(t,["cachedContentTokenCount"]);r!=null&&l(e,["cachedContentTokenCount"],r);const i=a(t,["candidatesTokenCount"]);i!=null&&l(e,["responseTokenCount"],i);const o=a(t,["toolUsePromptTokenCount"]);o!=null&&l(e,["toolUsePromptTokenCount"],o);const s=a(t,["thoughtsTokenCount"]);s!=null&&l(e,["thoughtsTokenCount"],s);const u=a(t,["totalTokenCount"]);u!=null&&l(e,["totalTokenCount"],u);const c=a(t,["promptTokensDetails"]);if(c!=null){let _=c;Array.isArray(_)&&(_=_.map(I=>Rl(I))),l(e,["promptTokensDetails"],_)}const f=a(t,["cacheTokensDetails"]);if(f!=null){let _=f;Array.isArray(_)&&(_=_.map(I=>Rl(I))),l(e,["cacheTokensDetails"],_)}const h=a(t,["candidatesTokensDetails"]);if(h!=null){let _=h;Array.isArray(_)&&(_=_.map(I=>Rl(I))),l(e,["responseTokensDetails"],_)}const p=a(t,["toolUsePromptTokensDetails"]);if(p!=null){let _=p;Array.isArray(_)&&(_=_.map(I=>Rl(I))),l(e,["toolUsePromptTokensDetails"],_)}const m=a(t,["trafficType"]);return m!=null&&l(e,["trafficType"],m),e}function M1(t){const e={},n=a(t,["timeLeft"]);return n!=null&&l(e,["timeLeft"],n),e}function x1(t){const e={},n=a(t,["newHandle"]);n!=null&&l(e,["newHandle"],n);const r=a(t,["resumable"]);r!=null&&l(e,["resumable"],r);const i=a(t,["lastConsumedClientMessageIndex"]);return i!=null&&l(e,["lastConsumedClientMessageIndex"],i),e}function D1(t){const e={},n=a(t,["setupComplete"]);n!=null&&l(e,["setupComplete"],E1(n));const r=a(t,["serverContent"]);r!=null&&l(e,["serverContent"],R1(r));const i=a(t,["toolCall"]);i!=null&&l(e,["toolCall"],P1(i));const o=a(t,["toolCallCancellation"]);o!=null&&l(e,["toolCallCancellation"],k1(o));const s=a(t,["usageMetadata"]);s!=null&&l(e,["usageMetadata"],N1(s));const u=a(t,["goAway"]);u!=null&&l(e,["goAway"],M1(u));const c=a(t,["sessionResumptionUpdate"]);return c!=null&&l(e,["sessionResumptionUpdate"],x1(c)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function V1(t){const e={},n=a(t,["fps"]);n!=null&&l(e,["fps"],n);const r=a(t,["endOffset"]);r!=null&&l(e,["endOffset"],r);const i=a(t,["startOffset"]);return i!=null&&l(e,["startOffset"],i),e}function L1(t){const e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=a(t,["data"]);n!=null&&l(e,["data"],n);const r=a(t,["mimeType"]);return r!=null&&l(e,["mimeType"],r),e}function U1(t){const e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=a(t,["fileUri"]);n!=null&&l(e,["fileUri"],n);const r=a(t,["mimeType"]);return r!=null&&l(e,["mimeType"],r),e}function F1(t){const e={},n=a(t,["id"]);n!=null&&l(e,["id"],n);const r=a(t,["args"]);r!=null&&l(e,["args"],r);const i=a(t,["name"]);return i!=null&&l(e,["name"],i),e}function b1(t){const e={},n=a(t,["videoMetadata"]);n!=null&&l(e,["videoMetadata"],V1(n));const r=a(t,["thought"]);r!=null&&l(e,["thought"],r);const i=a(t,["inlineData"]);i!=null&&l(e,["inlineData"],L1(i));const o=a(t,["fileData"]);o!=null&&l(e,["fileData"],U1(o));const s=a(t,["thoughtSignature"]);s!=null&&l(e,["thoughtSignature"],s);const u=a(t,["functionCall"]);u!=null&&l(e,["functionCall"],F1(u));const c=a(t,["codeExecutionResult"]);c!=null&&l(e,["codeExecutionResult"],c);const f=a(t,["executableCode"]);f!=null&&l(e,["executableCode"],f);const h=a(t,["functionResponse"]);h!=null&&l(e,["functionResponse"],h);const p=a(t,["text"]);return p!=null&&l(e,["text"],p),e}function _c(t){const e={},n=a(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>b1(o))),l(e,["parts"],i)}const r=a(t,["role"]);return r!=null&&l(e,["role"],r),e}function O1(t){const e={},n=a(t,["anyOf"]);n!=null&&l(e,["anyOf"],n);const r=a(t,["default"]);r!=null&&l(e,["default"],r);const i=a(t,["description"]);i!=null&&l(e,["description"],i);const o=a(t,["enum"]);o!=null&&l(e,["enum"],o);const s=a(t,["example"]);s!=null&&l(e,["example"],s);const u=a(t,["format"]);u!=null&&l(e,["format"],u);const c=a(t,["items"]);c!=null&&l(e,["items"],c);const f=a(t,["maxItems"]);f!=null&&l(e,["maxItems"],f);const h=a(t,["maxLength"]);h!=null&&l(e,["maxLength"],h);const p=a(t,["maxProperties"]);p!=null&&l(e,["maxProperties"],p);const m=a(t,["maximum"]);m!=null&&l(e,["maximum"],m);const _=a(t,["minItems"]);_!=null&&l(e,["minItems"],_);const I=a(t,["minLength"]);I!=null&&l(e,["minLength"],I);const P=a(t,["minProperties"]);P!=null&&l(e,["minProperties"],P);const x=a(t,["minimum"]);x!=null&&l(e,["minimum"],x);const S=a(t,["nullable"]);S!=null&&l(e,["nullable"],S);const C=a(t,["pattern"]);C!=null&&l(e,["pattern"],C);const A=a(t,["properties"]);A!=null&&l(e,["properties"],A);const D=a(t,["propertyOrdering"]);D!=null&&l(e,["propertyOrdering"],D);const F=a(t,["required"]);F!=null&&l(e,["required"],F);const b=a(t,["title"]);b!=null&&l(e,["title"],b);const v=a(t,["type"]);return v!=null&&l(e,["type"],v),e}function B1(t){const e={};if(a(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=a(t,["category"]);n!=null&&l(e,["category"],n);const r=a(t,["threshold"]);return r!=null&&l(e,["threshold"],r),e}function q1(t){const e={},n=a(t,["behavior"]);n!=null&&l(e,["behavior"],n);const r=a(t,["description"]);r!=null&&l(e,["description"],r);const i=a(t,["name"]);i!=null&&l(e,["name"],i);const o=a(t,["parameters"]);o!=null&&l(e,["parameters"],o);const s=a(t,["parametersJsonSchema"]);s!=null&&l(e,["parametersJsonSchema"],s);const u=a(t,["response"]);u!=null&&l(e,["response"],u);const c=a(t,["responseJsonSchema"]);return c!=null&&l(e,["responseJsonSchema"],c),e}function $1(t){const e={},n=a(t,["startTime"]);n!=null&&l(e,["startTime"],n);const r=a(t,["endTime"]);return r!=null&&l(e,["endTime"],r),e}function H1(t){const e={},n=a(t,["timeRangeFilter"]);if(n!=null&&l(e,["timeRangeFilter"],$1(n)),a(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function G1(t){const e={},n=a(t,["mode"]);n!=null&&l(e,["mode"],n);const r=a(t,["dynamicThreshold"]);return r!=null&&l(e,["dynamicThreshold"],r),e}function z1(t){const e={},n=a(t,["dynamicRetrievalConfig"]);return n!=null&&l(e,["dynamicRetrievalConfig"],G1(n)),e}function W1(){return{}}function K1(t){const e={},n=a(t,["environment"]);return n!=null&&l(e,["environment"],n),e}function J1(t){const e={},n=a(t,["functionDeclarations"]);if(n!=null){let c=n;Array.isArray(c)&&(c=c.map(f=>q1(f))),l(e,["functionDeclarations"],c)}if(a(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=a(t,["googleSearch"]);r!=null&&l(e,["googleSearch"],H1(r));const i=a(t,["googleSearchRetrieval"]);if(i!=null&&l(e,["googleSearchRetrieval"],z1(i)),a(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(a(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");a(t,["urlContext"])!=null&&l(e,["urlContext"],W1());const s=a(t,["computerUse"]);s!=null&&l(e,["computerUse"],K1(s));const u=a(t,["codeExecution"]);return u!=null&&l(e,["codeExecution"],u),e}function Y1(t){const e={},n=a(t,["mode"]);n!=null&&l(e,["mode"],n);const r=a(t,["allowedFunctionNames"]);return r!=null&&l(e,["allowedFunctionNames"],r),e}function Q1(t){const e={},n=a(t,["latitude"]);n!=null&&l(e,["latitude"],n);const r=a(t,["longitude"]);return r!=null&&l(e,["longitude"],r),e}function X1(t){const e={},n=a(t,["latLng"]);n!=null&&l(e,["latLng"],Q1(n));const r=a(t,["languageCode"]);return r!=null&&l(e,["languageCode"],r),e}function Z1(t){const e={},n=a(t,["functionCallingConfig"]);n!=null&&l(e,["functionCallingConfig"],Y1(n));const r=a(t,["retrievalConfig"]);return r!=null&&l(e,["retrievalConfig"],X1(r)),e}function j1(t){const e={},n=a(t,["voiceName"]);return n!=null&&l(e,["voiceName"],n),e}function tw(t){const e={},n=a(t,["prebuiltVoiceConfig"]);return n!=null&&l(e,["prebuiltVoiceConfig"],j1(n)),e}function eV(t){const e={},n=a(t,["speaker"]);n!=null&&l(e,["speaker"],n);const r=a(t,["voiceConfig"]);return r!=null&&l(e,["voiceConfig"],tw(r)),e}function tV(t){const e={},n=a(t,["speakerVoiceConfigs"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>eV(i))),l(e,["speakerVoiceConfigs"],r)}return e}function nV(t){const e={},n=a(t,["voiceConfig"]);n!=null&&l(e,["voiceConfig"],tw(n));const r=a(t,["multiSpeakerVoiceConfig"]);r!=null&&l(e,["multiSpeakerVoiceConfig"],tV(r));const i=a(t,["languageCode"]);return i!=null&&l(e,["languageCode"],i),e}function rV(t){const e={},n=a(t,["includeThoughts"]);n!=null&&l(e,["includeThoughts"],n);const r=a(t,["thinkingBudget"]);return r!=null&&l(e,["thinkingBudget"],r),e}function iV(t,e,n){const r={},i=a(e,["systemInstruction"]);n!==void 0&&i!=null&&l(n,["systemInstruction"],_c(yt(i)));const o=a(e,["temperature"]);o!=null&&l(r,["temperature"],o);const s=a(e,["topP"]);s!=null&&l(r,["topP"],s);const u=a(e,["topK"]);u!=null&&l(r,["topK"],u);const c=a(e,["candidateCount"]);c!=null&&l(r,["candidateCount"],c);const f=a(e,["maxOutputTokens"]);f!=null&&l(r,["maxOutputTokens"],f);const h=a(e,["stopSequences"]);h!=null&&l(r,["stopSequences"],h);const p=a(e,["responseLogprobs"]);p!=null&&l(r,["responseLogprobs"],p);const m=a(e,["logprobs"]);m!=null&&l(r,["logprobs"],m);const _=a(e,["presencePenalty"]);_!=null&&l(r,["presencePenalty"],_);const I=a(e,["frequencyPenalty"]);I!=null&&l(r,["frequencyPenalty"],I);const P=a(e,["seed"]);P!=null&&l(r,["seed"],P);const x=a(e,["responseMimeType"]);x!=null&&l(r,["responseMimeType"],x);const S=a(e,["responseSchema"]);S!=null&&l(r,["responseSchema"],O1(Lp(S)));const C=a(e,["responseJsonSchema"]);if(C!=null&&l(r,["responseJsonSchema"],C),a(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(a(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const A=a(e,["safetySettings"]);if(n!==void 0&&A!=null){let k=A;Array.isArray(k)&&(k=k.map(M=>B1(M))),l(n,["safetySettings"],k)}const D=a(e,["tools"]);if(n!==void 0&&D!=null){let k=Ko(D);Array.isArray(k)&&(k=k.map(M=>J1(Wo(M)))),l(n,["tools"],k)}const F=a(e,["toolConfig"]);if(n!==void 0&&F!=null&&l(n,["toolConfig"],Z1(F)),a(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const b=a(e,["cachedContent"]);n!==void 0&&b!=null&&l(n,["cachedContent"],lr(t,b));const v=a(e,["responseModalities"]);v!=null&&l(r,["responseModalities"],v);const T=a(e,["mediaResolution"]);T!=null&&l(r,["mediaResolution"],T);const w=a(e,["speechConfig"]);if(w!=null&&l(r,["speechConfig"],nV(Up(w))),a(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const R=a(e,["thinkingConfig"]);return R!=null&&l(r,["thinkingConfig"],rV(R)),r}function iv(t,e){const n={},r=a(e,["model"]);r!=null&&l(n,["_url","model"],he(t,r));const i=a(e,["contents"]);if(i!=null){let s=nn(i);Array.isArray(s)&&(s=s.map(u=>_c(u))),l(n,["contents"],s)}const o=a(e,["config"]);return o!=null&&l(n,["generationConfig"],iV(t,o,n)),n}function oV(t,e){const n={},r=a(t,["taskType"]);e!==void 0&&r!=null&&l(e,["requests[]","taskType"],r);const i=a(t,["title"]);e!==void 0&&i!=null&&l(e,["requests[]","title"],i);const o=a(t,["outputDimensionality"]);if(e!==void 0&&o!=null&&l(e,["requests[]","outputDimensionality"],o),a(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(a(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function sV(t,e){const n={},r=a(e,["model"]);r!=null&&l(n,["_url","model"],he(t,r));const i=a(e,["contents"]);i!=null&&l(n,["requests[]","content"],Vp(t,i));const o=a(e,["config"]);o!=null&&l(n,["config"],oV(o,n));const s=a(e,["model"]);return s!==void 0&&l(n,["requests[]","model"],he(t,s)),n}function aV(t,e){const n={};if(a(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(a(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=a(t,["numberOfImages"]);e!==void 0&&r!=null&&l(e,["parameters","sampleCount"],r);const i=a(t,["aspectRatio"]);e!==void 0&&i!=null&&l(e,["parameters","aspectRatio"],i);const o=a(t,["guidanceScale"]);if(e!==void 0&&o!=null&&l(e,["parameters","guidanceScale"],o),a(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const s=a(t,["safetyFilterLevel"]);e!==void 0&&s!=null&&l(e,["parameters","safetySetting"],s);const u=a(t,["personGeneration"]);e!==void 0&&u!=null&&l(e,["parameters","personGeneration"],u);const c=a(t,["includeSafetyAttributes"]);e!==void 0&&c!=null&&l(e,["parameters","includeSafetyAttributes"],c);const f=a(t,["includeRaiReason"]);e!==void 0&&f!=null&&l(e,["parameters","includeRaiReason"],f);const h=a(t,["language"]);e!==void 0&&h!=null&&l(e,["parameters","language"],h);const p=a(t,["outputMimeType"]);e!==void 0&&p!=null&&l(e,["parameters","outputOptions","mimeType"],p);const m=a(t,["outputCompressionQuality"]);if(e!==void 0&&m!=null&&l(e,["parameters","outputOptions","compressionQuality"],m),a(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");const _=a(t,["imageSize"]);if(e!==void 0&&_!=null&&l(e,["parameters","sampleImageSize"],_),a(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function lV(t,e){const n={},r=a(e,["model"]);r!=null&&l(n,["_url","model"],he(t,r));const i=a(e,["prompt"]);i!=null&&l(n,["instances[0]","prompt"],i);const o=a(e,["config"]);return o!=null&&l(n,["config"],aV(o,n)),n}function uV(t,e){const n={},r=a(e,["model"]);r!=null&&l(n,["_url","name"],he(t,r));const i=a(e,["config"]);return i!=null&&l(n,["config"],i),n}function cV(t,e,n){const r={},i=a(e,["pageSize"]);n!==void 0&&i!=null&&l(n,["_query","pageSize"],i);const o=a(e,["pageToken"]);n!==void 0&&o!=null&&l(n,["_query","pageToken"],o);const s=a(e,["filter"]);n!==void 0&&s!=null&&l(n,["_query","filter"],s);const u=a(e,["queryBase"]);return n!==void 0&&u!=null&&l(n,["_url","models_url"],OI(t,u)),r}function fV(t,e){const n={},r=a(e,["config"]);return r!=null&&l(n,["config"],cV(t,r,n)),n}function dV(t,e){const n={},r=a(t,["displayName"]);e!==void 0&&r!=null&&l(e,["displayName"],r);const i=a(t,["description"]);e!==void 0&&i!=null&&l(e,["description"],i);const o=a(t,["defaultCheckpointId"]);return e!==void 0&&o!=null&&l(e,["defaultCheckpointId"],o),n}function hV(t,e){const n={},r=a(e,["model"]);r!=null&&l(n,["_url","name"],he(t,r));const i=a(e,["config"]);return i!=null&&l(n,["config"],dV(i,n)),n}function pV(t,e){const n={},r=a(e,["model"]);r!=null&&l(n,["_url","name"],he(t,r));const i=a(e,["config"]);return i!=null&&l(n,["config"],i),n}function mV(t){const e={};if(a(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(a(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(a(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function gV(t,e){const n={},r=a(e,["model"]);r!=null&&l(n,["_url","model"],he(t,r));const i=a(e,["contents"]);if(i!=null){let s=nn(i);Array.isArray(s)&&(s=s.map(u=>_c(u))),l(n,["contents"],s)}const o=a(e,["config"]);return o!=null&&l(n,["config"],mV(o)),n}function nw(t){const e={};if(a(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=a(t,["imageBytes"]);n!=null&&l(e,["bytesBase64Encoded"],bi(n));const r=a(t,["mimeType"]);return r!=null&&l(e,["mimeType"],r),e}function yV(t,e){const n={},r=a(t,["prompt"]);e!==void 0&&r!=null&&l(e,["instances[0]","prompt"],r);const i=a(t,["image"]);if(e!==void 0&&i!=null&&l(e,["instances[0]","image"],nw(i)),a(t,["video"])!==void 0)throw new Error("video parameter is not supported in Gemini API.");return n}function _V(t,e){const n={},r=a(t,["numberOfVideos"]);if(e!==void 0&&r!=null&&l(e,["parameters","sampleCount"],r),a(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(a(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const i=a(t,["durationSeconds"]);if(e!==void 0&&i!=null&&l(e,["parameters","durationSeconds"],i),a(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const o=a(t,["aspectRatio"]);e!==void 0&&o!=null&&l(e,["parameters","aspectRatio"],o);const s=a(t,["resolution"]);e!==void 0&&s!=null&&l(e,["parameters","resolution"],s);const u=a(t,["personGeneration"]);if(e!==void 0&&u!=null&&l(e,["parameters","personGeneration"],u),a(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const c=a(t,["negativePrompt"]);e!==void 0&&c!=null&&l(e,["parameters","negativePrompt"],c);const f=a(t,["enhancePrompt"]);if(e!==void 0&&f!=null&&l(e,["parameters","enhancePrompt"],f),a(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");if(a(t,["lastFrame"])!==void 0)throw new Error("lastFrame parameter is not supported in Gemini API.");if(a(t,["referenceImages"])!==void 0)throw new Error("referenceImages parameter is not supported in Gemini API.");if(a(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(a(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function vV(t,e){const n={},r=a(e,["model"]);r!=null&&l(n,["_url","model"],he(t,r));const i=a(e,["prompt"]);i!=null&&l(n,["instances[0]","prompt"],i);const o=a(e,["image"]);if(o!=null&&l(n,["instances[0]","image"],nw(o)),a(e,["video"])!==void 0)throw new Error("video parameter is not supported in Gemini API.");const s=a(e,["source"]);s!=null&&l(n,["config"],yV(s,n));const u=a(e,["config"]);return u!=null&&l(n,["config"],_V(u,n)),n}function TV(t){const e={},n=a(t,["fps"]);n!=null&&l(e,["fps"],n);const r=a(t,["endOffset"]);r!=null&&l(e,["endOffset"],r);const i=a(t,["startOffset"]);return i!=null&&l(e,["startOffset"],i),e}function EV(t){const e={},n=a(t,["displayName"]);n!=null&&l(e,["displayName"],n);const r=a(t,["data"]);r!=null&&l(e,["data"],r);const i=a(t,["mimeType"]);return i!=null&&l(e,["mimeType"],i),e}function CV(t){const e={},n=a(t,["displayName"]);n!=null&&l(e,["displayName"],n);const r=a(t,["fileUri"]);r!=null&&l(e,["fileUri"],r);const i=a(t,["mimeType"]);return i!=null&&l(e,["mimeType"],i),e}function IV(t){const e={},n=a(t,["id"]);n!=null&&l(e,["id"],n);const r=a(t,["args"]);r!=null&&l(e,["args"],r);const i=a(t,["name"]);return i!=null&&l(e,["name"],i),e}function wV(t){const e={},n=a(t,["videoMetadata"]);n!=null&&l(e,["videoMetadata"],TV(n));const r=a(t,["thought"]);r!=null&&l(e,["thought"],r);const i=a(t,["inlineData"]);i!=null&&l(e,["inlineData"],EV(i));const o=a(t,["fileData"]);o!=null&&l(e,["fileData"],CV(o));const s=a(t,["thoughtSignature"]);s!=null&&l(e,["thoughtSignature"],s);const u=a(t,["functionCall"]);u!=null&&l(e,["functionCall"],IV(u));const c=a(t,["codeExecutionResult"]);c!=null&&l(e,["codeExecutionResult"],c);const f=a(t,["executableCode"]);f!=null&&l(e,["executableCode"],f);const h=a(t,["functionResponse"]);h!=null&&l(e,["functionResponse"],h);const p=a(t,["text"]);return p!=null&&l(e,["text"],p),e}function Yo(t){const e={},n=a(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>wV(o))),l(e,["parts"],i)}const r=a(t,["role"]);return r!=null&&l(e,["role"],r),e}function SV(t){const e={},n=a(t,["anyOf"]);n!=null&&l(e,["anyOf"],n);const r=a(t,["default"]);r!=null&&l(e,["default"],r);const i=a(t,["description"]);i!=null&&l(e,["description"],i);const o=a(t,["enum"]);o!=null&&l(e,["enum"],o);const s=a(t,["example"]);s!=null&&l(e,["example"],s);const u=a(t,["format"]);u!=null&&l(e,["format"],u);const c=a(t,["items"]);c!=null&&l(e,["items"],c);const f=a(t,["maxItems"]);f!=null&&l(e,["maxItems"],f);const h=a(t,["maxLength"]);h!=null&&l(e,["maxLength"],h);const p=a(t,["maxProperties"]);p!=null&&l(e,["maxProperties"],p);const m=a(t,["maximum"]);m!=null&&l(e,["maximum"],m);const _=a(t,["minItems"]);_!=null&&l(e,["minItems"],_);const I=a(t,["minLength"]);I!=null&&l(e,["minLength"],I);const P=a(t,["minProperties"]);P!=null&&l(e,["minProperties"],P);const x=a(t,["minimum"]);x!=null&&l(e,["minimum"],x);const S=a(t,["nullable"]);S!=null&&l(e,["nullable"],S);const C=a(t,["pattern"]);C!=null&&l(e,["pattern"],C);const A=a(t,["properties"]);A!=null&&l(e,["properties"],A);const D=a(t,["propertyOrdering"]);D!=null&&l(e,["propertyOrdering"],D);const F=a(t,["required"]);F!=null&&l(e,["required"],F);const b=a(t,["title"]);b!=null&&l(e,["title"],b);const v=a(t,["type"]);return v!=null&&l(e,["type"],v),e}function AV(t){const e={},n=a(t,["featureSelectionPreference"]);return n!=null&&l(e,["featureSelectionPreference"],n),e}function RV(t){const e={},n=a(t,["method"]);n!=null&&l(e,["method"],n);const r=a(t,["category"]);r!=null&&l(e,["category"],r);const i=a(t,["threshold"]);return i!=null&&l(e,["threshold"],i),e}function PV(t){const e={};if(a(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=a(t,["description"]);n!=null&&l(e,["description"],n);const r=a(t,["name"]);r!=null&&l(e,["name"],r);const i=a(t,["parameters"]);i!=null&&l(e,["parameters"],i);const o=a(t,["parametersJsonSchema"]);o!=null&&l(e,["parametersJsonSchema"],o);const s=a(t,["response"]);s!=null&&l(e,["response"],s);const u=a(t,["responseJsonSchema"]);return u!=null&&l(e,["responseJsonSchema"],u),e}function kV(t){const e={},n=a(t,["startTime"]);n!=null&&l(e,["startTime"],n);const r=a(t,["endTime"]);return r!=null&&l(e,["endTime"],r),e}function NV(t){const e={},n=a(t,["timeRangeFilter"]);n!=null&&l(e,["timeRangeFilter"],kV(n));const r=a(t,["excludeDomains"]);return r!=null&&l(e,["excludeDomains"],r),e}function MV(t){const e={},n=a(t,["mode"]);n!=null&&l(e,["mode"],n);const r=a(t,["dynamicThreshold"]);return r!=null&&l(e,["dynamicThreshold"],r),e}function xV(t){const e={},n=a(t,["dynamicRetrievalConfig"]);return n!=null&&l(e,["dynamicRetrievalConfig"],MV(n)),e}function DV(t){const e={},n=a(t,["excludeDomains"]);return n!=null&&l(e,["excludeDomains"],n),e}function VV(t){const e={},n=a(t,["apiKeyString"]);return n!=null&&l(e,["apiKeyString"],n),e}function LV(t){const e={},n=a(t,["apiKeyConfig"]);n!=null&&l(e,["apiKeyConfig"],VV(n));const r=a(t,["authType"]);r!=null&&l(e,["authType"],r);const i=a(t,["googleServiceAccountConfig"]);i!=null&&l(e,["googleServiceAccountConfig"],i);const o=a(t,["httpBasicAuthConfig"]);o!=null&&l(e,["httpBasicAuthConfig"],o);const s=a(t,["oauthConfig"]);s!=null&&l(e,["oauthConfig"],s);const u=a(t,["oidcConfig"]);return u!=null&&l(e,["oidcConfig"],u),e}function UV(t){const e={},n=a(t,["authConfig"]);return n!=null&&l(e,["authConfig"],LV(n)),e}function FV(){return{}}function bV(t){const e={},n=a(t,["environment"]);return n!=null&&l(e,["environment"],n),e}function rw(t){const e={},n=a(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(m=>PV(m))),l(e,["functionDeclarations"],p)}const r=a(t,["retrieval"]);r!=null&&l(e,["retrieval"],r);const i=a(t,["googleSearch"]);i!=null&&l(e,["googleSearch"],NV(i));const o=a(t,["googleSearchRetrieval"]);o!=null&&l(e,["googleSearchRetrieval"],xV(o));const s=a(t,["enterpriseWebSearch"]);s!=null&&l(e,["enterpriseWebSearch"],DV(s));const u=a(t,["googleMaps"]);u!=null&&l(e,["googleMaps"],UV(u)),a(t,["urlContext"])!=null&&l(e,["urlContext"],FV());const f=a(t,["computerUse"]);f!=null&&l(e,["computerUse"],bV(f));const h=a(t,["codeExecution"]);return h!=null&&l(e,["codeExecution"],h),e}function OV(t){const e={},n=a(t,["mode"]);n!=null&&l(e,["mode"],n);const r=a(t,["allowedFunctionNames"]);return r!=null&&l(e,["allowedFunctionNames"],r),e}function BV(t){const e={},n=a(t,["latitude"]);n!=null&&l(e,["latitude"],n);const r=a(t,["longitude"]);return r!=null&&l(e,["longitude"],r),e}function qV(t){const e={},n=a(t,["latLng"]);n!=null&&l(e,["latLng"],BV(n));const r=a(t,["languageCode"]);return r!=null&&l(e,["languageCode"],r),e}function $V(t){const e={},n=a(t,["functionCallingConfig"]);n!=null&&l(e,["functionCallingConfig"],OV(n));const r=a(t,["retrievalConfig"]);return r!=null&&l(e,["retrievalConfig"],qV(r)),e}function HV(t){const e={},n=a(t,["voiceName"]);return n!=null&&l(e,["voiceName"],n),e}function GV(t){const e={},n=a(t,["prebuiltVoiceConfig"]);return n!=null&&l(e,["prebuiltVoiceConfig"],HV(n)),e}function zV(t){const e={},n=a(t,["voiceConfig"]);if(n!=null&&l(e,["voiceConfig"],GV(n)),a(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const r=a(t,["languageCode"]);return r!=null&&l(e,["languageCode"],r),e}function WV(t){const e={},n=a(t,["includeThoughts"]);n!=null&&l(e,["includeThoughts"],n);const r=a(t,["thinkingBudget"]);return r!=null&&l(e,["thinkingBudget"],r),e}function KV(t,e,n){const r={},i=a(e,["systemInstruction"]);n!==void 0&&i!=null&&l(n,["systemInstruction"],Yo(yt(i)));const o=a(e,["temperature"]);o!=null&&l(r,["temperature"],o);const s=a(e,["topP"]);s!=null&&l(r,["topP"],s);const u=a(e,["topK"]);u!=null&&l(r,["topK"],u);const c=a(e,["candidateCount"]);c!=null&&l(r,["candidateCount"],c);const f=a(e,["maxOutputTokens"]);f!=null&&l(r,["maxOutputTokens"],f);const h=a(e,["stopSequences"]);h!=null&&l(r,["stopSequences"],h);const p=a(e,["responseLogprobs"]);p!=null&&l(r,["responseLogprobs"],p);const m=a(e,["logprobs"]);m!=null&&l(r,["logprobs"],m);const _=a(e,["presencePenalty"]);_!=null&&l(r,["presencePenalty"],_);const I=a(e,["frequencyPenalty"]);I!=null&&l(r,["frequencyPenalty"],I);const P=a(e,["seed"]);P!=null&&l(r,["seed"],P);const x=a(e,["responseMimeType"]);x!=null&&l(r,["responseMimeType"],x);const S=a(e,["responseSchema"]);S!=null&&l(r,["responseSchema"],SV(Lp(S)));const C=a(e,["responseJsonSchema"]);C!=null&&l(r,["responseJsonSchema"],C);const A=a(e,["routingConfig"]);A!=null&&l(r,["routingConfig"],A);const D=a(e,["modelSelectionConfig"]);D!=null&&l(r,["modelConfig"],AV(D));const F=a(e,["safetySettings"]);if(n!==void 0&&F!=null){let ye=F;Array.isArray(ye)&&(ye=ye.map(Ot=>RV(Ot))),l(n,["safetySettings"],ye)}const b=a(e,["tools"]);if(n!==void 0&&b!=null){let ye=Ko(b);Array.isArray(ye)&&(ye=ye.map(Ot=>rw(Wo(Ot)))),l(n,["tools"],ye)}const v=a(e,["toolConfig"]);n!==void 0&&v!=null&&l(n,["toolConfig"],$V(v));const T=a(e,["labels"]);n!==void 0&&T!=null&&l(n,["labels"],T);const w=a(e,["cachedContent"]);n!==void 0&&w!=null&&l(n,["cachedContent"],lr(t,w));const R=a(e,["responseModalities"]);R!=null&&l(r,["responseModalities"],R);const k=a(e,["mediaResolution"]);k!=null&&l(r,["mediaResolution"],k);const M=a(e,["speechConfig"]);M!=null&&l(r,["speechConfig"],zV(Up(M)));const N=a(e,["audioTimestamp"]);N!=null&&l(r,["audioTimestamp"],N);const ve=a(e,["thinkingConfig"]);return ve!=null&&l(r,["thinkingConfig"],WV(ve)),r}function ov(t,e){const n={},r=a(e,["model"]);r!=null&&l(n,["_url","model"],he(t,r));const i=a(e,["contents"]);if(i!=null){let s=nn(i);Array.isArray(s)&&(s=s.map(u=>Yo(u))),l(n,["contents"],s)}const o=a(e,["config"]);return o!=null&&l(n,["generationConfig"],KV(t,o,n)),n}function JV(t,e){const n={},r=a(t,["taskType"]);e!==void 0&&r!=null&&l(e,["instances[]","task_type"],r);const i=a(t,["title"]);e!==void 0&&i!=null&&l(e,["instances[]","title"],i);const o=a(t,["outputDimensionality"]);e!==void 0&&o!=null&&l(e,["parameters","outputDimensionality"],o);const s=a(t,["mimeType"]);e!==void 0&&s!=null&&l(e,["instances[]","mimeType"],s);const u=a(t,["autoTruncate"]);return e!==void 0&&u!=null&&l(e,["parameters","autoTruncate"],u),n}function YV(t,e){const n={},r=a(e,["model"]);r!=null&&l(n,["_url","model"],he(t,r));const i=a(e,["contents"]);i!=null&&l(n,["instances[]","content"],Vp(t,i));const o=a(e,["config"]);return o!=null&&l(n,["config"],JV(o,n)),n}function QV(t,e){const n={},r=a(t,["outputGcsUri"]);e!==void 0&&r!=null&&l(e,["parameters","storageUri"],r);const i=a(t,["negativePrompt"]);e!==void 0&&i!=null&&l(e,["parameters","negativePrompt"],i);const o=a(t,["numberOfImages"]);e!==void 0&&o!=null&&l(e,["parameters","sampleCount"],o);const s=a(t,["aspectRatio"]);e!==void 0&&s!=null&&l(e,["parameters","aspectRatio"],s);const u=a(t,["guidanceScale"]);e!==void 0&&u!=null&&l(e,["parameters","guidanceScale"],u);const c=a(t,["seed"]);e!==void 0&&c!=null&&l(e,["parameters","seed"],c);const f=a(t,["safetyFilterLevel"]);e!==void 0&&f!=null&&l(e,["parameters","safetySetting"],f);const h=a(t,["personGeneration"]);e!==void 0&&h!=null&&l(e,["parameters","personGeneration"],h);const p=a(t,["includeSafetyAttributes"]);e!==void 0&&p!=null&&l(e,["parameters","includeSafetyAttributes"],p);const m=a(t,["includeRaiReason"]);e!==void 0&&m!=null&&l(e,["parameters","includeRaiReason"],m);const _=a(t,["language"]);e!==void 0&&_!=null&&l(e,["parameters","language"],_);const I=a(t,["outputMimeType"]);e!==void 0&&I!=null&&l(e,["parameters","outputOptions","mimeType"],I);const P=a(t,["outputCompressionQuality"]);e!==void 0&&P!=null&&l(e,["parameters","outputOptions","compressionQuality"],P);const x=a(t,["addWatermark"]);e!==void 0&&x!=null&&l(e,["parameters","addWatermark"],x);const S=a(t,["imageSize"]);e!==void 0&&S!=null&&l(e,["parameters","sampleImageSize"],S);const C=a(t,["enhancePrompt"]);return e!==void 0&&C!=null&&l(e,["parameters","enhancePrompt"],C),n}function XV(t,e){const n={},r=a(e,["model"]);r!=null&&l(n,["_url","model"],he(t,r));const i=a(e,["prompt"]);i!=null&&l(n,["instances[0]","prompt"],i);const o=a(e,["config"]);return o!=null&&l(n,["config"],QV(o,n)),n}function En(t){const e={},n=a(t,["gcsUri"]);n!=null&&l(e,["gcsUri"],n);const r=a(t,["imageBytes"]);r!=null&&l(e,["bytesBase64Encoded"],bi(r));const i=a(t,["mimeType"]);return i!=null&&l(e,["mimeType"],i),e}function ZV(t){const e={},n=a(t,["maskMode"]);n!=null&&l(e,["maskMode"],n);const r=a(t,["segmentationClasses"]);r!=null&&l(e,["maskClasses"],r);const i=a(t,["maskDilation"]);return i!=null&&l(e,["dilation"],i),e}function jV(t){const e={},n=a(t,["controlType"]);n!=null&&l(e,["controlType"],n);const r=a(t,["enableControlImageComputation"]);return r!=null&&l(e,["computeControl"],r),e}function eL(t){const e={},n=a(t,["styleDescription"]);return n!=null&&l(e,["styleDescription"],n),e}function tL(t){const e={},n=a(t,["subjectType"]);n!=null&&l(e,["subjectType"],n);const r=a(t,["subjectDescription"]);return r!=null&&l(e,["subjectDescription"],r),e}function nL(t){const e={},n=a(t,["referenceImage"]);n!=null&&l(e,["referenceImage"],En(n));const r=a(t,["referenceId"]);r!=null&&l(e,["referenceId"],r);const i=a(t,["referenceType"]);i!=null&&l(e,["referenceType"],i);const o=a(t,["maskImageConfig"]);o!=null&&l(e,["maskImageConfig"],ZV(o));const s=a(t,["controlImageConfig"]);s!=null&&l(e,["controlImageConfig"],jV(s));const u=a(t,["styleImageConfig"]);u!=null&&l(e,["styleImageConfig"],eL(u));const c=a(t,["subjectImageConfig"]);return c!=null&&l(e,["subjectImageConfig"],tL(c)),e}function rL(t,e){const n={},r=a(t,["outputGcsUri"]);e!==void 0&&r!=null&&l(e,["parameters","storageUri"],r);const i=a(t,["negativePrompt"]);e!==void 0&&i!=null&&l(e,["parameters","negativePrompt"],i);const o=a(t,["numberOfImages"]);e!==void 0&&o!=null&&l(e,["parameters","sampleCount"],o);const s=a(t,["aspectRatio"]);e!==void 0&&s!=null&&l(e,["parameters","aspectRatio"],s);const u=a(t,["guidanceScale"]);e!==void 0&&u!=null&&l(e,["parameters","guidanceScale"],u);const c=a(t,["seed"]);e!==void 0&&c!=null&&l(e,["parameters","seed"],c);const f=a(t,["safetyFilterLevel"]);e!==void 0&&f!=null&&l(e,["parameters","safetySetting"],f);const h=a(t,["personGeneration"]);e!==void 0&&h!=null&&l(e,["parameters","personGeneration"],h);const p=a(t,["includeSafetyAttributes"]);e!==void 0&&p!=null&&l(e,["parameters","includeSafetyAttributes"],p);const m=a(t,["includeRaiReason"]);e!==void 0&&m!=null&&l(e,["parameters","includeRaiReason"],m);const _=a(t,["language"]);e!==void 0&&_!=null&&l(e,["parameters","language"],_);const I=a(t,["outputMimeType"]);e!==void 0&&I!=null&&l(e,["parameters","outputOptions","mimeType"],I);const P=a(t,["outputCompressionQuality"]);e!==void 0&&P!=null&&l(e,["parameters","outputOptions","compressionQuality"],P);const x=a(t,["addWatermark"]);e!==void 0&&x!=null&&l(e,["parameters","addWatermark"],x);const S=a(t,["editMode"]);e!==void 0&&S!=null&&l(e,["parameters","editMode"],S);const C=a(t,["baseSteps"]);return e!==void 0&&C!=null&&l(e,["parameters","editConfig","baseSteps"],C),n}function iL(t,e){const n={},r=a(e,["model"]);r!=null&&l(n,["_url","model"],he(t,r));const i=a(e,["prompt"]);i!=null&&l(n,["instances[0]","prompt"],i);const o=a(e,["referenceImages"]);if(o!=null){let u=o;Array.isArray(u)&&(u=u.map(c=>nL(c))),l(n,["instances[0]","referenceImages"],u)}const s=a(e,["config"]);return s!=null&&l(n,["config"],rL(s,n)),n}function oL(t,e){const n={},r=a(t,["outputGcsUri"]);e!==void 0&&r!=null&&l(e,["parameters","storageUri"],r);const i=a(t,["includeRaiReason"]);e!==void 0&&i!=null&&l(e,["parameters","includeRaiReason"],i);const o=a(t,["outputMimeType"]);e!==void 0&&o!=null&&l(e,["parameters","outputOptions","mimeType"],o);const s=a(t,["outputCompressionQuality"]);e!==void 0&&s!=null&&l(e,["parameters","outputOptions","compressionQuality"],s);const u=a(t,["enhanceInputImage"]);e!==void 0&&u!=null&&l(e,["parameters","upscaleConfig","enhanceInputImage"],u);const c=a(t,["imagePreservationFactor"]);e!==void 0&&c!=null&&l(e,["parameters","upscaleConfig","imagePreservationFactor"],c);const f=a(t,["numberOfImages"]);e!==void 0&&f!=null&&l(e,["parameters","sampleCount"],f);const h=a(t,["mode"]);return e!==void 0&&h!=null&&l(e,["parameters","mode"],h),n}function sL(t,e){const n={},r=a(e,["model"]);r!=null&&l(n,["_url","model"],he(t,r));const i=a(e,["image"]);i!=null&&l(n,["instances[0]","image"],En(i));const o=a(e,["upscaleFactor"]);o!=null&&l(n,["parameters","upscaleConfig","upscaleFactor"],o);const s=a(e,["config"]);return s!=null&&l(n,["config"],oL(s,n)),n}function aL(t){const e={},n=a(t,["productImage"]);return n!=null&&l(e,["image"],En(n)),e}function lL(t,e){const n={},r=a(t,["prompt"]);e!==void 0&&r!=null&&l(e,["instances[0]","prompt"],r);const i=a(t,["personImage"]);e!==void 0&&i!=null&&l(e,["instances[0]","personImage","image"],En(i));const o=a(t,["productImages"]);if(e!==void 0&&o!=null){let s=o;Array.isArray(s)&&(s=s.map(u=>aL(u))),l(e,["instances[0]","productImages"],s)}return n}function uL(t,e){const n={},r=a(t,["numberOfImages"]);e!==void 0&&r!=null&&l(e,["parameters","sampleCount"],r);const i=a(t,["baseSteps"]);e!==void 0&&i!=null&&l(e,["parameters","editConfig","baseSteps"],i);const o=a(t,["outputGcsUri"]);e!==void 0&&o!=null&&l(e,["parameters","storageUri"],o);const s=a(t,["seed"]);e!==void 0&&s!=null&&l(e,["parameters","seed"],s);const u=a(t,["safetyFilterLevel"]);e!==void 0&&u!=null&&l(e,["parameters","safetySetting"],u);const c=a(t,["personGeneration"]);e!==void 0&&c!=null&&l(e,["parameters","personGeneration"],c);const f=a(t,["addWatermark"]);e!==void 0&&f!=null&&l(e,["parameters","addWatermark"],f);const h=a(t,["outputMimeType"]);e!==void 0&&h!=null&&l(e,["parameters","outputOptions","mimeType"],h);const p=a(t,["outputCompressionQuality"]);e!==void 0&&p!=null&&l(e,["parameters","outputOptions","compressionQuality"],p);const m=a(t,["enhancePrompt"]);return e!==void 0&&m!=null&&l(e,["parameters","enhancePrompt"],m),n}function cL(t,e){const n={},r=a(e,["model"]);r!=null&&l(n,["_url","model"],he(t,r));const i=a(e,["source"]);i!=null&&l(n,["config"],lL(i,n));const o=a(e,["config"]);return o!=null&&l(n,["config"],uL(o,n)),n}function fL(t){const e={},n=a(t,["image"]);return n!=null&&l(e,["image"],En(n)),e}function dL(t,e){const n={},r=a(t,["prompt"]);e!==void 0&&r!=null&&l(e,["instances[0]","prompt"],r);const i=a(t,["image"]);e!==void 0&&i!=null&&l(e,["instances[0]","image"],En(i));const o=a(t,["scribbleImage"]);return e!==void 0&&o!=null&&l(e,["instances[0]","scribble"],fL(o)),n}function hL(t,e){const n={},r=a(t,["mode"]);e!==void 0&&r!=null&&l(e,["parameters","mode"],r);const i=a(t,["maxPredictions"]);e!==void 0&&i!=null&&l(e,["parameters","maxPredictions"],i);const o=a(t,["confidenceThreshold"]);e!==void 0&&o!=null&&l(e,["parameters","confidenceThreshold"],o);const s=a(t,["maskDilation"]);e!==void 0&&s!=null&&l(e,["parameters","maskDilation"],s);const u=a(t,["binaryColorThreshold"]);return e!==void 0&&u!=null&&l(e,["parameters","binaryColorThreshold"],u),n}function pL(t,e){const n={},r=a(e,["model"]);r!=null&&l(n,["_url","model"],he(t,r));const i=a(e,["source"]);i!=null&&l(n,["config"],dL(i,n));const o=a(e,["config"]);return o!=null&&l(n,["config"],hL(o,n)),n}function mL(t,e){const n={},r=a(e,["model"]);r!=null&&l(n,["_url","name"],he(t,r));const i=a(e,["config"]);return i!=null&&l(n,["config"],i),n}function gL(t,e,n){const r={},i=a(e,["pageSize"]);n!==void 0&&i!=null&&l(n,["_query","pageSize"],i);const o=a(e,["pageToken"]);n!==void 0&&o!=null&&l(n,["_query","pageToken"],o);const s=a(e,["filter"]);n!==void 0&&s!=null&&l(n,["_query","filter"],s);const u=a(e,["queryBase"]);return n!==void 0&&u!=null&&l(n,["_url","models_url"],OI(t,u)),r}function yL(t,e){const n={},r=a(e,["config"]);return r!=null&&l(n,["config"],gL(t,r,n)),n}function _L(t,e){const n={},r=a(t,["displayName"]);e!==void 0&&r!=null&&l(e,["displayName"],r);const i=a(t,["description"]);e!==void 0&&i!=null&&l(e,["description"],i);const o=a(t,["defaultCheckpointId"]);return e!==void 0&&o!=null&&l(e,["defaultCheckpointId"],o),n}function vL(t,e){const n={},r=a(e,["model"]);r!=null&&l(n,["_url","model"],he(t,r));const i=a(e,["config"]);return i!=null&&l(n,["config"],_L(i,n)),n}function TL(t,e){const n={},r=a(e,["model"]);r!=null&&l(n,["_url","name"],he(t,r));const i=a(e,["config"]);return i!=null&&l(n,["config"],i),n}function EL(t,e){const n={},r=a(t,["systemInstruction"]);e!==void 0&&r!=null&&l(e,["systemInstruction"],Yo(yt(r)));const i=a(t,["tools"]);if(e!==void 0&&i!=null){let s=i;Array.isArray(s)&&(s=s.map(u=>rw(u))),l(e,["tools"],s)}const o=a(t,["generationConfig"]);return e!==void 0&&o!=null&&l(e,["generationConfig"],o),n}function CL(t,e){const n={},r=a(e,["model"]);r!=null&&l(n,["_url","model"],he(t,r));const i=a(e,["contents"]);if(i!=null){let s=nn(i);Array.isArray(s)&&(s=s.map(u=>Yo(u))),l(n,["contents"],s)}const o=a(e,["config"]);return o!=null&&l(n,["config"],EL(o,n)),n}function IL(t,e){const n={},r=a(e,["model"]);r!=null&&l(n,["_url","model"],he(t,r));const i=a(e,["contents"]);if(i!=null){let s=nn(i);Array.isArray(s)&&(s=s.map(u=>Yo(u))),l(n,["contents"],s)}const o=a(e,["config"]);return o!=null&&l(n,["config"],o),n}function iw(t){const e={},n=a(t,["uri"]);n!=null&&l(e,["gcsUri"],n);const r=a(t,["videoBytes"]);r!=null&&l(e,["bytesBase64Encoded"],bi(r));const i=a(t,["mimeType"]);return i!=null&&l(e,["mimeType"],i),e}function wL(t,e){const n={},r=a(t,["prompt"]);e!==void 0&&r!=null&&l(e,["instances[0]","prompt"],r);const i=a(t,["image"]);e!==void 0&&i!=null&&l(e,["instances[0]","image"],En(i));const o=a(t,["video"]);return e!==void 0&&o!=null&&l(e,["instances[0]","video"],iw(o)),n}function SL(t){const e={},n=a(t,["image"]);n!=null&&l(e,["image"],En(n));const r=a(t,["referenceType"]);return r!=null&&l(e,["referenceType"],r),e}function AL(t){const e={},n=a(t,["image"]);n!=null&&l(e,["_self"],En(n));const r=a(t,["maskMode"]);return r!=null&&l(e,["maskMode"],r),e}function RL(t,e){const n={},r=a(t,["numberOfVideos"]);e!==void 0&&r!=null&&l(e,["parameters","sampleCount"],r);const i=a(t,["outputGcsUri"]);e!==void 0&&i!=null&&l(e,["parameters","storageUri"],i);const o=a(t,["fps"]);e!==void 0&&o!=null&&l(e,["parameters","fps"],o);const s=a(t,["durationSeconds"]);e!==void 0&&s!=null&&l(e,["parameters","durationSeconds"],s);const u=a(t,["seed"]);e!==void 0&&u!=null&&l(e,["parameters","seed"],u);const c=a(t,["aspectRatio"]);e!==void 0&&c!=null&&l(e,["parameters","aspectRatio"],c);const f=a(t,["resolution"]);e!==void 0&&f!=null&&l(e,["parameters","resolution"],f);const h=a(t,["personGeneration"]);e!==void 0&&h!=null&&l(e,["parameters","personGeneration"],h);const p=a(t,["pubsubTopic"]);e!==void 0&&p!=null&&l(e,["parameters","pubsubTopic"],p);const m=a(t,["negativePrompt"]);e!==void 0&&m!=null&&l(e,["parameters","negativePrompt"],m);const _=a(t,["enhancePrompt"]);e!==void 0&&_!=null&&l(e,["parameters","enhancePrompt"],_);const I=a(t,["generateAudio"]);e!==void 0&&I!=null&&l(e,["parameters","generateAudio"],I);const P=a(t,["lastFrame"]);e!==void 0&&P!=null&&l(e,["instances[0]","lastFrame"],En(P));const x=a(t,["referenceImages"]);if(e!==void 0&&x!=null){let A=x;Array.isArray(A)&&(A=A.map(D=>SL(D))),l(e,["instances[0]","referenceImages"],A)}const S=a(t,["mask"]);e!==void 0&&S!=null&&l(e,["instances[0]","mask"],AL(S));const C=a(t,["compressionQuality"]);return e!==void 0&&C!=null&&l(e,["parameters","compressionQuality"],C),n}function PL(t,e){const n={},r=a(e,["model"]);r!=null&&l(n,["_url","model"],he(t,r));const i=a(e,["prompt"]);i!=null&&l(n,["instances[0]","prompt"],i);const o=a(e,["image"]);o!=null&&l(n,["instances[0]","image"],En(o));const s=a(e,["video"]);s!=null&&l(n,["instances[0]","video"],iw(s));const u=a(e,["source"]);u!=null&&l(n,["config"],wL(u,n));const c=a(e,["config"]);return c!=null&&l(n,["config"],RL(c,n)),n}function kL(t){const e={},n=a(t,["fps"]);n!=null&&l(e,["fps"],n);const r=a(t,["endOffset"]);r!=null&&l(e,["endOffset"],r);const i=a(t,["startOffset"]);return i!=null&&l(e,["startOffset"],i),e}function NL(t){const e={},n=a(t,["data"]);n!=null&&l(e,["data"],n);const r=a(t,["mimeType"]);return r!=null&&l(e,["mimeType"],r),e}function ML(t){const e={},n=a(t,["fileUri"]);n!=null&&l(e,["fileUri"],n);const r=a(t,["mimeType"]);return r!=null&&l(e,["mimeType"],r),e}function xL(t){const e={},n=a(t,["id"]);n!=null&&l(e,["id"],n);const r=a(t,["args"]);r!=null&&l(e,["args"],r);const i=a(t,["name"]);return i!=null&&l(e,["name"],i),e}function DL(t){const e={},n=a(t,["videoMetadata"]);n!=null&&l(e,["videoMetadata"],kL(n));const r=a(t,["thought"]);r!=null&&l(e,["thought"],r);const i=a(t,["inlineData"]);i!=null&&l(e,["inlineData"],NL(i));const o=a(t,["fileData"]);o!=null&&l(e,["fileData"],ML(o));const s=a(t,["thoughtSignature"]);s!=null&&l(e,["thoughtSignature"],s);const u=a(t,["functionCall"]);u!=null&&l(e,["functionCall"],xL(u));const c=a(t,["codeExecutionResult"]);c!=null&&l(e,["codeExecutionResult"],c);const f=a(t,["executableCode"]);f!=null&&l(e,["executableCode"],f);const h=a(t,["functionResponse"]);h!=null&&l(e,["functionResponse"],h);const p=a(t,["text"]);return p!=null&&l(e,["text"],p),e}function VL(t){const e={},n=a(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>DL(o))),l(e,["parts"],i)}const r=a(t,["role"]);return r!=null&&l(e,["role"],r),e}function LL(t){const e={},n=a(t,["citationSources"]);return n!=null&&l(e,["citations"],n),e}function UL(t){const e={},n=a(t,["retrievedUrl"]);n!=null&&l(e,["retrievedUrl"],n);const r=a(t,["urlRetrievalStatus"]);return r!=null&&l(e,["urlRetrievalStatus"],r),e}function FL(t){const e={},n=a(t,["urlMetadata"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>UL(i))),l(e,["urlMetadata"],r)}return e}function bL(t){const e={},n=a(t,["content"]);n!=null&&l(e,["content"],VL(n));const r=a(t,["citationMetadata"]);r!=null&&l(e,["citationMetadata"],LL(r));const i=a(t,["tokenCount"]);i!=null&&l(e,["tokenCount"],i);const o=a(t,["finishReason"]);o!=null&&l(e,["finishReason"],o);const s=a(t,["urlContextMetadata"]);s!=null&&l(e,["urlContextMetadata"],FL(s));const u=a(t,["avgLogprobs"]);u!=null&&l(e,["avgLogprobs"],u);const c=a(t,["groundingMetadata"]);c!=null&&l(e,["groundingMetadata"],c);const f=a(t,["index"]);f!=null&&l(e,["index"],f);const h=a(t,["logprobsResult"]);h!=null&&l(e,["logprobsResult"],h);const p=a(t,["safetyRatings"]);return p!=null&&l(e,["safetyRatings"],p),e}function sv(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const r=a(t,["candidates"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(f=>bL(f))),l(e,["candidates"],c)}const i=a(t,["modelVersion"]);i!=null&&l(e,["modelVersion"],i);const o=a(t,["promptFeedback"]);o!=null&&l(e,["promptFeedback"],o);const s=a(t,["responseId"]);s!=null&&l(e,["responseId"],s);const u=a(t,["usageMetadata"]);return u!=null&&l(e,["usageMetadata"],u),e}function OL(t){const e={},n=a(t,["values"]);return n!=null&&l(e,["values"],n),e}function BL(){return{}}function qL(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const r=a(t,["embeddings"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>OL(s))),l(e,["embeddings"],o)}return a(t,["metadata"])!=null&&l(e,["metadata"],BL()),e}function $L(t){const e={},n=a(t,["bytesBase64Encoded"]);n!=null&&l(e,["imageBytes"],bi(n));const r=a(t,["mimeType"]);return r!=null&&l(e,["mimeType"],r),e}function ow(t){const e={},n=a(t,["safetyAttributes","categories"]);n!=null&&l(e,["categories"],n);const r=a(t,["safetyAttributes","scores"]);r!=null&&l(e,["scores"],r);const i=a(t,["contentType"]);return i!=null&&l(e,["contentType"],i),e}function HL(t){const e={},n=a(t,["_self"]);n!=null&&l(e,["image"],$L(n));const r=a(t,["raiFilteredReason"]);r!=null&&l(e,["raiFilteredReason"],r);const i=a(t,["_self"]);return i!=null&&l(e,["safetyAttributes"],ow(i)),e}function GL(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const r=a(t,["predictions"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>HL(s))),l(e,["generatedImages"],o)}const i=a(t,["positivePromptSafetyAttributes"]);return i!=null&&l(e,["positivePromptSafetyAttributes"],ow(i)),e}function zL(t){const e={},n=a(t,["baseModel"]);n!=null&&l(e,["baseModel"],n);const r=a(t,["createTime"]);r!=null&&l(e,["createTime"],r);const i=a(t,["updateTime"]);return i!=null&&l(e,["updateTime"],i),e}function sh(t){const e={},n=a(t,["name"]);n!=null&&l(e,["name"],n);const r=a(t,["displayName"]);r!=null&&l(e,["displayName"],r);const i=a(t,["description"]);i!=null&&l(e,["description"],i);const o=a(t,["version"]);o!=null&&l(e,["version"],o);const s=a(t,["_self"]);s!=null&&l(e,["tunedModelInfo"],zL(s));const u=a(t,["inputTokenLimit"]);u!=null&&l(e,["inputTokenLimit"],u);const c=a(t,["outputTokenLimit"]);c!=null&&l(e,["outputTokenLimit"],c);const f=a(t,["supportedGenerationMethods"]);return f!=null&&l(e,["supportedActions"],f),e}function WL(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const r=a(t,["nextPageToken"]);r!=null&&l(e,["nextPageToken"],r);const i=a(t,["_self"]);if(i!=null){let o=BI(i);Array.isArray(o)&&(o=o.map(s=>sh(s))),l(e,["models"],o)}return e}function KL(t){const e={},n=a(t,["sdkHttpResponse"]);return n!=null&&l(e,["sdkHttpResponse"],n),e}function JL(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const r=a(t,["totalTokens"]);r!=null&&l(e,["totalTokens"],r);const i=a(t,["cachedContentTokenCount"]);return i!=null&&l(e,["cachedContentTokenCount"],i),e}function YL(t){const e={},n=a(t,["video","uri"]);n!=null&&l(e,["uri"],n);const r=a(t,["video","encodedVideo"]);r!=null&&l(e,["videoBytes"],bi(r));const i=a(t,["encoding"]);return i!=null&&l(e,["mimeType"],i),e}function QL(t){const e={},n=a(t,["_self"]);return n!=null&&l(e,["video"],YL(n)),e}function XL(t){const e={},n=a(t,["generatedSamples"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>QL(s))),l(e,["generatedVideos"],o)}const r=a(t,["raiMediaFilteredCount"]);r!=null&&l(e,["raiMediaFilteredCount"],r);const i=a(t,["raiMediaFilteredReasons"]);return i!=null&&l(e,["raiMediaFilteredReasons"],i),e}function ZL(t){const e={},n=a(t,["name"]);n!=null&&l(e,["name"],n);const r=a(t,["metadata"]);r!=null&&l(e,["metadata"],r);const i=a(t,["done"]);i!=null&&l(e,["done"],i);const o=a(t,["error"]);o!=null&&l(e,["error"],o);const s=a(t,["response","generateVideoResponse"]);return s!=null&&l(e,["response"],XL(s)),e}function jL(t){const e={},n=a(t,["fps"]);n!=null&&l(e,["fps"],n);const r=a(t,["endOffset"]);r!=null&&l(e,["endOffset"],r);const i=a(t,["startOffset"]);return i!=null&&l(e,["startOffset"],i),e}function eU(t){const e={},n=a(t,["displayName"]);n!=null&&l(e,["displayName"],n);const r=a(t,["data"]);r!=null&&l(e,["data"],r);const i=a(t,["mimeType"]);return i!=null&&l(e,["mimeType"],i),e}function tU(t){const e={},n=a(t,["displayName"]);n!=null&&l(e,["displayName"],n);const r=a(t,["fileUri"]);r!=null&&l(e,["fileUri"],r);const i=a(t,["mimeType"]);return i!=null&&l(e,["mimeType"],i),e}function nU(t){const e={},n=a(t,["id"]);n!=null&&l(e,["id"],n);const r=a(t,["args"]);r!=null&&l(e,["args"],r);const i=a(t,["name"]);return i!=null&&l(e,["name"],i),e}function rU(t){const e={},n=a(t,["videoMetadata"]);n!=null&&l(e,["videoMetadata"],jL(n));const r=a(t,["thought"]);r!=null&&l(e,["thought"],r);const i=a(t,["inlineData"]);i!=null&&l(e,["inlineData"],eU(i));const o=a(t,["fileData"]);o!=null&&l(e,["fileData"],tU(o));const s=a(t,["thoughtSignature"]);s!=null&&l(e,["thoughtSignature"],s);const u=a(t,["functionCall"]);u!=null&&l(e,["functionCall"],nU(u));const c=a(t,["codeExecutionResult"]);c!=null&&l(e,["codeExecutionResult"],c);const f=a(t,["executableCode"]);f!=null&&l(e,["executableCode"],f);const h=a(t,["functionResponse"]);h!=null&&l(e,["functionResponse"],h);const p=a(t,["text"]);return p!=null&&l(e,["text"],p),e}function iU(t){const e={},n=a(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>rU(o))),l(e,["parts"],i)}const r=a(t,["role"]);return r!=null&&l(e,["role"],r),e}function oU(t){const e={},n=a(t,["citations"]);return n!=null&&l(e,["citations"],n),e}function sU(t){const e={},n=a(t,["retrievedUrl"]);n!=null&&l(e,["retrievedUrl"],n);const r=a(t,["urlRetrievalStatus"]);return r!=null&&l(e,["urlRetrievalStatus"],r),e}function aU(t){const e={},n=a(t,["urlMetadata"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>sU(i))),l(e,["urlMetadata"],r)}return e}function lU(t){const e={},n=a(t,["content"]);n!=null&&l(e,["content"],iU(n));const r=a(t,["citationMetadata"]);r!=null&&l(e,["citationMetadata"],oU(r));const i=a(t,["finishMessage"]);i!=null&&l(e,["finishMessage"],i);const o=a(t,["finishReason"]);o!=null&&l(e,["finishReason"],o);const s=a(t,["urlContextMetadata"]);s!=null&&l(e,["urlContextMetadata"],aU(s));const u=a(t,["avgLogprobs"]);u!=null&&l(e,["avgLogprobs"],u);const c=a(t,["groundingMetadata"]);c!=null&&l(e,["groundingMetadata"],c);const f=a(t,["index"]);f!=null&&l(e,["index"],f);const h=a(t,["logprobsResult"]);h!=null&&l(e,["logprobsResult"],h);const p=a(t,["safetyRatings"]);return p!=null&&l(e,["safetyRatings"],p),e}function av(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const r=a(t,["candidates"]);if(r!=null){let f=r;Array.isArray(f)&&(f=f.map(h=>lU(h))),l(e,["candidates"],f)}const i=a(t,["createTime"]);i!=null&&l(e,["createTime"],i);const o=a(t,["modelVersion"]);o!=null&&l(e,["modelVersion"],o);const s=a(t,["promptFeedback"]);s!=null&&l(e,["promptFeedback"],s);const u=a(t,["responseId"]);u!=null&&l(e,["responseId"],u);const c=a(t,["usageMetadata"]);return c!=null&&l(e,["usageMetadata"],c),e}function uU(t){const e={},n=a(t,["truncated"]);n!=null&&l(e,["truncated"],n);const r=a(t,["token_count"]);return r!=null&&l(e,["tokenCount"],r),e}function cU(t){const e={},n=a(t,["values"]);n!=null&&l(e,["values"],n);const r=a(t,["statistics"]);return r!=null&&l(e,["statistics"],uU(r)),e}function fU(t){const e={},n=a(t,["billableCharacterCount"]);return n!=null&&l(e,["billableCharacterCount"],n),e}function dU(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const r=a(t,["predictions[]","embeddings"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>cU(s))),l(e,["embeddings"],o)}const i=a(t,["metadata"]);return i!=null&&l(e,["metadata"],fU(i)),e}function sw(t){const e={},n=a(t,["gcsUri"]);n!=null&&l(e,["gcsUri"],n);const r=a(t,["bytesBase64Encoded"]);r!=null&&l(e,["imageBytes"],bi(r));const i=a(t,["mimeType"]);return i!=null&&l(e,["mimeType"],i),e}function aw(t){const e={},n=a(t,["safetyAttributes","categories"]);n!=null&&l(e,["categories"],n);const r=a(t,["safetyAttributes","scores"]);r!=null&&l(e,["scores"],r);const i=a(t,["contentType"]);return i!=null&&l(e,["contentType"],i),e}function vc(t){const e={},n=a(t,["_self"]);n!=null&&l(e,["image"],sw(n));const r=a(t,["raiFilteredReason"]);r!=null&&l(e,["raiFilteredReason"],r);const i=a(t,["_self"]);i!=null&&l(e,["safetyAttributes"],aw(i));const o=a(t,["prompt"]);return o!=null&&l(e,["enhancedPrompt"],o),e}function hU(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const r=a(t,["predictions"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>vc(s))),l(e,["generatedImages"],o)}const i=a(t,["positivePromptSafetyAttributes"]);return i!=null&&l(e,["positivePromptSafetyAttributes"],aw(i)),e}function pU(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const r=a(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>vc(o))),l(e,["generatedImages"],i)}return e}function mU(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const r=a(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>vc(o))),l(e,["generatedImages"],i)}return e}function gU(t){const e={},n=a(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>vc(i))),l(e,["generatedImages"],r)}return e}function yU(t){const e={},n=a(t,["label"]);n!=null&&l(e,["label"],n);const r=a(t,["score"]);return r!=null&&l(e,["score"],r),e}function _U(t){const e={},n=a(t,["_self"]);n!=null&&l(e,["mask"],sw(n));const r=a(t,["labels"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>yU(o))),l(e,["labels"],i)}return e}function vU(t){const e={},n=a(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>_U(i))),l(e,["generatedMasks"],r)}return e}function TU(t){const e={},n=a(t,["endpoint"]);n!=null&&l(e,["name"],n);const r=a(t,["deployedModelId"]);return r!=null&&l(e,["deployedModelId"],r),e}function EU(t){const e={},n=a(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&l(e,["baseModel"],n);const r=a(t,["createTime"]);r!=null&&l(e,["createTime"],r);const i=a(t,["updateTime"]);return i!=null&&l(e,["updateTime"],i),e}function CU(t){const e={},n=a(t,["checkpointId"]);n!=null&&l(e,["checkpointId"],n);const r=a(t,["epoch"]);r!=null&&l(e,["epoch"],r);const i=a(t,["step"]);return i!=null&&l(e,["step"],i),e}function ah(t){const e={},n=a(t,["name"]);n!=null&&l(e,["name"],n);const r=a(t,["displayName"]);r!=null&&l(e,["displayName"],r);const i=a(t,["description"]);i!=null&&l(e,["description"],i);const o=a(t,["versionId"]);o!=null&&l(e,["version"],o);const s=a(t,["deployedModels"]);if(s!=null){let p=s;Array.isArray(p)&&(p=p.map(m=>TU(m))),l(e,["endpoints"],p)}const u=a(t,["labels"]);u!=null&&l(e,["labels"],u);const c=a(t,["_self"]);c!=null&&l(e,["tunedModelInfo"],EU(c));const f=a(t,["defaultCheckpointId"]);f!=null&&l(e,["defaultCheckpointId"],f);const h=a(t,["checkpoints"]);if(h!=null){let p=h;Array.isArray(p)&&(p=p.map(m=>CU(m))),l(e,["checkpoints"],p)}return e}function IU(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const r=a(t,["nextPageToken"]);r!=null&&l(e,["nextPageToken"],r);const i=a(t,["_self"]);if(i!=null){let o=BI(i);Array.isArray(o)&&(o=o.map(s=>ah(s))),l(e,["models"],o)}return e}function wU(t){const e={},n=a(t,["sdkHttpResponse"]);return n!=null&&l(e,["sdkHttpResponse"],n),e}function SU(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const r=a(t,["totalTokens"]);return r!=null&&l(e,["totalTokens"],r),e}function AU(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const r=a(t,["tokensInfo"]);return r!=null&&l(e,["tokensInfo"],r),e}function RU(t){const e={},n=a(t,["gcsUri"]);n!=null&&l(e,["uri"],n);const r=a(t,["bytesBase64Encoded"]);r!=null&&l(e,["videoBytes"],bi(r));const i=a(t,["mimeType"]);return i!=null&&l(e,["mimeType"],i),e}function PU(t){const e={},n=a(t,["_self"]);return n!=null&&l(e,["video"],RU(n)),e}function kU(t){const e={},n=a(t,["videos"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>PU(s))),l(e,["generatedVideos"],o)}const r=a(t,["raiMediaFilteredCount"]);r!=null&&l(e,["raiMediaFilteredCount"],r);const i=a(t,["raiMediaFilteredReasons"]);return i!=null&&l(e,["raiMediaFilteredReasons"],i),e}function NU(t){const e={},n=a(t,["name"]);n!=null&&l(e,["name"],n);const r=a(t,["metadata"]);r!=null&&l(e,["metadata"],r);const i=a(t,["done"]);i!=null&&l(e,["done"],i);const o=a(t,["error"]);o!=null&&l(e,["error"],o);const s=a(t,["response"]);return s!=null&&l(e,["response"],kU(s)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const MU="Content-Type",xU="X-Server-Timeout",DU="User-Agent",lh="x-goog-api-client",VU="1.20.0",LU=`google-genai-sdk/${VU}`,UU="v1beta1",FU="v1beta",lv=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class bU{constructor(e){var n,r;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const i={};this.clientOptions.vertexai?(i.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:UU,i.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(i.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:FU,i.baseUrl="https://generativelanguage.googleapis.com/"),i.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=i,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(i,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const r=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&r.push(e.apiVersion),r.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,r){const i=[this.getRequestUrlInternal(n)];return r&&i.push(this.getBaseResourcePath()),e!==""&&i.push(e),new URL(`${i.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,n,r);if(e.queryParams)for(const[s,u]of Object.entries(e.queryParams))i.searchParams.append(s,String(u));let o={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else o.body=e.body;return o=await this.includeExtraHttpOptionsToRequestInit(o,n,e.abortSignal),this.unaryApiCall(i,o,e.httpMethod)}patchHttpOptions(e,n){const r=JSON.parse(JSON.stringify(e));for(const[i,o]of Object.entries(n))typeof o=="object"?r[i]=Object.assign(Object.assign({},r[i]),o):o!==void 0&&(r[i]=o);return r}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,n,r);(!i.searchParams.has("alt")||i.searchParams.get("alt")!=="sse")&&i.searchParams.set("alt","sse");let o={};return o.body=e.body,o=await this.includeExtraHttpOptionsToRequestInit(o,n,e.abortSignal),this.streamApiCall(i,o,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,r){if(n&&n.timeout||r){const i=new AbortController,o=i.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const s=setTimeout(()=>i.abort(),n.timeout);s&&typeof s.unref=="function"&&s.unref()}r&&r.addEventListener("abort",()=>{i.abort()}),e.signal=o}return n&&n.extraBody!==null&&OU(e,n.extraBody),e.headers=await this.getHeadersInternal(n),e}async unaryApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async i=>(await uv(i),new th(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}async streamApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async i=>(await uv(i),this.processStreamResponse(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}processStreamResponse(e){var n;return Eo(this,arguments,function*(){const i=(n=e==null?void 0:e.body)===null||n===void 0?void 0:n.getReader(),o=new TextDecoder("utf-8");if(!i)throw new Error("Response body is empty");try{let s="";for(;;){const{done:u,value:c}=yield Se(i.read());if(u){if(s.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const f=o.decode(c,{stream:!0});try{const p=JSON.parse(f);if("error"in p){const m=JSON.parse(JSON.stringify(p.error)),_=m.status,I=m.code,P=`got status: ${_}. ${JSON.stringify(p)}`;if(I>=400&&I<600)throw new yc({message:P,status:I})}}catch(p){if(p.name==="ApiError")throw p}s+=f;let h=s.match(lv);for(;h;){const p=h[1];try{const m=new Response(p,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Se(new th(m)),s=s.slice(h[0].length),h=s.match(lv)}catch(m){throw new Error(`exception parsing stream chunk ${p}. ${m}`)}}}}finally{i.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(r=>{throw new Error(`exception ${r} sending request`)})}getDefaultHeaders(){const e={},n=LU+" "+this.clientOptions.userAgentExtra;return e[DU]=n,e[lh]=n,e[MU]="application/json",e}async getHeadersInternal(e){const n=new Headers;if(e&&e.headers){for(const[r,i]of Object.entries(e.headers))n.append(r,i);e.timeout&&e.timeout>0&&n.append(xU,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(n),n}async uploadFile(e,n){var r;const i={};n!=null&&(i.mimeType=n.mimeType,i.name=n.name,i.displayName=n.displayName),i.name&&!i.name.startsWith("files/")&&(i.name=`files/${i.name}`);const o=this.clientOptions.uploader,s=await o.stat(e);i.sizeBytes=String(s.size);const u=(r=n==null?void 0:n.mimeType)!==null&&r!==void 0?r:s.type;if(u===void 0||u==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");i.mimeType=u;const c=await this.fetchUploadUrl(i,n);return o.upload(e,c,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n){var r;let i={};n!=null&&n.httpOptions?i=n.httpOptions:i={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const o={file:e},s=await this.request({path:J("upload/v1beta/files",o._url),body:JSON.stringify(o),httpMethod:"POST",httpOptions:i});if(!s||!(s!=null&&s.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const u=(r=s==null?void 0:s.headers)===null||r===void 0?void 0:r["x-goog-upload-url"];if(u===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return u}}async function uv(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let r;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?r=await t.json():r={error:{message:await t.text(),code:t.status,status:t.statusText}};const i=JSON.stringify(r);throw n>=400&&n<600?new yc({message:i,status:n}):new Error(i)}}function OU(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const o=JSON.parse(t.body);if(typeof o=="object"&&o!==null&&!Array.isArray(o))n=o;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function r(o,s){const u=Object.assign({},o);for(const c in s)if(Object.prototype.hasOwnProperty.call(s,c)){const f=s[c],h=u[c];f&&typeof f=="object"&&!Array.isArray(f)&&h&&typeof h=="object"&&!Array.isArray(h)?u[c]=r(h,f):(h&&f&&typeof h!=typeof f&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${c}". Original type: ${typeof h}, New type: ${typeof f}. Overwriting.`),u[c]=f)}return u}const i=r(n,e);t.body=JSON.stringify(i)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const BU="mcp_used/unknown";let qU=!1;function lw(t){for(const e of t)if($U(e)||typeof e=="object"&&"inputSchema"in e)return!0;return qU}function uw(t){var e;const n=(e=t[lh])!==null&&e!==void 0?e:"";t[lh]=(n+` ${BU}`).trimStart()}function $U(t){return t!==null&&typeof t=="object"&&t instanceof Op}function HU(t,e=100){return Eo(this,arguments,function*(){let r,i=0;for(;i<e;){const o=yield Se(t.listTools({cursor:r}));for(const s of o.tools)yield yield Se(s),i++;if(!o.nextCursor)break;r=o.nextCursor}})}class Op{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new Op(e,n)}async initialize(){var e,n,r,i;if(this.mcpTools.length>0)return;const o={},s=[];for(const h of this.mcpClients)try{for(var u=!0,c=(n=void 0,Xs(HU(h))),f;f=await c.next(),e=f.done,!e;u=!0){i=f.value,u=!1;const p=i;s.push(p);const m=p.name;if(o[m])throw new Error(`Duplicate function name ${m} found in MCP tools. Please ensure function names are unique.`);o[m]=h}}catch(p){n={error:p}}finally{try{!u&&!e&&(r=c.return)&&await r.call(c)}finally{if(n)throw n.error}}this.mcpTools=s,this.functionNameToMcpClient=o}async tool(){return await this.initialize(),iN(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const r of e)if(r.name in this.functionNameToMcpClient){const i=this.functionNameToMcpClient[r.name];let o;this.config.timeout&&(o={timeout:this.config.timeout});const s=await i.callTool({name:r.name,arguments:r.args},void 0,o);n.push({functionResponse:{name:r.name,response:s.isError?{error:s}:s}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function GU(t,e,n){const r=new Qk;let i;n.data instanceof Blob?i=JSON.parse(await n.data.text()):i=JSON.parse(n.data);const o=T1(i);Object.assign(r,o),e(r)}class zU{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r}async connect(e){var n,r;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const i=this.apiClient.getWebsocketBaseUrl(),o=this.apiClient.getApiVersion(),s=JU(this.apiClient.getDefaultHeaders()),u=this.apiClient.getApiKey(),c=`${i}/ws/google.ai.generativelanguage.${o}.GenerativeService.BidiGenerateMusic?key=${u}`;let f=()=>{};const h=new Promise(A=>{f=A}),p=e.callbacks,m=function(){f({})},_=this.apiClient,I={onopen:m,onmessage:A=>{GU(_,p.onmessage,A)},onerror:(n=p==null?void 0:p.onerror)!==null&&n!==void 0?n:function(A){},onclose:(r=p==null?void 0:p.onclose)!==null&&r!==void 0?r:function(A){}},P=this.webSocketFactory.create(c,KU(s),I);P.connect(),await h;const x=he(this.apiClient,e.model),S=XI({model:x}),C=oh({setup:S});return P.send(JSON.stringify(C)),new WU(P,this.apiClient)}}class WU{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=yD(e),r=ZI(n);this.conn.send(JSON.stringify({clientContent:r}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=_D(e),r=oh(n);this.conn.send(JSON.stringify(r))}sendPlaybackControl(e){const n=oh({playbackControl:e});this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(fo.PLAY)}pause(){this.sendPlaybackControl(fo.PAUSE)}stop(){this.sendPlaybackControl(fo.STOP)}resetContext(){this.sendPlaybackControl(fo.RESET_CONTEXT)}close(){this.conn.close()}}function KU(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function JU(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const YU="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function QU(t,e,n){const r=new Yk;let i;n.data instanceof Blob?i=await n.data.text():n.data instanceof ArrayBuffer?i=new TextDecoder().decode(n.data):i=n.data;const o=JSON.parse(i);if(t.isVertexAI()){const s=D1(o);Object.assign(r,s)}else{const s=f1(o);Object.assign(r,s)}e(r)}class XU{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r,this.music=new zU(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,r,i,o,s,u;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const c=this.apiClient.getWebsocketBaseUrl(),f=this.apiClient.getApiVersion();let h;const p=this.apiClient.getHeaders();e.config&&e.config.tools&&lw(e.config.tools)&&uw(p);const m=tF(p);if(this.apiClient.isVertexAI())h=`${c}/ws/google.cloud.aiplatform.${f}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(m);else{const w=this.apiClient.getApiKey();let R="BidiGenerateContent",k="key";w!=null&&w.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),f!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),R="BidiGenerateContentConstrained",k="access_token"),h=`${c}/ws/google.ai.generativelanguage.${f}.GenerativeService.${R}?${k}=${w}`}let _=()=>{};const I=new Promise(w=>{_=w}),P=e.callbacks,x=function(){var w;(w=P==null?void 0:P.onopen)===null||w===void 0||w.call(P),_({})},S=this.apiClient,C={onopen:x,onmessage:w=>{QU(S,P.onmessage,w)},onerror:(n=P==null?void 0:P.onerror)!==null&&n!==void 0?n:function(w){},onclose:(r=P==null?void 0:P.onclose)!==null&&r!==void 0?r:function(w){}},A=this.webSocketFactory.create(h,eF(m),C);A.connect(),await I;let D=he(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&D.startsWith("publishers/")){const w=this.apiClient.getProject(),R=this.apiClient.getLocation();D=`projects/${w}/locations/${R}/`+D}let F={};this.apiClient.isVertexAI()&&((i=e.config)===null||i===void 0?void 0:i.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Mu.AUDIO]}:e.config.responseModalities=[Mu.AUDIO]),!((o=e.config)===null||o===void 0)&&o.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const b=(u=(s=e.config)===null||s===void 0?void 0:s.tools)!==null&&u!==void 0?u:[],v=[];for(const w of b)if(this.isCallableTool(w)){const R=w;v.push(await R.tool())}else v.push(w);v.length>0&&(e.config.tools=v);const T={model:D,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?F=KD(this.apiClient,T):F=hD(this.apiClient,T),delete F.config,A.send(JSON.stringify(F)),new jU(A,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const ZU={turnComplete:!0};class jU{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let r=[];try{r=nn(n.turns),e.isVertexAI()?r=r.map(i=>Yo(i)):r=r.map(i=>_c(i))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:r,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let r=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?r=n.functionResponses:r=[n.functionResponses],r.length===0)throw new Error("functionResponses is required.");for(const o of r){if(typeof o!="object"||o===null||!("name"in o)||!("response"in o))throw new Error(`Could not parse function response, type '${typeof o}'.`);if(!e.isVertexAI()&&!("id"in o))throw new Error(YU)}return{toolResponse:{functionResponses:r}}}sendClientContent(e){e=Object.assign(Object.assign({},ZU),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:QD(e)}:n={realtimeInput:gD(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function eF(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function tF(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const cv=10;function fv(t){var e,n,r;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let i=!1;for(const s of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(Co(s)){i=!0;break}if(!i)return!0;const o=(r=t==null?void 0:t.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls;return o&&(o<0||!Number.isInteger(o))||o==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",o),!0):!1}function Co(t){return"callTool"in t&&typeof t.callTool=="function"}function nF(t){var e,n,r;return(r=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(i=>Co(i)))!==null&&r!==void 0?r:!1}function rF(t){var e,n,r;return(r=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(i=>!Co(i)))!==null&&r!==void 0?r:!1}function dv(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class iF extends Fi{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var r,i,o,s,u;const c=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!nF(n)||fv(n.config))return await this.generateContentInternal(c);if(rF(n))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let f,h;const p=nn(c.contents),m=(o=(i=(r=c.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&o!==void 0?o:cv;let _=0;for(;_<m&&(f=await this.generateContentInternal(c),!(!f.functionCalls||f.functionCalls.length===0));){const I=f.candidates[0].content,P=[];for(const x of(u=(s=n.config)===null||s===void 0?void 0:s.tools)!==null&&u!==void 0?u:[])if(Co(x)){const C=await x.callTool(f.functionCalls);P.push(...C)}_++,h={role:"user",parts:P},c.contents=nn(c.contents),c.contents.push(I),c.contents.push(h),dv(c.config)&&(p.push(I),p.push(h))}return dv(c.config)&&(f.automaticFunctionCallingHistory=p),f},this.generateContentStream=async n=>{if(this.maybeMoveToResponseJsonSchem(n),fv(n.config)){const r=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(r)}else return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(r=>{var i;let o;const s=[];if(r!=null&&r.generatedImages)for(const c of r.generatedImages)c&&(c!=null&&c.safetyAttributes)&&((i=c==null?void 0:c.safetyAttributes)===null||i===void 0?void 0:i.contentType)==="Positive Prompt"?o=c==null?void 0:c.safetyAttributes:s.push(c);let u;return o?u={generatedImages:s,positivePromptSafetyAttributes:o,sdkHttpResponse:r.sdkHttpResponse}:u={generatedImages:s,sdkHttpResponse:r.sdkHttpResponse},u}),this.list=async n=>{var r;const s={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!s.config.queryBase){if(!((r=s.config)===null||r===void 0)&&r.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");s.config.filter="labels.tune-type:*"}return new ba(Pi.PAGED_ITEM_MODELS,u=>this.listInternal(u),await this.listInternal(s),s)},this.editImage=async n=>{const r={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(r.referenceImages=n.referenceImages.map(i=>i.toReferenceImageAPI())),await this.editImageInternal(r)},this.upscaleImage=async n=>{let r={numberOfImages:1,mode:"upscale"};n.config&&(r=Object.assign(Object.assign({},r),n.config));const i={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:r};return await this.upscaleImageInternal(i)},this.generateVideos=async n=>{if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,r,i;const o=(n=e.config)===null||n===void 0?void 0:n.tools;if(!o)return e;const s=await Promise.all(o.map(async c=>Co(c)?await c.tool():c)),u={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:s})};if(u.config.tools=s,e.config&&e.config.tools&&lw(e.config.tools)){const c=(i=(r=e.config.httpOptions)===null||r===void 0?void 0:r.headers)!==null&&i!==void 0?i:{};let f=Object.assign({},c);Object.keys(f).length===0&&(f=this.apiClient.getDefaultHeaders()),uw(f),u.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:f})}return u}async initAfcToolsMap(e){var n,r,i;const o=new Map;for(const s of(r=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&r!==void 0?r:[])if(Co(s)){const u=s,c=await u.tool();for(const f of(i=c.functionDeclarations)!==null&&i!==void 0?i:[]){if(!f.name)throw new Error("Function declaration name is required.");if(o.has(f.name))throw new Error(`Duplicate tool declaration name: ${f.name}`);o.set(f.name,u)}}return o}async processAfcStream(e){var n,r,i;const o=(i=(r=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&i!==void 0?i:cv;let s=!1,u=0;const c=await this.initAfcToolsMap(e);return function(f,h,p){var m,_;return Eo(this,arguments,function*(){for(var I,P,x,S;u<o;){s&&(u++,s=!1);const F=yield Se(f.processParamsMaybeAddMcpUsage(p)),b=yield Se(f.generateContentStreamInternal(F)),v=[],T=[];try{for(var C=!0,A=(P=void 0,Xs(b)),D;D=yield Se(A.next()),I=D.done,!I;C=!0){S=D.value,C=!1;const w=S;if(yield yield Se(w),w.candidates&&(!((m=w.candidates[0])===null||m===void 0)&&m.content)){T.push(w.candidates[0].content);for(const R of(_=w.candidates[0].content.parts)!==null&&_!==void 0?_:[])if(u<o&&R.functionCall){if(!R.functionCall.name)throw new Error("Function call name was not returned by the model.");if(h.has(R.functionCall.name)){const k=yield Se(h.get(R.functionCall.name).callTool([R.functionCall]));v.push(...k)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${h.keys()}, mising tool: ${R.functionCall.name}`)}}}}catch(w){P={error:w}}finally{try{!C&&!I&&(x=A.return)&&(yield Se(x.call(A)))}finally{if(P)throw P.error}}if(v.length>0){s=!0;const w=new Ns;w.candidates=[{content:{role:"user",parts:v}}],yield yield Se(w);const R=[];R.push(...T),R.push({role:"user",parts:v});const k=nn(p.contents).concat(R);p.contents=k}else break}})}(this,c,e)}async generateContentInternal(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const f=ov(this.apiClient,e);return u=J("{model}:generateContent",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=av(h),m=new Ns;return Object.assign(m,p),m})}else{const f=iv(this.apiClient,e);return u=J("{model}:generateContent",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=sv(h),m=new Ns;return Object.assign(m,p),m})}}async generateContentStreamInternal(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const f=ov(this.apiClient,e);return u=J("{model}:streamGenerateContent?alt=sse",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.requestStream({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}),s.then(function(p){return Eo(this,arguments,function*(){var m,_,I,P;try{for(var x=!0,S=Xs(p),C;C=yield Se(S.next()),m=C.done,!m;x=!0){P=C.value,x=!1;const A=P,D=av(yield Se(A.json()));D.sdkHttpResponse={headers:A.headers};const F=new Ns;Object.assign(F,D),yield yield Se(F)}}catch(A){_={error:A}}finally{try{!x&&!m&&(I=S.return)&&(yield Se(I.call(S)))}finally{if(_)throw _.error}}})})}else{const f=iv(this.apiClient,e);return u=J("{model}:streamGenerateContent?alt=sse",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.requestStream({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),s.then(function(p){return Eo(this,arguments,function*(){var m,_,I,P;try{for(var x=!0,S=Xs(p),C;C=yield Se(S.next()),m=C.done,!m;x=!0){P=C.value,x=!1;const A=P,D=sv(yield Se(A.json()));D.sdkHttpResponse={headers:A.headers};const F=new Ns;Object.assign(F,D),yield yield Se(F)}}catch(A){_={error:A}}finally{try{!x&&!m&&(I=S.return)&&(yield Se(I.call(S)))}finally{if(_)throw _.error}}})})}}async embedContent(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const f=YV(this.apiClient,e);return u=J("{model}:predict",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=dU(h),m=new b_;return Object.assign(m,p),m})}else{const f=sV(this.apiClient,e);return u=J("{model}:batchEmbedContents",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=qL(h),m=new b_;return Object.assign(m,p),m})}}async generateImagesInternal(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const f=XV(this.apiClient,e);return u=J("{model}:predict",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=hU(h),m=new O_;return Object.assign(m,p),m})}else{const f=lV(this.apiClient,e);return u=J("{model}:predict",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=GL(h),m=new O_;return Object.assign(m,p),m})}}async editImageInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const u=iL(this.apiClient,e);return o=J("{model}:predict",u._url),s=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:c.headers},h})),i.then(c=>{const f=pU(c),h=new qk;return Object.assign(h,f),h})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const u=sL(this.apiClient,e);return o=J("{model}:predict",u._url),s=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:c.headers},h})),i.then(c=>{const f=mU(c),h=new $k;return Object.assign(h,f),h})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const u=cL(this.apiClient,e);return o=J("{model}:predict",u._url),s=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>{const f=gU(c),h=new Hk;return Object.assign(h,f),h})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const u=pL(this.apiClient,e);return o=J("{model}:predict",u._url),s=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>{const f=vU(c),h=new Gk;return Object.assign(h,f),h})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const f=mL(this.apiClient,e);return u=J("{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>ah(h))}else{const f=uV(this.apiClient,e);return u=J("{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>sh(h))}}async listInternal(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const f=yL(this.apiClient,e);return u=J("{models_url}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=IU(h),m=new B_;return Object.assign(m,p),m})}else{const f=fV(this.apiClient,e);return u=J("{models_url}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=WL(h),m=new B_;return Object.assign(m,p),m})}}async update(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const f=vL(this.apiClient,e);return u=J("{model}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>ah(h))}else{const f=hV(this.apiClient,e);return u=J("{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>sh(h))}}async delete(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const f=TL(this.apiClient,e);return u=J("{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=wU(h),m=new q_;return Object.assign(m,p),m})}else{const f=pV(this.apiClient,e);return u=J("{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=KL(h),m=new q_;return Object.assign(m,p),m})}}async countTokens(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const f=CL(this.apiClient,e);return u=J("{model}:countTokens",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=SU(h),m=new $_;return Object.assign(m,p),m})}else{const f=gV(this.apiClient,e);return u=J("{model}:countTokens",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=JL(h),m=new $_;return Object.assign(m,p),m})}}async computeTokens(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const u=IL(this.apiClient,e);return o=J("{model}:computeTokens",u._url),s=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:c.headers},h})),i.then(c=>{const f=AU(c),h=new zk;return Object.assign(h,f),h})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const f=PL(this.apiClient,e);return u=J("{model}:predictLongRunning",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>{const p=NU(h),m=new xu;return Object.assign(m,p),m})}else{const f=vV(this.apiClient,e);return u=J("{model}:predictLongRunning",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>{const p=ZL(h),m=new xu;return Object.assign(m,p),m})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class oF extends Fi{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=n.name.split("/operations/")[0];let o;r&&"httpOptions"in r&&(o=r.httpOptions);const s=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:i,config:{httpOptions:o}});return n._fromAPIResponse({apiResponse:s,isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:i,isVertexAI:!1})}}async get(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=n.name.split("/operations/")[0];let o;r&&"httpOptions"in r&&(o=r.httpOptions);const s=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:i,config:{httpOptions:o}});return n._fromAPIResponse({apiResponse:s,isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:i,isVertexAI:!1})}}async getVideosOperationInternal(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const f=xk(e);return u=J("{operationName}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s}else{const f=Nk(e);return u=J("{operationName}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s}}async fetchPredictVideosOperationInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const u=Mk(e);return o=J("{resourceName}:fetchPredictOperation",u._url),s=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function sF(t){const e={},n=a(t,["voiceName"]);return n!=null&&l(e,["voiceName"],n),e}function cw(t){const e={},n=a(t,["prebuiltVoiceConfig"]);return n!=null&&l(e,["prebuiltVoiceConfig"],sF(n)),e}function aF(t){const e={},n=a(t,["speaker"]);n!=null&&l(e,["speaker"],n);const r=a(t,["voiceConfig"]);return r!=null&&l(e,["voiceConfig"],cw(r)),e}function lF(t){const e={},n=a(t,["speakerVoiceConfigs"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>aF(i))),l(e,["speakerVoiceConfigs"],r)}return e}function uF(t){const e={},n=a(t,["voiceConfig"]);n!=null&&l(e,["voiceConfig"],cw(n));const r=a(t,["multiSpeakerVoiceConfig"]);r!=null&&l(e,["multiSpeakerVoiceConfig"],lF(r));const i=a(t,["languageCode"]);return i!=null&&l(e,["languageCode"],i),e}function cF(t){const e={},n=a(t,["fps"]);n!=null&&l(e,["fps"],n);const r=a(t,["endOffset"]);r!=null&&l(e,["endOffset"],r);const i=a(t,["startOffset"]);return i!=null&&l(e,["startOffset"],i),e}function fF(t){const e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=a(t,["data"]);n!=null&&l(e,["data"],n);const r=a(t,["mimeType"]);return r!=null&&l(e,["mimeType"],r),e}function dF(t){const e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=a(t,["fileUri"]);n!=null&&l(e,["fileUri"],n);const r=a(t,["mimeType"]);return r!=null&&l(e,["mimeType"],r),e}function hF(t){const e={},n=a(t,["id"]);n!=null&&l(e,["id"],n);const r=a(t,["args"]);r!=null&&l(e,["args"],r);const i=a(t,["name"]);return i!=null&&l(e,["name"],i),e}function pF(t){const e={},n=a(t,["videoMetadata"]);n!=null&&l(e,["videoMetadata"],cF(n));const r=a(t,["thought"]);r!=null&&l(e,["thought"],r);const i=a(t,["inlineData"]);i!=null&&l(e,["inlineData"],fF(i));const o=a(t,["fileData"]);o!=null&&l(e,["fileData"],dF(o));const s=a(t,["thoughtSignature"]);s!=null&&l(e,["thoughtSignature"],s);const u=a(t,["functionCall"]);u!=null&&l(e,["functionCall"],hF(u));const c=a(t,["codeExecutionResult"]);c!=null&&l(e,["codeExecutionResult"],c);const f=a(t,["executableCode"]);f!=null&&l(e,["executableCode"],f);const h=a(t,["functionResponse"]);h!=null&&l(e,["functionResponse"],h);const p=a(t,["text"]);return p!=null&&l(e,["text"],p),e}function mF(t){const e={},n=a(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>pF(o))),l(e,["parts"],i)}const r=a(t,["role"]);return r!=null&&l(e,["role"],r),e}function gF(t){const e={},n=a(t,["behavior"]);n!=null&&l(e,["behavior"],n);const r=a(t,["description"]);r!=null&&l(e,["description"],r);const i=a(t,["name"]);i!=null&&l(e,["name"],i);const o=a(t,["parameters"]);o!=null&&l(e,["parameters"],o);const s=a(t,["parametersJsonSchema"]);s!=null&&l(e,["parametersJsonSchema"],s);const u=a(t,["response"]);u!=null&&l(e,["response"],u);const c=a(t,["responseJsonSchema"]);return c!=null&&l(e,["responseJsonSchema"],c),e}function yF(t){const e={},n=a(t,["startTime"]);n!=null&&l(e,["startTime"],n);const r=a(t,["endTime"]);return r!=null&&l(e,["endTime"],r),e}function _F(t){const e={},n=a(t,["timeRangeFilter"]);if(n!=null&&l(e,["timeRangeFilter"],yF(n)),a(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function vF(t){const e={},n=a(t,["mode"]);n!=null&&l(e,["mode"],n);const r=a(t,["dynamicThreshold"]);return r!=null&&l(e,["dynamicThreshold"],r),e}function TF(t){const e={},n=a(t,["dynamicRetrievalConfig"]);return n!=null&&l(e,["dynamicRetrievalConfig"],vF(n)),e}function EF(){return{}}function CF(t){const e={},n=a(t,["environment"]);return n!=null&&l(e,["environment"],n),e}function IF(t){const e={},n=a(t,["functionDeclarations"]);if(n!=null){let c=n;Array.isArray(c)&&(c=c.map(f=>gF(f))),l(e,["functionDeclarations"],c)}if(a(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=a(t,["googleSearch"]);r!=null&&l(e,["googleSearch"],_F(r));const i=a(t,["googleSearchRetrieval"]);if(i!=null&&l(e,["googleSearchRetrieval"],TF(i)),a(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(a(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");a(t,["urlContext"])!=null&&l(e,["urlContext"],EF());const s=a(t,["computerUse"]);s!=null&&l(e,["computerUse"],CF(s));const u=a(t,["codeExecution"]);return u!=null&&l(e,["codeExecution"],u),e}function wF(t){const e={},n=a(t,["handle"]);if(n!=null&&l(e,["handle"],n),a(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function hv(){return{}}function SF(t){const e={},n=a(t,["disabled"]);n!=null&&l(e,["disabled"],n);const r=a(t,["startOfSpeechSensitivity"]);r!=null&&l(e,["startOfSpeechSensitivity"],r);const i=a(t,["endOfSpeechSensitivity"]);i!=null&&l(e,["endOfSpeechSensitivity"],i);const o=a(t,["prefixPaddingMs"]);o!=null&&l(e,["prefixPaddingMs"],o);const s=a(t,["silenceDurationMs"]);return s!=null&&l(e,["silenceDurationMs"],s),e}function AF(t){const e={},n=a(t,["automaticActivityDetection"]);n!=null&&l(e,["automaticActivityDetection"],SF(n));const r=a(t,["activityHandling"]);r!=null&&l(e,["activityHandling"],r);const i=a(t,["turnCoverage"]);return i!=null&&l(e,["turnCoverage"],i),e}function RF(t){const e={},n=a(t,["targetTokens"]);return n!=null&&l(e,["targetTokens"],n),e}function PF(t){const e={},n=a(t,["triggerTokens"]);n!=null&&l(e,["triggerTokens"],n);const r=a(t,["slidingWindow"]);return r!=null&&l(e,["slidingWindow"],RF(r)),e}function kF(t){const e={},n=a(t,["proactiveAudio"]);return n!=null&&l(e,["proactiveAudio"],n),e}function NF(t,e){const n={},r=a(t,["generationConfig"]);e!==void 0&&r!=null&&l(e,["setup","generationConfig"],r);const i=a(t,["responseModalities"]);e!==void 0&&i!=null&&l(e,["setup","generationConfig","responseModalities"],i);const o=a(t,["temperature"]);e!==void 0&&o!=null&&l(e,["setup","generationConfig","temperature"],o);const s=a(t,["topP"]);e!==void 0&&s!=null&&l(e,["setup","generationConfig","topP"],s);const u=a(t,["topK"]);e!==void 0&&u!=null&&l(e,["setup","generationConfig","topK"],u);const c=a(t,["maxOutputTokens"]);e!==void 0&&c!=null&&l(e,["setup","generationConfig","maxOutputTokens"],c);const f=a(t,["mediaResolution"]);e!==void 0&&f!=null&&l(e,["setup","generationConfig","mediaResolution"],f);const h=a(t,["seed"]);e!==void 0&&h!=null&&l(e,["setup","generationConfig","seed"],h);const p=a(t,["speechConfig"]);e!==void 0&&p!=null&&l(e,["setup","generationConfig","speechConfig"],uF(Fp(p)));const m=a(t,["enableAffectiveDialog"]);e!==void 0&&m!=null&&l(e,["setup","generationConfig","enableAffectiveDialog"],m);const _=a(t,["systemInstruction"]);e!==void 0&&_!=null&&l(e,["setup","systemInstruction"],mF(yt(_)));const I=a(t,["tools"]);if(e!==void 0&&I!=null){let F=Ko(I);Array.isArray(F)&&(F=F.map(b=>IF(Wo(b)))),l(e,["setup","tools"],F)}const P=a(t,["sessionResumption"]);e!==void 0&&P!=null&&l(e,["setup","sessionResumption"],wF(P));const x=a(t,["inputAudioTranscription"]);e!==void 0&&x!=null&&l(e,["setup","inputAudioTranscription"],hv());const S=a(t,["outputAudioTranscription"]);e!==void 0&&S!=null&&l(e,["setup","outputAudioTranscription"],hv());const C=a(t,["realtimeInputConfig"]);e!==void 0&&C!=null&&l(e,["setup","realtimeInputConfig"],AF(C));const A=a(t,["contextWindowCompression"]);e!==void 0&&A!=null&&l(e,["setup","contextWindowCompression"],PF(A));const D=a(t,["proactivity"]);return e!==void 0&&D!=null&&l(e,["setup","proactivity"],kF(D)),n}function MF(t,e){const n={},r=a(e,["model"]);r!=null&&l(n,["setup","model"],he(t,r));const i=a(e,["config"]);return i!=null&&l(n,["config"],NF(i,n)),n}function xF(t,e,n){const r={},i=a(e,["expireTime"]);n!==void 0&&i!=null&&l(n,["expireTime"],i);const o=a(e,["newSessionExpireTime"]);n!==void 0&&o!=null&&l(n,["newSessionExpireTime"],o);const s=a(e,["uses"]);n!==void 0&&s!=null&&l(n,["uses"],s);const u=a(e,["liveConnectConstraints"]);n!==void 0&&u!=null&&l(n,["bidiGenerateContentSetup"],MF(t,u));const c=a(e,["lockAdditionalFields"]);return n!==void 0&&c!=null&&l(n,["fieldMask"],c),r}function DF(t,e){const n={},r=a(e,["config"]);return r!=null&&l(n,["config"],xF(t,r,n)),n}function VF(t){const e={},n=a(t,["name"]);return n!=null&&l(e,["name"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function LF(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const r=t[n];if(typeof r=="object"&&r!=null&&Object.keys(r).length>0){const i=Object.keys(r).map(o=>`${n}.${o}`);e.push(...i)}else e.push(n)}return e.join(",")}function UF(t,e){let n=null;const r=t.bidiGenerateContentSetup;if(typeof r=="object"&&r!==null&&"setup"in r){const o=r.setup;typeof o=="object"&&o!==null?(t.bidiGenerateContentSetup=o,n=o):delete t.bidiGenerateContentSetup}else r!==void 0&&delete t.bidiGenerateContentSetup;const i=t.fieldMask;if(n){const o=LF(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)o?t.fieldMask=o:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&i!==null&&Array.isArray(i)&&i.length>0){const s=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let u=[];i.length>0&&(u=i.map(f=>s.includes(f)?`generationConfig.${f}`:f));const c=[];o&&c.push(o),u.length>0&&c.push(...u),c.length>0?t.fieldMask=c.join(","):delete t.fieldMask}else delete t.fieldMask}else i!==null&&Array.isArray(i)&&i.length>0?t.fieldMask=i.join(","):delete t.fieldMask;return t}class FF extends Fi{constructor(e){super(),this.apiClient=e}async create(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const u=DF(this.apiClient,e);o=J("auth_tokens",u._url),s=u._query,delete u.config,delete u._url,delete u._query;const c=UF(u,e.config);return i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),i.then(f=>VF(f))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function bF(t){const e={},n=a(t,["name"]);n!=null&&l(e,["_url","name"],n);const r=a(t,["config"]);return r!=null&&l(e,["config"],r),e}function OF(t,e){const n={},r=a(t,["pageSize"]);e!==void 0&&r!=null&&l(e,["_query","pageSize"],r);const i=a(t,["pageToken"]);e!==void 0&&i!=null&&l(e,["_query","pageToken"],i);const o=a(t,["filter"]);return e!==void 0&&o!=null&&l(e,["_query","filter"],o),n}function BF(t){const e={},n=a(t,["config"]);return n!=null&&l(e,["config"],OF(n,e)),e}function qF(t){const e={},n=a(t,["name"]);n!=null&&l(e,["_url","name"],n);const r=a(t,["config"]);return r!=null&&l(e,["config"],r),e}function $F(t){const e={},n=a(t,["textInput"]);n!=null&&l(e,["textInput"],n);const r=a(t,["output"]);return r!=null&&l(e,["output"],r),e}function HF(t){const e={};if(a(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(a(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const n=a(t,["examples"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>$F(i))),l(e,["examples","examples"],r)}return e}function GF(t,e){const n={};if(a(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=a(t,["tunedModelDisplayName"]);if(e!==void 0&&r!=null&&l(e,["displayName"],r),a(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const i=a(t,["epochCount"]);e!==void 0&&i!=null&&l(e,["tuningTask","hyperparameters","epochCount"],i);const o=a(t,["learningRateMultiplier"]);if(o!=null&&l(n,["tuningTask","hyperparameters","learningRateMultiplier"],o),a(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(a(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(a(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const s=a(t,["batchSize"]);e!==void 0&&s!=null&&l(e,["tuningTask","hyperparameters","batchSize"],s);const u=a(t,["learningRate"]);if(e!==void 0&&u!=null&&l(e,["tuningTask","hyperparameters","learningRate"],u),a(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");return n}function zF(t){const e={},n=a(t,["baseModel"]);n!=null&&l(e,["baseModel"],n);const r=a(t,["preTunedModel"]);r!=null&&l(e,["preTunedModel"],r);const i=a(t,["trainingDataset"]);i!=null&&l(e,["tuningTask","trainingData"],HF(i));const o=a(t,["config"]);return o!=null&&l(e,["config"],GF(o,e)),e}function WF(t){const e={},n=a(t,["name"]);n!=null&&l(e,["_url","name"],n);const r=a(t,["config"]);return r!=null&&l(e,["config"],r),e}function KF(t,e){const n={},r=a(t,["pageSize"]);e!==void 0&&r!=null&&l(e,["_query","pageSize"],r);const i=a(t,["pageToken"]);e!==void 0&&i!=null&&l(e,["_query","pageToken"],i);const o=a(t,["filter"]);return e!==void 0&&o!=null&&l(e,["_query","filter"],o),n}function JF(t){const e={},n=a(t,["config"]);return n!=null&&l(e,["config"],KF(n,e)),e}function YF(t){const e={},n=a(t,["name"]);n!=null&&l(e,["_url","name"],n);const r=a(t,["config"]);return r!=null&&l(e,["config"],r),e}function QF(t,e){const n={},r=a(t,["gcsUri"]);e!==void 0&&r!=null&&l(e,["supervisedTuningSpec","trainingDatasetUri"],r);const i=a(t,["vertexDatasetResource"]);if(e!==void 0&&i!=null&&l(e,["supervisedTuningSpec","trainingDatasetUri"],i),a(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return n}function XF(t,e){const n={},r=a(t,["gcsUri"]);r!=null&&l(n,["validationDatasetUri"],r);const i=a(t,["vertexDatasetResource"]);return e!==void 0&&i!=null&&l(e,["supervisedTuningSpec","trainingDatasetUri"],i),n}function ZF(t,e){const n={},r=a(t,["validationDataset"]);e!==void 0&&r!=null&&l(e,["supervisedTuningSpec"],XF(r,n));const i=a(t,["tunedModelDisplayName"]);e!==void 0&&i!=null&&l(e,["tunedModelDisplayName"],i);const o=a(t,["description"]);e!==void 0&&o!=null&&l(e,["description"],o);const s=a(t,["epochCount"]);e!==void 0&&s!=null&&l(e,["supervisedTuningSpec","hyperParameters","epochCount"],s);const u=a(t,["learningRateMultiplier"]);e!==void 0&&u!=null&&l(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],u);const c=a(t,["exportLastCheckpointOnly"]);e!==void 0&&c!=null&&l(e,["supervisedTuningSpec","exportLastCheckpointOnly"],c);const f=a(t,["preTunedModelCheckpointId"]);f!=null&&l(n,["preTunedModel","checkpointId"],f);const h=a(t,["adapterSize"]);if(e!==void 0&&h!=null&&l(e,["supervisedTuningSpec","hyperParameters","adapterSize"],h),a(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(a(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const p=a(t,["labels"]);return e!==void 0&&p!=null&&l(e,["labels"],p),n}function jF(t){const e={},n=a(t,["baseModel"]);n!=null&&l(e,["baseModel"],n);const r=a(t,["preTunedModel"]);r!=null&&l(e,["preTunedModel"],r);const i=a(t,["trainingDataset"]);i!=null&&l(e,["supervisedTuningSpec","trainingDatasetUri"],QF(i,e));const o=a(t,["config"]);return o!=null&&l(e,["config"],ZF(o,e)),e}function e2(t){const e={},n=a(t,["name"]);n!=null&&l(e,["model"],n);const r=a(t,["name"]);return r!=null&&l(e,["endpoint"],r),e}function fw(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const r=a(t,["name"]);r!=null&&l(e,["name"],r);const i=a(t,["state"]);i!=null&&l(e,["state"],FI(i));const o=a(t,["createTime"]);o!=null&&l(e,["createTime"],o);const s=a(t,["tuningTask","startTime"]);s!=null&&l(e,["startTime"],s);const u=a(t,["tuningTask","completeTime"]);u!=null&&l(e,["endTime"],u);const c=a(t,["updateTime"]);c!=null&&l(e,["updateTime"],c);const f=a(t,["description"]);f!=null&&l(e,["description"],f);const h=a(t,["baseModel"]);h!=null&&l(e,["baseModel"],h);const p=a(t,["_self"]);p!=null&&l(e,["tunedModel"],e2(p));const m=a(t,["customBaseModel"]);m!=null&&l(e,["customBaseModel"],m);const _=a(t,["experiment"]);_!=null&&l(e,["experiment"],_);const I=a(t,["labels"]);I!=null&&l(e,["labels"],I);const P=a(t,["outputUri"]);P!=null&&l(e,["outputUri"],P);const x=a(t,["pipelineJob"]);x!=null&&l(e,["pipelineJob"],x);const S=a(t,["serviceAccount"]);S!=null&&l(e,["serviceAccount"],S);const C=a(t,["tunedModelDisplayName"]);return C!=null&&l(e,["tunedModelDisplayName"],C),e}function t2(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const r=a(t,["nextPageToken"]);r!=null&&l(e,["nextPageToken"],r);const i=a(t,["tunedModels"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>fw(s))),l(e,["tuningJobs"],o)}return e}function n2(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const r=a(t,["name"]);r!=null&&l(e,["name"],r);const i=a(t,["metadata"]);i!=null&&l(e,["metadata"],i);const o=a(t,["done"]);o!=null&&l(e,["done"],o);const s=a(t,["error"]);return s!=null&&l(e,["error"],s),e}function r2(t){const e={},n=a(t,["checkpointId"]);n!=null&&l(e,["checkpointId"],n);const r=a(t,["epoch"]);r!=null&&l(e,["epoch"],r);const i=a(t,["step"]);i!=null&&l(e,["step"],i);const o=a(t,["endpoint"]);return o!=null&&l(e,["endpoint"],o),e}function i2(t){const e={},n=a(t,["model"]);n!=null&&l(e,["model"],n);const r=a(t,["endpoint"]);r!=null&&l(e,["endpoint"],r);const i=a(t,["checkpoints"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>r2(s))),l(e,["checkpoints"],o)}return e}function uh(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const r=a(t,["name"]);r!=null&&l(e,["name"],r);const i=a(t,["state"]);i!=null&&l(e,["state"],FI(i));const o=a(t,["createTime"]);o!=null&&l(e,["createTime"],o);const s=a(t,["startTime"]);s!=null&&l(e,["startTime"],s);const u=a(t,["endTime"]);u!=null&&l(e,["endTime"],u);const c=a(t,["updateTime"]);c!=null&&l(e,["updateTime"],c);const f=a(t,["error"]);f!=null&&l(e,["error"],f);const h=a(t,["description"]);h!=null&&l(e,["description"],h);const p=a(t,["baseModel"]);p!=null&&l(e,["baseModel"],p);const m=a(t,["tunedModel"]);m!=null&&l(e,["tunedModel"],i2(m));const _=a(t,["preTunedModel"]);_!=null&&l(e,["preTunedModel"],_);const I=a(t,["supervisedTuningSpec"]);I!=null&&l(e,["supervisedTuningSpec"],I);const P=a(t,["tuningDataStats"]);P!=null&&l(e,["tuningDataStats"],P);const x=a(t,["encryptionSpec"]);x!=null&&l(e,["encryptionSpec"],x);const S=a(t,["partnerModelTuningSpec"]);S!=null&&l(e,["partnerModelTuningSpec"],S);const C=a(t,["customBaseModel"]);C!=null&&l(e,["customBaseModel"],C);const A=a(t,["experiment"]);A!=null&&l(e,["experiment"],A);const D=a(t,["labels"]);D!=null&&l(e,["labels"],D);const F=a(t,["outputUri"]);F!=null&&l(e,["outputUri"],F);const b=a(t,["pipelineJob"]);b!=null&&l(e,["pipelineJob"],b);const v=a(t,["serviceAccount"]);v!=null&&l(e,["serviceAccount"],v);const T=a(t,["tunedModelDisplayName"]);return T!=null&&l(e,["tunedModelDisplayName"],T),e}function o2(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const r=a(t,["nextPageToken"]);r!=null&&l(e,["nextPageToken"],r);const i=a(t,["tuningJobs"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>uh(s))),l(e,["tuningJobs"],o)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class s2 extends Fi{constructor(e){super(),this.apiClient=e,this.get=async n=>await this.getInternal(n),this.list=async(n={})=>new ba(Pi.PAGED_ITEM_TUNING_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.tune=async n=>{if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const r={tunedModelName:n.baseModel},i=Object.assign(Object.assign({},n),{preTunedModel:r});return i.baseModel=void 0,await this.tuneInternal(i)}else{const r=Object.assign({},n);return await this.tuneInternal(r)}else{const r=Object.assign({},n),i=await this.tuneMldevInternal(r);let o="";return i.metadata!==void 0&&i.metadata.tunedModel!==void 0?o=i.metadata.tunedModel:i.name!==void 0&&i.name.includes("/operations/")&&(o=i.name.split("/operations/")[0]),{name:o,state:eh.JOB_STATE_QUEUED}}}}async getInternal(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const f=WF(e);return u=J("{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>uh(h))}else{const f=bF(e);return u=J("{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>fw(h))}}async listInternal(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const f=JF(e);return u=J("tuningJobs",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=o2(h),m=new H_;return Object.assign(m,p),m})}else{const f=BF(e);return u=J("tunedModels",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=t2(h),m=new H_;return Object.assign(m,p),m})}}async cancel(e){var n,r,i,o;let s="",u={};if(this.apiClient.isVertexAI()){const c=YF(e);s=J("{name}:cancel",c._url),u=c._query,delete c.config,delete c._url,delete c._query,await this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}else{const c=qF(e);s=J("{name}:cancel",c._url),u=c._query,delete c.config,delete c._url,delete c._query,await this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async tuneInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const u=jF(e);return o=J("tuningJobs",u._url),s=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:c.headers},h})),i.then(c=>uh(c))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=zF(e);return o=J("tunedModels",u._url),s=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:c.headers},h})),i.then(c=>n2(c))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class a2{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const l2=1024*1024*8,u2=3,c2=1e3,f2=2,qf="x-goog-upload-status";async function d2(t,e,n){var r,i,o;let s=0,u=0,c=new th(new Response),f="upload";for(s=t.size;u<s;){const p=Math.min(l2,s-u),m=t.slice(u,u+p);u+p>=s&&(f+=", finalize");let _=0,I=c2;for(;_<u2&&(c=await n.request({path:"",body:m,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":f,"X-Goog-Upload-Offset":String(u),"Content-Length":String(p)}}}),!(!((r=c==null?void 0:c.headers)===null||r===void 0)&&r[qf]));)_++,await p2(I),I=I*f2;if(u+=p,((i=c==null?void 0:c.headers)===null||i===void 0?void 0:i[qf])!=="active")break;if(s<=u)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const h=await(c==null?void 0:c.json());if(((o=c==null?void 0:c.headers)===null||o===void 0?void 0:o[qf])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return h.file}async function h2(t){return{size:t.size,type:t.type}}function p2(t){return new Promise(e=>setTimeout(e,t))}class m2{async upload(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await d2(e,n,r)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await h2(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class g2{create(e,n,r){return new y2(e,n,r)}}class y2{constructor(e,n,r){this.url=e,this.headers=n,this.callbacks=r}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const pv="x-goog-api-key";class _2{constructor(e){this.apiKey=e}async addAuthHeaders(e){if(e.get(pv)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(pv,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const v2="gl-node/";class mv{constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const r=kk(e.httpOptions,e.vertexai,void 0,void 0);r&&(e.httpOptions?e.httpOptions.baseUrl=r:e.httpOptions={baseUrl:r}),this.apiVersion=e.apiVersion;const i=new _2(this.apiKey);this.apiClient=new bU({auth:i,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:v2+"web",uploader:new m2,downloader:new a2}),this.models=new iF(this.apiClient),this.live=new XU(this.apiClient,i,new g2),this.batches=new TM(this.apiClient),this.chats=new Px(this.models,this.apiClient),this.caches=new Sx(this.apiClient),this.files=new qx(this.apiClient),this.operations=new oF(this.apiClient),this.authTokens=new FF(this.apiClient),this.tunings=new s2(this.apiClient)}}const T2=()=>{};var gv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dw=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},E2=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){const o=t[n++],s=t[n++],u=t[n++],c=((i&7)<<18|(o&63)<<12|(s&63)<<6|u&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const o=t[n++],s=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},hw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const o=t[i],s=i+1<t.length,u=s?t[i+1]:0,c=i+2<t.length,f=c?t[i+2]:0,h=o>>2,p=(o&3)<<4|u>>4;let m=(u&15)<<2|f>>6,_=f&63;c||(_=64,s||(m=64)),r.push(n[h],n[p],n[m],n[_])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(dw(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):E2(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const o=n[t.charAt(i++)],u=i<t.length?n[t.charAt(i)]:0;++i;const f=i<t.length?n[t.charAt(i)]:64;++i;const p=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||u==null||f==null||p==null)throw new C2;const m=o<<2|u>>4;if(r.push(m),f!==64){const _=u<<4&240|f>>2;if(r.push(_),p!==64){const I=f<<6&192|p;r.push(I)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class C2 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const I2=function(t){const e=dw(t);return hw.encodeByteArray(e,!0)},Vu=function(t){return I2(t).replace(/\./g,"")},pw=function(t){try{return hw.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w2(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S2=()=>w2().__FIREBASE_DEFAULTS__,A2=()=>{if(typeof process>"u"||typeof gv>"u")return;const t=gv.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},R2=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&pw(t[1]);return e&&JSON.parse(e)},Tc=()=>{try{return T2()||S2()||A2()||R2()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},mw=t=>{var e,n;return(n=(e=Tc())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},gw=t=>{const e=mw(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},yw=()=>{var t;return(t=Tc())==null?void 0:t.config},_w=t=>{var e;return(e=Tc())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P2{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ni(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Bp(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vw(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Vu(JSON.stringify(n)),Vu(JSON.stringify(s)),""].join(".")}const Zs={};function k2(){const t={prod:[],emulator:[]};for(const e of Object.keys(Zs))Zs[e]?t.emulator.push(e):t.prod.push(e);return t}function N2(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let yv=!1;function qp(t,e){if(typeof window>"u"||typeof document>"u"||!ni(window.location.host)||Zs[t]===e||Zs[t]||yv)return;Zs[t]=e;function n(m){return`__firebase__banner__${m}`}const r="__firebase__banner",o=k2().prod.length>0;function s(){const m=document.getElementById(r);m&&m.remove()}function u(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function c(m,_){m.setAttribute("width","24"),m.setAttribute("id",_),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function f(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{yv=!0,s()},m}function h(m,_){m.setAttribute("id",_),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function p(){const m=N2(r),_=n("text"),I=document.getElementById(_)||document.createElement("span"),P=n("learnmore"),x=document.getElementById(P)||document.createElement("a"),S=n("preprendIcon"),C=document.getElementById(S)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const A=m.element;u(A),h(x,P);const D=f();c(C,S),A.append(C,I,x,D),document.body.appendChild(A)}o?(I.innerText="Preview backend disconnected.",C.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(C.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,I.innerText="Preview backend running in this workspace."),I.setAttribute("id",_)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function M2(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(vt())}function x2(){var e;const t=(e=Tc())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function D2(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function V2(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function L2(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function U2(){const t=vt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function F2(){return!x2()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function b2(){try{return typeof indexedDB=="object"}catch{return!1}}function O2(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;e(((o=i.error)==null?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B2="FirebaseError";class Cn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=B2,Object.setPrototypeOf(this,Cn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Oi.prototype.create)}}class Oi{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?q2(o,r):"Error",u=`${this.serviceName}: ${s} (${i}).`;return new Cn(i,u,r)}}function q2(t,e){return t.replace($2,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const $2=/\{\$([^}]+)}/g;function H2(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function zr(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const o=t[i],s=e[i];if(_v(o)&&_v(s)){if(!zr(o,s))return!1}else if(o!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function _v(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oa(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Us(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function Fs(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function G2(t,e){const n=new z2(t,e);return n.subscribe.bind(n)}class z2{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");W2(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=$f),i.error===void 0&&(i.error=$f),i.complete===void 0&&(i.complete=$f);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function W2(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function $f(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pe(t){return t&&t._delegate?t._delegate:t}class ln{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K2{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new P2;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Y2(e))try{this.getOrInitializeService({instanceIdentifier:hi})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=hi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=hi){return this.instances.has(e)}getOptions(e=hi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[o,s]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(o);r===u&&s.resolve(i)}return i}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:J2(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=hi){return this.component?this.component.multipleInstances?e:hi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function J2(t){return t===hi?void 0:t}function Y2(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q2{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new K2(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var le;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(le||(le={}));const X2={debug:le.DEBUG,verbose:le.VERBOSE,info:le.INFO,warn:le.WARN,error:le.ERROR,silent:le.SILENT},Z2=le.INFO,j2={[le.DEBUG]:"log",[le.VERBOSE]:"log",[le.INFO]:"info",[le.WARN]:"warn",[le.ERROR]:"error"},eb=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=j2[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class $p{constructor(e){this.name=e,this._logLevel=Z2,this._logHandler=eb,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in le))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?X2[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,le.DEBUG,...e),this._logHandler(this,le.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,le.VERBOSE,...e),this._logHandler(this,le.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,le.INFO,...e),this._logHandler(this,le.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,le.WARN,...e),this._logHandler(this,le.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,le.ERROR,...e),this._logHandler(this,le.ERROR,...e)}}const tb=(t,e)=>e.some(n=>t instanceof n);let vv,Tv;function nb(){return vv||(vv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function rb(){return Tv||(Tv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Tw=new WeakMap,ch=new WeakMap,Ew=new WeakMap,Hf=new WeakMap,Hp=new WeakMap;function ib(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{n(Zn(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&Tw.set(n,t)}).catch(()=>{}),Hp.set(e,t),e}function ob(t){if(ch.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});ch.set(t,e)}let fh={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return ch.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Ew.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Zn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function sb(t){fh=t(fh)}function ab(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Gf(this),e,...n);return Ew.set(r,e.sort?e.sort():[e]),Zn(r)}:rb().includes(t)?function(...e){return t.apply(Gf(this),e),Zn(Tw.get(this))}:function(...e){return Zn(t.apply(Gf(this),e))}}function lb(t){return typeof t=="function"?ab(t):(t instanceof IDBTransaction&&ob(t),tb(t,nb())?new Proxy(t,fh):t)}function Zn(t){if(t instanceof IDBRequest)return ib(t);if(Hf.has(t))return Hf.get(t);const e=lb(t);return e!==t&&(Hf.set(t,e),Hp.set(e,t)),e}const Gf=t=>Hp.get(t);function Ec(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){const s=indexedDB.open(t,e),u=Zn(s);return r&&s.addEventListener("upgradeneeded",c=>{r(Zn(s.result),c.oldVersion,c.newVersion,Zn(s.transaction),c)}),n&&s.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),u.then(c=>{o&&c.addEventListener("close",()=>o()),i&&c.addEventListener("versionchange",f=>i(f.oldVersion,f.newVersion,f))}).catch(()=>{}),u}function zf(t,{blocked:e}={}){const n=indexedDB.deleteDatabase(t);return e&&n.addEventListener("blocked",r=>e(r.oldVersion,r)),Zn(n).then(()=>{})}const ub=["get","getKey","getAll","getAllKeys","count"],cb=["put","add","delete","clear"],Wf=new Map;function Ev(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Wf.get(e))return Wf.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=cb.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||ub.includes(n)))return;const o=async function(s,...u){const c=this.transaction(s,i?"readwrite":"readonly");let f=c.store;return r&&(f=f.index(u.shift())),(await Promise.all([f[n](...u),i&&c.done]))[0]};return Wf.set(e,o),o}sb(t=>({...t,get:(e,n,r)=>Ev(e,n)||t.get(e,n,r),has:(e,n)=>!!Ev(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fb{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(db(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function db(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const dh="@firebase/app",Cv="0.14.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rr=new $p("@firebase/app"),hb="@firebase/app-compat",pb="@firebase/analytics-compat",mb="@firebase/analytics",gb="@firebase/app-check-compat",yb="@firebase/app-check",_b="@firebase/auth",vb="@firebase/auth-compat",Tb="@firebase/database",Eb="@firebase/data-connect",Cb="@firebase/database-compat",Ib="@firebase/functions",wb="@firebase/functions-compat",Sb="@firebase/installations",Ab="@firebase/installations-compat",Rb="@firebase/messaging",Pb="@firebase/messaging-compat",kb="@firebase/performance",Nb="@firebase/performance-compat",Mb="@firebase/remote-config",xb="@firebase/remote-config-compat",Db="@firebase/storage",Vb="@firebase/storage-compat",Lb="@firebase/firestore",Ub="@firebase/ai",Fb="@firebase/firestore-compat",bb="firebase",Ob="12.3.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hh="[DEFAULT]",Bb={[dh]:"fire-core",[hb]:"fire-core-compat",[mb]:"fire-analytics",[pb]:"fire-analytics-compat",[yb]:"fire-app-check",[gb]:"fire-app-check-compat",[_b]:"fire-auth",[vb]:"fire-auth-compat",[Tb]:"fire-rtdb",[Eb]:"fire-data-connect",[Cb]:"fire-rtdb-compat",[Ib]:"fire-fn",[wb]:"fire-fn-compat",[Sb]:"fire-iid",[Ab]:"fire-iid-compat",[Rb]:"fire-fcm",[Pb]:"fire-fcm-compat",[kb]:"fire-perf",[Nb]:"fire-perf-compat",[Mb]:"fire-rc",[xb]:"fire-rc-compat",[Db]:"fire-gcs",[Vb]:"fire-gcs-compat",[Lb]:"fire-fst",[Fb]:"fire-fst-compat",[Ub]:"fire-vertex","fire-js":"fire-js",[bb]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lu=new Map,qb=new Map,ph=new Map;function Iv(t,e){try{t.container.addComponent(e)}catch(n){rr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function _n(t){const e=t.name;if(ph.has(e))return rr.debug(`There were multiple attempts to register component ${e}.`),!1;ph.set(e,t);for(const n of Lu.values())Iv(n,t);for(const n of qb.values())Iv(n,t);return!0}function Qo(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Zt(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $b={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},br=new Oi("app","Firebase",$b);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hb{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ln("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw br.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bi=Ob;function Cw(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:hh,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw br.create("bad-app-name",{appName:String(i)});if(n||(n=yw()),!n)throw br.create("no-options");const o=Lu.get(i);if(o){if(zr(n,o.options)&&zr(r,o.config))return o;throw br.create("duplicate-app",{appName:i})}const s=new Q2(i);for(const c of ph.values())s.addComponent(c);const u=new Hb(n,r,s);return Lu.set(i,u),u}function Gp(t=hh){const e=Lu.get(t);if(!e&&t===hh&&yw())return Cw();if(!e)throw br.create("no-app",{appName:t});return e}function bt(t,e,n){let r=Bb[t]??t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const s=[`Unable to register library "${r}" with version "${e}":`];i&&s.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&o&&s.push("and"),o&&s.push(`version name "${e}" contains illegal characters (whitespace or "/")`),rr.warn(s.join(" "));return}_n(new ln(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gb="firebase-heartbeat-database",zb=1,Ca="firebase-heartbeat-store";let Kf=null;function Iw(){return Kf||(Kf=Ec(Gb,zb,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ca)}catch(n){console.warn(n)}}}}).catch(t=>{throw br.create("idb-open",{originalErrorMessage:t.message})})),Kf}async function Wb(t){try{const n=(await Iw()).transaction(Ca),r=await n.objectStore(Ca).get(ww(t));return await n.done,r}catch(e){if(e instanceof Cn)rr.warn(e.message);else{const n=br.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});rr.warn(n.message)}}}async function wv(t,e){try{const r=(await Iw()).transaction(Ca,"readwrite");await r.objectStore(Ca).put(e,ww(t)),await r.done}catch(n){if(n instanceof Cn)rr.warn(n.message);else{const r=br.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});rr.warn(r.message)}}}function ww(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kb=1024,Jb=30;class Yb{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Xb(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=Sv();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>Jb){const s=Zb(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){rr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Sv(),{heartbeatsToSend:r,unsentEntries:i}=Qb(this._heartbeatsCache.heartbeats),o=Vu(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return rr.warn(n),""}}}function Sv(){return new Date().toISOString().substring(0,10)}function Qb(t,e=Kb){const n=[];let r=t.slice();for(const i of t){const o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),Av(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Av(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Xb{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return b2()?O2().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Wb(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return wv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return wv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Av(t){return Vu(JSON.stringify({version:2,heartbeats:t})).length}function Zb(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jb(t){_n(new ln("platform-logger",e=>new fb(e),"PRIVATE")),_n(new ln("heartbeat",e=>new Yb(e),"PRIVATE")),bt(dh,Cv,t),bt(dh,Cv,"esm2020"),bt("fire-js","")}jb("");var eO="firebase",tO="12.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */bt(eO,tO,"app");function Sw(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const nO=Sw,Aw=new Oi("auth","Firebase",Sw());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uu=new $p("@firebase/auth");function rO(t,...e){Uu.logLevel<=le.WARN&&Uu.warn(`Auth (${Bi}): ${t}`,...e)}function Xl(t,...e){Uu.logLevel<=le.ERROR&&Uu.error(`Auth (${Bi}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vn(t,...e){throw zp(t,...e)}function Vn(t,...e){return zp(t,...e)}function Rw(t,e,n){const r={...nO(),[e]:n};return new Oi("auth","Firebase",r).create(e,{appName:t.name})}function Or(t){return Rw(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function zp(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return Aw.create(t,...e)}function Q(t,e,...n){if(!t)throw zp(e,...n)}function Yn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Xl(e),new Error(e)}function ir(t,e){t||Yn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mh(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function iO(){return Rv()==="http:"||Rv()==="https:"}function Rv(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oO(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(iO()||V2()||"connection"in navigator)?navigator.onLine:!0}function sO(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ba{constructor(e,n){this.shortDelay=e,this.longDelay=n,ir(n>e,"Short delay should be less than long delay!"),this.isMobile=M2()||L2()}get(){return oO()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wp(t,e){ir(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pw{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Yn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Yn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Yn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aO={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lO=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],uO=new Ba(3e4,6e4);function qi(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function ri(t,e,n,r,i={}){return kw(t,i,async()=>{let o={},s={};r&&(e==="GET"?s=r:o={body:JSON.stringify(r)});const u=Oa({key:t.config.apiKey,...s}).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const f={method:e,headers:c,...o};return D2()||(f.referrerPolicy="no-referrer"),t.emulatorConfig&&ni(t.emulatorConfig.host)&&(f.credentials="include"),Pw.fetch()(await Nw(t,t.config.apiHost,n,u),f)})}async function kw(t,e,n){t._canInitEmulator=!1;const r={...aO,...e};try{const i=new fO(t),o=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const s=await o.json();if("needConfirmation"in s)throw Pl(t,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{const u=o.ok?s.errorMessage:s.error.message,[c,f]=u.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Pl(t,"credential-already-in-use",s);if(c==="EMAIL_EXISTS")throw Pl(t,"email-already-in-use",s);if(c==="USER_DISABLED")throw Pl(t,"user-disabled",s);const h=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw Rw(t,h,f);vn(t,h)}}catch(i){if(i instanceof Cn)throw i;vn(t,"network-request-failed",{message:String(i)})}}async function Cc(t,e,n,r,i={}){const o=await ri(t,e,n,r,i);return"mfaPendingCredential"in o&&vn(t,"multi-factor-auth-required",{_serverResponse:o}),o}async function Nw(t,e,n,r){const i=`${e}${n}?${r}`,o=t,s=o.config.emulator?Wp(t.config,i):`${t.config.apiScheme}://${i}`;return lO.includes(n)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s}function cO(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class fO{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Vn(this.auth,"network-request-failed")),uO.get())})}}function Pl(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Vn(t,e,r);return i.customData._tokenResponse=n,i}function Pv(t){return t!==void 0&&t.enterprise!==void 0}class dO{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return cO(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function hO(t,e){return ri(t,"GET","/v2/recaptchaConfig",qi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pO(t,e){return ri(t,"POST","/v1/accounts:delete",e)}async function Fu(t,e){return ri(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function js(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function mO(t,e=!1){const n=Pe(t),r=await n.getIdToken(e),i=Kp(r);Q(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const o=typeof i.firebase=="object"?i.firebase:void 0,s=o==null?void 0:o.sign_in_provider;return{claims:i,token:r,authTime:js(Jf(i.auth_time)),issuedAtTime:js(Jf(i.iat)),expirationTime:js(Jf(i.exp)),signInProvider:s||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function Jf(t){return Number(t)*1e3}function Kp(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Xl("JWT malformed, contained fewer than 3 sections"),null;try{const i=pw(n);return i?JSON.parse(i):(Xl("Failed to decode base64 JWT payload"),null)}catch(i){return Xl("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function kv(t){const e=Kp(t);return Q(e,"internal-error"),Q(typeof e.exp<"u","internal-error"),Q(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ia(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Cn&&gO(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function gO({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yO{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gh{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=js(this.lastLoginAt),this.creationTime=js(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bu(t){var p;const e=t.auth,n=await t.getIdToken(),r=await Ia(t,Fu(e,{idToken:n}));Q(r==null?void 0:r.users.length,e,"internal-error");const i=r.users[0];t._notifyReloadListener(i);const o=(p=i.providerUserInfo)!=null&&p.length?Mw(i.providerUserInfo):[],s=vO(t.providerData,o),u=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!(s!=null&&s.length),f=u?c:!1,h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new gh(i.createdAt,i.lastLoginAt),isAnonymous:f};Object.assign(t,h)}async function _O(t){const e=Pe(t);await bu(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function vO(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function Mw(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TO(t,e){const n=await kw(t,{},async()=>{const r=Oa({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,s=await Nw(t,i,"/v1/token",`key=${o}`),u=await t._getAdditionalHeaders();u["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:u,body:r};return t.emulatorConfig&&ni(t.emulatorConfig.host)&&(c.credentials="include"),Pw.fetch()(s,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function EO(t,e){return ri(t,"POST","/v2/accounts:revokeToken",qi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Q(e.idToken,"internal-error"),Q(typeof e.idToken<"u","internal-error"),Q(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):kv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Q(e.length!==0,"internal-error");const n=kv(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Q(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:o}=await TO(e,n);this.updateTokensAndExpiration(r,i,Number(o))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:o}=n,s=new Io;return r&&(Q(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(Q(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(Q(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Io,this.toJSON())}_performRefresh(){return Yn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gr(t,e){Q(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class pn{constructor({uid:e,auth:n,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new yO(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new gh(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await Ia(this,this.stsTokenManager.getToken(this.auth,e));return Q(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return mO(this,e)}reload(){return _O(this)}_assign(e){this!==e&&(Q(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new pn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Q(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await bu(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Zt(this.auth.app))return Promise.reject(Or(this.auth));const e=await this.getIdToken();return await Ia(this,pO(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,i=n.email??void 0,o=n.phoneNumber??void 0,s=n.photoURL??void 0,u=n.tenantId??void 0,c=n._redirectEventId??void 0,f=n.createdAt??void 0,h=n.lastLoginAt??void 0,{uid:p,emailVerified:m,isAnonymous:_,providerData:I,stsTokenManager:P}=n;Q(p&&P,e,"internal-error");const x=Io.fromJSON(this.name,P);Q(typeof p=="string",e,"internal-error"),gr(r,e.name),gr(i,e.name),Q(typeof m=="boolean",e,"internal-error"),Q(typeof _=="boolean",e,"internal-error"),gr(o,e.name),gr(s,e.name),gr(u,e.name),gr(c,e.name),gr(f,e.name),gr(h,e.name);const S=new pn({uid:p,auth:e,email:i,emailVerified:m,displayName:r,isAnonymous:_,photoURL:s,phoneNumber:o,tenantId:u,stsTokenManager:x,createdAt:f,lastLoginAt:h});return I&&Array.isArray(I)&&(S.providerData=I.map(C=>({...C}))),c&&(S._redirectEventId=c),S}static async _fromIdTokenResponse(e,n,r=!1){const i=new Io;i.updateFromServerResponse(n);const o=new pn({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await bu(o),o}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];Q(i.localId!==void 0,"internal-error");const o=i.providerUserInfo!==void 0?Mw(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!(o!=null&&o.length),u=new Io;u.updateFromIdToken(r);const c=new pn({uid:i.localId,auth:e,stsTokenManager:u,isAnonymous:s}),f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new gh(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(o!=null&&o.length)};return Object.assign(c,f),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nv=new Map;function Qn(t){ir(t instanceof Function,"Expected a class definition");let e=Nv.get(t);return e?(ir(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Nv.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xw{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}xw.type="NONE";const Mv=xw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zl(t,e,n){return`firebase:${t}:${e}:${n}`}class wo{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:o}=this.auth;this.fullUserKey=Zl(this.userKey,i.apiKey,o),this.fullPersistenceKey=Zl("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Fu(this.auth,{idToken:e}).catch(()=>{});return n?pn._fromGetAccountInfoResponse(this.auth,n,e):null}return pn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new wo(Qn(Mv),e,r);const i=(await Promise.all(n.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let o=i[0]||Qn(Mv);const s=Zl(r,e.config.apiKey,e.name);let u=null;for(const f of n)try{const h=await f._get(s);if(h){let p;if(typeof h=="string"){const m=await Fu(e,{idToken:h}).catch(()=>{});if(!m)break;p=await pn._fromGetAccountInfoResponse(e,m,h)}else p=pn._fromJSON(e,h);f!==o&&(u=p),o=f;break}}catch{}const c=i.filter(f=>f._shouldAllowMigration);return!o._shouldAllowMigration||!c.length?new wo(o,e,r):(o=c[0],u&&await o._set(s,u.toJSON()),await Promise.all(n.map(async f=>{if(f!==o)try{await f._remove(s)}catch{}})),new wo(o,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xv(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Uw(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Dw(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(bw(e))return"Blackberry";if(Ow(e))return"Webos";if(Vw(e))return"Safari";if((e.includes("chrome/")||Lw(e))&&!e.includes("edge/"))return"Chrome";if(Fw(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Dw(t=vt()){return/firefox\//i.test(t)}function Vw(t=vt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Lw(t=vt()){return/crios\//i.test(t)}function Uw(t=vt()){return/iemobile/i.test(t)}function Fw(t=vt()){return/android/i.test(t)}function bw(t=vt()){return/blackberry/i.test(t)}function Ow(t=vt()){return/webos/i.test(t)}function Jp(t=vt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function CO(t=vt()){var e;return Jp(t)&&!!((e=window.navigator)!=null&&e.standalone)}function IO(){return U2()&&document.documentMode===10}function Bw(t=vt()){return Jp(t)||Fw(t)||Ow(t)||bw(t)||/windows phone/i.test(t)||Uw(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qw(t,e=[]){let n;switch(t){case"Browser":n=xv(vt());break;case"Worker":n=`${xv(vt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Bi}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wO{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=o=>new Promise((s,u)=>{try{const c=e(o);s(c)}catch(c){u(c)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SO(t,e={}){return ri(t,"GET","/v2/passwordPolicy",qi(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AO=6;class RO{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??AO,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PO{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Dv(this),this.idTokenSubscription=new Dv(this),this.beforeStateQueue=new wO(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Aw,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Qn(n)),this._initializationPromise=this.queue(async()=>{var r,i,o;if(!this._deleted&&(this.persistenceManager=await wo.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((i=this._popupRedirectResolver)!=null&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)==null?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Fu(this,{idToken:e}),r=await pn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var o;if(Zt(this.app)){const s=this.app.settings.authIdToken;return s?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(u,u))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const s=(o=this.redirectUser)==null?void 0:o._redirectEventId,u=r==null?void 0:r._redirectEventId,c=await this.tryRedirectSignIn(e);(!s||s===u)&&(c!=null&&c.user)&&(r=c.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(s){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Q(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await bu(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=sO()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Zt(this.app))return Promise.reject(Or(this));const n=e?Pe(e):null;return n&&Q(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Q(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Zt(this.app)?Promise.reject(Or(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Zt(this.app)?Promise.reject(Or(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Qn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await SO(this),n=new RO(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Oi("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await EO(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Qn(e)||this._popupRedirectResolver;Q(n,this,"argument-error"),this.redirectPersistenceManager=await wo.create(this,[Qn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let s=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(Q(u,this,"internal-error"),u.then(()=>{s||o(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,i);return()=>{s=!0,c()}}else{const c=e.addObserver(n);return()=>{s=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Q(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=qw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var i;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((i=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:i.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(Zt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&rO(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Xo(t){return Pe(t)}class Dv{constructor(e){this.auth=e,this.observer=null,this.addObserver=G2(n=>this.observer=n)}get next(){return Q(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ic={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function kO(t){Ic=t}function $w(t){return Ic.loadJS(t)}function NO(){return Ic.recaptchaEnterpriseScript}function MO(){return Ic.gapiScript}function xO(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class DO{constructor(){this.enterprise=new VO}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class VO{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const LO="recaptcha-enterprise",Hw="NO_RECAPTCHA";class UO{constructor(e){this.type=LO,this.auth=Xo(e)}async verify(e="verify",n=!1){async function r(o){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(s,u)=>{hO(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{const f=new dO(c);return o.tenantId==null?o._agentRecaptchaConfig=f:o._tenantRecaptchaConfigs[o.tenantId]=f,s(f.siteKey)}}).catch(c=>{u(c)})})}function i(o,s,u){const c=window.grecaptcha;Pv(c)?c.enterprise.ready(()=>{c.enterprise.execute(o,{action:e}).then(f=>{s(f)}).catch(()=>{s(Hw)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new DO().execute("siteKey",{action:"verify"}):new Promise((o,s)=>{r(this.auth).then(u=>{if(!n&&Pv(window.grecaptcha))i(u,o,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let c=NO();c.length!==0&&(c+=u),$w(c).then(()=>{i(u,o,s)}).catch(f=>{s(f)})}}).catch(u=>{s(u)})})}}async function Vv(t,e,n,r=!1,i=!1){const o=new UO(t);let s;if(i)s=Hw;else try{s=await o.verify(n)}catch{s=await o.verify(n,!0)}const u={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in u){const c=u.phoneEnrollmentInfo.phoneNumber,f=u.phoneEnrollmentInfo.recaptchaToken;Object.assign(u,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:f,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in u){const c=u.phoneSignInInfo.recaptchaToken;Object.assign(u,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return u}return r?Object.assign(u,{captchaResp:s}):Object.assign(u,{captchaResponse:s}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),u}async function Lv(t,e,n,r,i){var o;if((o=t._getRecaptchaConfig())!=null&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await Vv(t,e,n,n==="getOobCode");return r(t,s)}else return r(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const u=await Vv(t,e,n,n==="getOobCode");return r(t,u)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FO(t,e){const n=Qo(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),o=n.getOptions();if(zr(o,e??{}))return i;vn(i,"already-initialized")}return n.initialize({options:e})}function bO(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Qn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function OO(t,e,n){const r=Xo(t);Q(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,o=Gw(e),{host:s,port:u}=BO(e),c=u===null?"":`:${u}`,f={url:`${o}//${s}${c}/`},h=Object.freeze({host:s,port:u,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){Q(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Q(zr(f,r.config.emulator)&&zr(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=f,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,ni(s)?(Bp(`${o}//${s}${c}`),qp("Auth",!0)):qO()}function Gw(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function BO(t){const e=Gw(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const o=i[1];return{host:o,port:Uv(r.substr(o.length+1))}}else{const[o,s]=r.split(":");return{host:o,port:Uv(s)}}}function Uv(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function qO(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yp{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Yn("not implemented")}_getIdTokenResponse(e){return Yn("not implemented")}_linkToIdToken(e,n){return Yn("not implemented")}_getReauthenticationResolver(e){return Yn("not implemented")}}async function $O(t,e){return ri(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HO(t,e){return Cc(t,"POST","/v1/accounts:signInWithPassword",qi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GO(t,e){return Cc(t,"POST","/v1/accounts:signInWithEmailLink",qi(t,e))}async function zO(t,e){return Cc(t,"POST","/v1/accounts:signInWithEmailLink",qi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wa extends Yp{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new wa(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new wa(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Lv(e,n,"signInWithPassword",HO);case"emailLink":return GO(e,{email:this._email,oobCode:this._password});default:vn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Lv(e,r,"signUpPassword",$O);case"emailLink":return zO(e,{idToken:n,email:this._email,oobCode:this._password});default:vn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function So(t,e){return Cc(t,"POST","/v1/accounts:signInWithIdp",qi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WO="http://localhost";class ki extends Yp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ki(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):vn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...o}=n;if(!r||!i)return null;const s=new ki(r,i);return s.idToken=o.idToken||void 0,s.accessToken=o.accessToken||void 0,s.secret=o.secret,s.nonce=o.nonce,s.pendingToken=o.pendingToken||null,s}_getIdTokenResponse(e){const n=this.buildRequest();return So(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,So(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,So(e,n)}buildRequest(){const e={requestUri:WO,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Oa(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KO(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function JO(t){const e=Us(Fs(t)).link,n=e?Us(Fs(e)).deep_link_id:null,r=Us(Fs(t)).deep_link_id;return(r?Us(Fs(r)).link:null)||r||n||e||t}class Qp{constructor(e){const n=Us(Fs(e)),r=n.apiKey??null,i=n.oobCode??null,o=KO(n.mode??null);Q(r&&i&&o,"argument-error"),this.apiKey=r,this.operation=o,this.code=i,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=JO(e);try{return new Qp(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zo{constructor(){this.providerId=Zo.PROVIDER_ID}static credential(e,n){return wa._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Qp.parseLink(n);return Q(r,"argument-error"),wa._fromEmailAndCode(e,r.code,r.tenantId)}}Zo.PROVIDER_ID="password";Zo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Zo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zw{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qa extends zw{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr extends qa{constructor(){super("facebook.com")}static credential(e){return ki._fromParams({providerId:Cr.PROVIDER_ID,signInMethod:Cr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Cr.credentialFromTaggedObject(e)}static credentialFromError(e){return Cr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Cr.credential(e.oauthAccessToken)}catch{return null}}}Cr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Cr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir extends qa{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ki._fromParams({providerId:Ir.PROVIDER_ID,signInMethod:Ir.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Ir.credentialFromTaggedObject(e)}static credentialFromError(e){return Ir.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Ir.credential(n,r)}catch{return null}}}Ir.GOOGLE_SIGN_IN_METHOD="google.com";Ir.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr extends qa{constructor(){super("github.com")}static credential(e){return ki._fromParams({providerId:wr.PROVIDER_ID,signInMethod:wr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return wr.credentialFromTaggedObject(e)}static credentialFromError(e){return wr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return wr.credential(e.oauthAccessToken)}catch{return null}}}wr.GITHUB_SIGN_IN_METHOD="github.com";wr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr extends qa{constructor(){super("twitter.com")}static credential(e,n){return ki._fromParams({providerId:Sr.PROVIDER_ID,signInMethod:Sr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Sr.credentialFromTaggedObject(e)}static credentialFromError(e){return Sr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Sr.credential(n,r)}catch{return null}}}Sr.TWITTER_SIGN_IN_METHOD="twitter.com";Sr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const o=await pn._fromIdTokenResponse(e,r,i),s=Fv(r);return new Lo({user:o,providerId:s,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=Fv(r);return new Lo({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function Fv(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ou extends Cn{constructor(e,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Ou.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Ou(e,n,r,i)}}function Ww(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Ou._fromErrorAndOperation(t,o,e,r):o})}async function YO(t,e,n=!1){const r=await Ia(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Lo._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QO(t,e,n=!1){const{auth:r}=t;if(Zt(r.app))return Promise.reject(Or(r));const i="reauthenticate";try{const o=await Ia(t,Ww(r,i,e,t),n);Q(o.idToken,r,"internal-error");const s=Kp(o.idToken);Q(s,r,"internal-error");const{sub:u}=s;return Q(t.uid===u,r,"user-mismatch"),Lo._forOperation(t,i,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&vn(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kw(t,e,n=!1){if(Zt(t.app))return Promise.reject(Or(t));const r="signIn",i=await Ww(t,r,e),o=await Lo._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(o.user),o}async function XO(t,e){return Kw(Xo(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZO(t){const e=Xo(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function jO(t,e,n){return Zt(t.app)?Promise.reject(Or(t)):XO(Pe(t),Zo.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&ZO(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e4(t,e){return Pe(t).setPersistence(e)}function t4(t,e,n,r){return Pe(t).onIdTokenChanged(e,n,r)}function n4(t,e,n){return Pe(t).beforeAuthStateChanged(e,n)}function r4(t,e,n,r){return Pe(t).onAuthStateChanged(e,n,r)}function i4(t){return Pe(t).signOut()}const Bu="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jw{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Bu,"1"),this.storage.removeItem(Bu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o4=1e3,s4=10;class Yw extends Jw{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Bw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((s,u,c)=>{this.notifyListeners(s,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const s=this.storage.getItem(r);!n&&this.localCache[r]===s||this.notifyListeners(r,s)},o=this.storage.getItem(r);IO()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,s4):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},o4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Yw.type="LOCAL";const Qw=Yw;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xw extends Jw{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Xw.type="SESSION";const Xp=Xw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a4(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new wc(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:o}=n.data,s=this.handlersMap[i];if(!(s!=null&&s.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const u=Array.from(s).map(async f=>f(n.origin,o)),c=await a4(u);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}wc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zp(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l4{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((u,c)=>{const f=Zp("",20);i.port1.start();const h=setTimeout(()=>{c(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(p){const m=p;if(m.data.eventId===f)switch(m.data.status){case"ack":clearTimeout(h),o=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),u(m.data.response);break;default:clearTimeout(h),clearTimeout(o),c(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:f,data:n},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ln(){return window}function u4(t){Ln().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zw(){return typeof Ln().WorkerGlobalScope<"u"&&typeof Ln().importScripts=="function"}async function c4(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function f4(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function d4(){return Zw()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jw="firebaseLocalStorageDb",h4=1,qu="firebaseLocalStorage",eS="fbase_key";class $a{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Sc(t,e){return t.transaction([qu],e?"readwrite":"readonly").objectStore(qu)}function p4(){const t=indexedDB.deleteDatabase(jw);return new $a(t).toPromise()}function yh(){const t=indexedDB.open(jw,h4);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(qu,{keyPath:eS})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(qu)?e(r):(r.close(),await p4(),e(await yh()))})})}async function bv(t,e,n){const r=Sc(t,!0).put({[eS]:e,value:n});return new $a(r).toPromise()}async function m4(t,e){const n=Sc(t,!1).get(e),r=await new $a(n).toPromise();return r===void 0?null:r.value}function Ov(t,e){const n=Sc(t,!0).delete(e);return new $a(n).toPromise()}const g4=800,y4=3;class tS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await yh(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>y4)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Zw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=wc._getInstance(d4()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await c4(),!this.activeServiceWorker)return;this.sender=new l4(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||f4()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await yh();return await bv(e,Bu,"1"),await Ov(e,Bu),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>bv(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>m4(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Ov(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const o=Sc(i,!1).getAll();return new $a(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:o}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(o)&&(this.notifyListeners(i,o),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),g4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}tS.type="LOCAL";const _4=tS;new Ba(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v4(t,e){return e?Qn(e):(Q(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jp extends Yp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return So(e,this._buildIdpRequest())}_linkToIdToken(e,n){return So(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return So(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function T4(t){return Kw(t.auth,new jp(t),t.bypassAuthState)}function E4(t){const{auth:e,user:n}=t;return Q(n,e,"internal-error"),QO(n,new jp(t),t.bypassAuthState)}async function C4(t){const{auth:e,user:n}=t;return Q(n,e,"internal-error"),YO(n,new jp(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nS{constructor(e,n,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:o,error:s,type:u}=e;if(s){this.reject(s);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(c))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return T4;case"linkViaPopup":case"linkViaRedirect":return C4;case"reauthViaPopup":case"reauthViaRedirect":return E4;default:vn(this.auth,"internal-error")}}resolve(e){ir(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ir(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I4=new Ba(2e3,1e4);class ho extends nS{constructor(e,n,r,i,o){super(e,n,i,o),this.provider=r,this.authWindow=null,this.pollId=null,ho.currentPopupAction&&ho.currentPopupAction.cancel(),ho.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Q(e,this.auth,"internal-error"),e}async onExecution(){ir(this.filter.length===1,"Popup operations only handle one event");const e=Zp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Vn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Vn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ho.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Vn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,I4.get())};e()}}ho.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w4="pendingRedirect",jl=new Map;class S4 extends nS{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=jl.get(this.auth._key());if(!e){try{const r=await A4(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}jl.set(this.auth._key(),e)}return this.bypassAuthState||jl.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function A4(t,e){const n=k4(e),r=P4(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function R4(t,e){jl.set(t._key(),e)}function P4(t){return Qn(t._redirectPersistence)}function k4(t){return Zl(w4,t.config.apiKey,t.name)}async function N4(t,e,n=!1){if(Zt(t.app))return Promise.reject(Or(t));const r=Xo(t),i=v4(r,e),s=await new S4(r,i,n).execute();return s&&!n&&(delete s.user._redirectEventId,await r._persistUserIfCurrent(s.user),await r._setRedirectUser(null,e)),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M4=10*60*1e3;class x4{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!D4(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!rS(e)){const i=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(Vn(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=M4&&this.cachedEventUids.clear(),this.cachedEventUids.has(Bv(e))}saveEventToCache(e){this.cachedEventUids.add(Bv(e)),this.lastProcessedEventTime=Date.now()}}function Bv(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function rS({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function D4(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return rS(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function V4(t,e={}){return ri(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L4=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,U4=/^https?/;async function F4(t){if(t.config.emulator)return;const{authorizedDomains:e}=await V4(t);for(const n of e)try{if(b4(n))return}catch{}vn(t,"unauthorized-domain")}function b4(t){const e=mh(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const s=new URL(t);return s.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&s.hostname===r}if(!U4.test(n))return!1;if(L4.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O4=new Ba(3e4,6e4);function qv(){const t=Ln().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function B4(t){return new Promise((e,n)=>{var i,o,s;function r(){qv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{qv(),n(Vn(t,"network-request-failed"))},timeout:O4.get()})}if((o=(i=Ln().gapi)==null?void 0:i.iframes)!=null&&o.Iframe)e(gapi.iframes.getContext());else if((s=Ln().gapi)!=null&&s.load)r();else{const u=xO("iframefcb");return Ln()[u]=()=>{gapi.load?r():n(Vn(t,"network-request-failed"))},$w(`${MO()}?onload=${u}`).catch(c=>n(c))}}).catch(e=>{throw eu=null,e})}let eu=null;function q4(t){return eu=eu||B4(t),eu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $4=new Ba(5e3,15e3),H4="__/auth/iframe",G4="emulator/auth/iframe",z4={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},W4=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function K4(t){const e=t.config;Q(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Wp(e,G4):`https://${t.config.authDomain}/${H4}`,r={apiKey:e.apiKey,appName:t.name,v:Bi},i=W4.get(t.config.apiHost);i&&(r.eid=i);const o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${Oa(r).slice(1)}`}async function J4(t){const e=await q4(t),n=Ln().gapi;return Q(n,t,"internal-error"),e.open({where:document.body,url:K4(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:z4,dontclear:!0},r=>new Promise(async(i,o)=>{await r.restyle({setHideOnLeave:!1});const s=Vn(t,"network-request-failed"),u=Ln().setTimeout(()=>{o(s)},$4.get());function c(){Ln().clearTimeout(u),i(r)}r.ping(c).then(c,()=>{o(s)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y4={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Q4=500,X4=600,Z4="_blank",j4="http://localhost";class $v{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function eB(t,e,n,r=Q4,i=X4){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString();let u="";const c={...Y4,width:r.toString(),height:i.toString(),top:o,left:s},f=vt().toLowerCase();n&&(u=Lw(f)?Z4:n),Dw(f)&&(e=e||j4,c.scrollbars="yes");const h=Object.entries(c).reduce((m,[_,I])=>`${m}${_}=${I},`,"");if(CO(f)&&u!=="_self")return tB(e||"",u),new $v(null);const p=window.open(e||"",u,h);Q(p,t,"popup-blocked");try{p.focus()}catch{}return new $v(p)}function tB(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nB="__/auth/handler",rB="emulator/auth/handler",iB=encodeURIComponent("fac");async function Hv(t,e,n,r,i,o){Q(t.config.authDomain,t,"auth-domain-config-required"),Q(t.config.apiKey,t,"invalid-api-key");const s={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Bi,eventId:i};if(e instanceof zw){e.setDefaultLanguage(t.languageCode),s.providerId=e.providerId||"",H2(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,p]of Object.entries({}))s[h]=p}if(e instanceof qa){const h=e.getScopes().filter(p=>p!=="");h.length>0&&(s.scopes=h.join(","))}t.tenantId&&(s.tid=t.tenantId);const u=s;for(const h of Object.keys(u))u[h]===void 0&&delete u[h];const c=await t._getAppCheckToken(),f=c?`#${iB}=${encodeURIComponent(c)}`:"";return`${oB(t)}?${Oa(u).slice(1)}${f}`}function oB({config:t}){return t.emulator?Wp(t,rB):`https://${t.authDomain}/${nB}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yf="webStorageSupport";class sB{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Xp,this._completeRedirectFn=N4,this._overrideRedirectResult=R4}async _openPopup(e,n,r,i){var s;ir((s=this.eventManagers[e._key()])==null?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await Hv(e,n,r,mh(),i);return eB(e,o,Zp())}async _openRedirect(e,n,r,i){await this._originValidation(e);const o=await Hv(e,n,r,mh(),i);return u4(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:o}=this.eventManagers[n];return i?Promise.resolve(i):(ir(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await J4(e),r=new x4(e);return n.register("authEvent",i=>(Q(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Yf,{type:Yf},i=>{var s;const o=(s=i==null?void 0:i[0])==null?void 0:s[Yf];o!==void 0&&n(!!o),vn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=F4(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Bw()||Vw()||Jp()}}const aB=sB;var Gv="@firebase/auth",zv="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lB{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Q(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uB(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function cB(t){_n(new ln("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:u}=r.options;Q(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:s,authDomain:u,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:qw(t)},f=new PO(r,i,o,c);return bO(f,n),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),_n(new ln("auth-internal",e=>{const n=Xo(e.getProvider("auth").getImmediate());return(r=>new lB(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),bt(Gv,zv,uB(t)),bt(Gv,zv,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fB=5*60,dB=_w("authIdTokenMaxAge")||fB;let Wv=null;const hB=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>dB)return;const i=n==null?void 0:n.token;Wv!==i&&(Wv=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function pB(t=Gp()){const e=Qo(t,"auth");if(e.isInitialized())return e.getImmediate();const n=FO(t,{popupRedirectResolver:aB,persistence:[_4,Qw,Xp]}),r=_w("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const s=hB(o.toString());n4(n,s,()=>s(n.currentUser)),t4(n,u=>s(u))}}const i=mw("auth");return i&&OO(n,`http://${i}`),n}function mB(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}kO({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const o=Vn("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",mB().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});cB("Browser");var Kv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Br,iS;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(v,T){function w(){}w.prototype=T.prototype,v.F=T.prototype,v.prototype=new w,v.prototype.constructor=v,v.D=function(R,k,M){for(var N=Array(arguments.length-2),ve=2;ve<arguments.length;ve++)N[ve-2]=arguments[ve];return T.prototype[k].apply(R,N)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(v,T,w){w||(w=0);const R=Array(16);if(typeof T=="string")for(var k=0;k<16;++k)R[k]=T.charCodeAt(w++)|T.charCodeAt(w++)<<8|T.charCodeAt(w++)<<16|T.charCodeAt(w++)<<24;else for(k=0;k<16;++k)R[k]=T[w++]|T[w++]<<8|T[w++]<<16|T[w++]<<24;T=v.g[0],w=v.g[1],k=v.g[2];let M=v.g[3],N;N=T+(M^w&(k^M))+R[0]+3614090360&4294967295,T=w+(N<<7&4294967295|N>>>25),N=M+(k^T&(w^k))+R[1]+3905402710&4294967295,M=T+(N<<12&4294967295|N>>>20),N=k+(w^M&(T^w))+R[2]+606105819&4294967295,k=M+(N<<17&4294967295|N>>>15),N=w+(T^k&(M^T))+R[3]+3250441966&4294967295,w=k+(N<<22&4294967295|N>>>10),N=T+(M^w&(k^M))+R[4]+4118548399&4294967295,T=w+(N<<7&4294967295|N>>>25),N=M+(k^T&(w^k))+R[5]+1200080426&4294967295,M=T+(N<<12&4294967295|N>>>20),N=k+(w^M&(T^w))+R[6]+2821735955&4294967295,k=M+(N<<17&4294967295|N>>>15),N=w+(T^k&(M^T))+R[7]+4249261313&4294967295,w=k+(N<<22&4294967295|N>>>10),N=T+(M^w&(k^M))+R[8]+1770035416&4294967295,T=w+(N<<7&4294967295|N>>>25),N=M+(k^T&(w^k))+R[9]+2336552879&4294967295,M=T+(N<<12&4294967295|N>>>20),N=k+(w^M&(T^w))+R[10]+4294925233&4294967295,k=M+(N<<17&4294967295|N>>>15),N=w+(T^k&(M^T))+R[11]+2304563134&4294967295,w=k+(N<<22&4294967295|N>>>10),N=T+(M^w&(k^M))+R[12]+1804603682&4294967295,T=w+(N<<7&4294967295|N>>>25),N=M+(k^T&(w^k))+R[13]+4254626195&4294967295,M=T+(N<<12&4294967295|N>>>20),N=k+(w^M&(T^w))+R[14]+2792965006&4294967295,k=M+(N<<17&4294967295|N>>>15),N=w+(T^k&(M^T))+R[15]+1236535329&4294967295,w=k+(N<<22&4294967295|N>>>10),N=T+(k^M&(w^k))+R[1]+4129170786&4294967295,T=w+(N<<5&4294967295|N>>>27),N=M+(w^k&(T^w))+R[6]+3225465664&4294967295,M=T+(N<<9&4294967295|N>>>23),N=k+(T^w&(M^T))+R[11]+643717713&4294967295,k=M+(N<<14&4294967295|N>>>18),N=w+(M^T&(k^M))+R[0]+3921069994&4294967295,w=k+(N<<20&4294967295|N>>>12),N=T+(k^M&(w^k))+R[5]+3593408605&4294967295,T=w+(N<<5&4294967295|N>>>27),N=M+(w^k&(T^w))+R[10]+38016083&4294967295,M=T+(N<<9&4294967295|N>>>23),N=k+(T^w&(M^T))+R[15]+3634488961&4294967295,k=M+(N<<14&4294967295|N>>>18),N=w+(M^T&(k^M))+R[4]+3889429448&4294967295,w=k+(N<<20&4294967295|N>>>12),N=T+(k^M&(w^k))+R[9]+568446438&4294967295,T=w+(N<<5&4294967295|N>>>27),N=M+(w^k&(T^w))+R[14]+3275163606&4294967295,M=T+(N<<9&4294967295|N>>>23),N=k+(T^w&(M^T))+R[3]+4107603335&4294967295,k=M+(N<<14&4294967295|N>>>18),N=w+(M^T&(k^M))+R[8]+1163531501&4294967295,w=k+(N<<20&4294967295|N>>>12),N=T+(k^M&(w^k))+R[13]+2850285829&4294967295,T=w+(N<<5&4294967295|N>>>27),N=M+(w^k&(T^w))+R[2]+4243563512&4294967295,M=T+(N<<9&4294967295|N>>>23),N=k+(T^w&(M^T))+R[7]+1735328473&4294967295,k=M+(N<<14&4294967295|N>>>18),N=w+(M^T&(k^M))+R[12]+2368359562&4294967295,w=k+(N<<20&4294967295|N>>>12),N=T+(w^k^M)+R[5]+4294588738&4294967295,T=w+(N<<4&4294967295|N>>>28),N=M+(T^w^k)+R[8]+2272392833&4294967295,M=T+(N<<11&4294967295|N>>>21),N=k+(M^T^w)+R[11]+1839030562&4294967295,k=M+(N<<16&4294967295|N>>>16),N=w+(k^M^T)+R[14]+4259657740&4294967295,w=k+(N<<23&4294967295|N>>>9),N=T+(w^k^M)+R[1]+2763975236&4294967295,T=w+(N<<4&4294967295|N>>>28),N=M+(T^w^k)+R[4]+1272893353&4294967295,M=T+(N<<11&4294967295|N>>>21),N=k+(M^T^w)+R[7]+4139469664&4294967295,k=M+(N<<16&4294967295|N>>>16),N=w+(k^M^T)+R[10]+3200236656&4294967295,w=k+(N<<23&4294967295|N>>>9),N=T+(w^k^M)+R[13]+681279174&4294967295,T=w+(N<<4&4294967295|N>>>28),N=M+(T^w^k)+R[0]+3936430074&4294967295,M=T+(N<<11&4294967295|N>>>21),N=k+(M^T^w)+R[3]+3572445317&4294967295,k=M+(N<<16&4294967295|N>>>16),N=w+(k^M^T)+R[6]+76029189&4294967295,w=k+(N<<23&4294967295|N>>>9),N=T+(w^k^M)+R[9]+3654602809&4294967295,T=w+(N<<4&4294967295|N>>>28),N=M+(T^w^k)+R[12]+3873151461&4294967295,M=T+(N<<11&4294967295|N>>>21),N=k+(M^T^w)+R[15]+530742520&4294967295,k=M+(N<<16&4294967295|N>>>16),N=w+(k^M^T)+R[2]+3299628645&4294967295,w=k+(N<<23&4294967295|N>>>9),N=T+(k^(w|~M))+R[0]+4096336452&4294967295,T=w+(N<<6&4294967295|N>>>26),N=M+(w^(T|~k))+R[7]+1126891415&4294967295,M=T+(N<<10&4294967295|N>>>22),N=k+(T^(M|~w))+R[14]+2878612391&4294967295,k=M+(N<<15&4294967295|N>>>17),N=w+(M^(k|~T))+R[5]+4237533241&4294967295,w=k+(N<<21&4294967295|N>>>11),N=T+(k^(w|~M))+R[12]+1700485571&4294967295,T=w+(N<<6&4294967295|N>>>26),N=M+(w^(T|~k))+R[3]+2399980690&4294967295,M=T+(N<<10&4294967295|N>>>22),N=k+(T^(M|~w))+R[10]+4293915773&4294967295,k=M+(N<<15&4294967295|N>>>17),N=w+(M^(k|~T))+R[1]+2240044497&4294967295,w=k+(N<<21&4294967295|N>>>11),N=T+(k^(w|~M))+R[8]+1873313359&4294967295,T=w+(N<<6&4294967295|N>>>26),N=M+(w^(T|~k))+R[15]+4264355552&4294967295,M=T+(N<<10&4294967295|N>>>22),N=k+(T^(M|~w))+R[6]+2734768916&4294967295,k=M+(N<<15&4294967295|N>>>17),N=w+(M^(k|~T))+R[13]+1309151649&4294967295,w=k+(N<<21&4294967295|N>>>11),N=T+(k^(w|~M))+R[4]+4149444226&4294967295,T=w+(N<<6&4294967295|N>>>26),N=M+(w^(T|~k))+R[11]+3174756917&4294967295,M=T+(N<<10&4294967295|N>>>22),N=k+(T^(M|~w))+R[2]+718787259&4294967295,k=M+(N<<15&4294967295|N>>>17),N=w+(M^(k|~T))+R[9]+3951481745&4294967295,v.g[0]=v.g[0]+T&4294967295,v.g[1]=v.g[1]+(k+(N<<21&4294967295|N>>>11))&4294967295,v.g[2]=v.g[2]+k&4294967295,v.g[3]=v.g[3]+M&4294967295}r.prototype.v=function(v,T){T===void 0&&(T=v.length);const w=T-this.blockSize,R=this.C;let k=this.h,M=0;for(;M<T;){if(k==0)for(;M<=w;)i(this,v,M),M+=this.blockSize;if(typeof v=="string"){for(;M<T;)if(R[k++]=v.charCodeAt(M++),k==this.blockSize){i(this,R),k=0;break}}else for(;M<T;)if(R[k++]=v[M++],k==this.blockSize){i(this,R),k=0;break}}this.h=k,this.o+=T},r.prototype.A=function(){var v=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);v[0]=128;for(var T=1;T<v.length-8;++T)v[T]=0;T=this.o*8;for(var w=v.length-8;w<v.length;++w)v[w]=T&255,T/=256;for(this.v(v),v=Array(16),T=0,w=0;w<4;++w)for(let R=0;R<32;R+=8)v[T++]=this.g[w]>>>R&255;return v};function o(v,T){var w=u;return Object.prototype.hasOwnProperty.call(w,v)?w[v]:w[v]=T(v)}function s(v,T){this.h=T;const w=[];let R=!0;for(let k=v.length-1;k>=0;k--){const M=v[k]|0;R&&M==T||(w[k]=M,R=!1)}this.g=w}var u={};function c(v){return-128<=v&&v<128?o(v,function(T){return new s([T|0],T<0?-1:0)}):new s([v|0],v<0?-1:0)}function f(v){if(isNaN(v)||!isFinite(v))return p;if(v<0)return x(f(-v));const T=[];let w=1;for(let R=0;v>=w;R++)T[R]=v/w|0,w*=4294967296;return new s(T,0)}function h(v,T){if(v.length==0)throw Error("number format error: empty string");if(T=T||10,T<2||36<T)throw Error("radix out of range: "+T);if(v.charAt(0)=="-")return x(h(v.substring(1),T));if(v.indexOf("-")>=0)throw Error('number format error: interior "-" character');const w=f(Math.pow(T,8));let R=p;for(let M=0;M<v.length;M+=8){var k=Math.min(8,v.length-M);const N=parseInt(v.substring(M,M+k),T);k<8?(k=f(Math.pow(T,k)),R=R.j(k).add(f(N))):(R=R.j(w),R=R.add(f(N)))}return R}var p=c(0),m=c(1),_=c(16777216);t=s.prototype,t.m=function(){if(P(this))return-x(this).m();let v=0,T=1;for(let w=0;w<this.g.length;w++){const R=this.i(w);v+=(R>=0?R:4294967296+R)*T,T*=4294967296}return v},t.toString=function(v){if(v=v||10,v<2||36<v)throw Error("radix out of range: "+v);if(I(this))return"0";if(P(this))return"-"+x(this).toString(v);const T=f(Math.pow(v,6));var w=this;let R="";for(;;){const k=D(w,T).g;w=S(w,k.j(T));let M=((w.g.length>0?w.g[0]:w.h)>>>0).toString(v);if(w=k,I(w))return M+R;for(;M.length<6;)M="0"+M;R=M+R}},t.i=function(v){return v<0?0:v<this.g.length?this.g[v]:this.h};function I(v){if(v.h!=0)return!1;for(let T=0;T<v.g.length;T++)if(v.g[T]!=0)return!1;return!0}function P(v){return v.h==-1}t.l=function(v){return v=S(this,v),P(v)?-1:I(v)?0:1};function x(v){const T=v.g.length,w=[];for(let R=0;R<T;R++)w[R]=~v.g[R];return new s(w,~v.h).add(m)}t.abs=function(){return P(this)?x(this):this},t.add=function(v){const T=Math.max(this.g.length,v.g.length),w=[];let R=0;for(let k=0;k<=T;k++){let M=R+(this.i(k)&65535)+(v.i(k)&65535),N=(M>>>16)+(this.i(k)>>>16)+(v.i(k)>>>16);R=N>>>16,M&=65535,N&=65535,w[k]=N<<16|M}return new s(w,w[w.length-1]&-2147483648?-1:0)};function S(v,T){return v.add(x(T))}t.j=function(v){if(I(this)||I(v))return p;if(P(this))return P(v)?x(this).j(x(v)):x(x(this).j(v));if(P(v))return x(this.j(x(v)));if(this.l(_)<0&&v.l(_)<0)return f(this.m()*v.m());const T=this.g.length+v.g.length,w=[];for(var R=0;R<2*T;R++)w[R]=0;for(R=0;R<this.g.length;R++)for(let k=0;k<v.g.length;k++){const M=this.i(R)>>>16,N=this.i(R)&65535,ve=v.i(k)>>>16,ye=v.i(k)&65535;w[2*R+2*k]+=N*ye,C(w,2*R+2*k),w[2*R+2*k+1]+=M*ye,C(w,2*R+2*k+1),w[2*R+2*k+1]+=N*ve,C(w,2*R+2*k+1),w[2*R+2*k+2]+=M*ve,C(w,2*R+2*k+2)}for(v=0;v<T;v++)w[v]=w[2*v+1]<<16|w[2*v];for(v=T;v<2*T;v++)w[v]=0;return new s(w,0)};function C(v,T){for(;(v[T]&65535)!=v[T];)v[T+1]+=v[T]>>>16,v[T]&=65535,T++}function A(v,T){this.g=v,this.h=T}function D(v,T){if(I(T))throw Error("division by zero");if(I(v))return new A(p,p);if(P(v))return T=D(x(v),T),new A(x(T.g),x(T.h));if(P(T))return T=D(v,x(T)),new A(x(T.g),T.h);if(v.g.length>30){if(P(v)||P(T))throw Error("slowDivide_ only works with positive integers.");for(var w=m,R=T;R.l(v)<=0;)w=F(w),R=F(R);var k=b(w,1),M=b(R,1);for(R=b(R,2),w=b(w,2);!I(R);){var N=M.add(R);N.l(v)<=0&&(k=k.add(w),M=N),R=b(R,1),w=b(w,1)}return T=S(v,k.j(T)),new A(k,T)}for(k=p;v.l(T)>=0;){for(w=Math.max(1,Math.floor(v.m()/T.m())),R=Math.ceil(Math.log(w)/Math.LN2),R=R<=48?1:Math.pow(2,R-48),M=f(w),N=M.j(T);P(N)||N.l(v)>0;)w-=R,M=f(w),N=M.j(T);I(M)&&(M=m),k=k.add(M),v=S(v,N)}return new A(k,v)}t.B=function(v){return D(this,v).h},t.and=function(v){const T=Math.max(this.g.length,v.g.length),w=[];for(let R=0;R<T;R++)w[R]=this.i(R)&v.i(R);return new s(w,this.h&v.h)},t.or=function(v){const T=Math.max(this.g.length,v.g.length),w=[];for(let R=0;R<T;R++)w[R]=this.i(R)|v.i(R);return new s(w,this.h|v.h)},t.xor=function(v){const T=Math.max(this.g.length,v.g.length),w=[];for(let R=0;R<T;R++)w[R]=this.i(R)^v.i(R);return new s(w,this.h^v.h)};function F(v){const T=v.g.length+1,w=[];for(let R=0;R<T;R++)w[R]=v.i(R)<<1|v.i(R-1)>>>31;return new s(w,v.h)}function b(v,T){const w=T>>5;T%=32;const R=v.g.length-w,k=[];for(let M=0;M<R;M++)k[M]=T>0?v.i(M+w)>>>T|v.i(M+w+1)<<32-T:v.i(M+w);return new s(k,v.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,iS=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.B,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=f,s.fromString=h,Br=s}).apply(typeof Kv<"u"?Kv:typeof self<"u"?self:typeof window<"u"?window:{});var kl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var oS,bs,sS,tu,_h,aS,lS,uS;(function(){var t,e=Object.defineProperty;function n(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof kl=="object"&&kl];for(var g=0;g<d.length;++g){var y=d[g];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var r=n(this);function i(d,g){if(g)e:{var y=r;d=d.split(".");for(var E=0;E<d.length-1;E++){var L=d[E];if(!(L in y))break e;y=y[L]}d=d[d.length-1],E=y[d],g=g(E),g!=E&&g!=null&&e(y,d,{configurable:!0,writable:!0,value:g})}}i("Symbol.dispose",function(d){return d||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(d){return d||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(d){return d||function(g){var y=[],E;for(E in g)Object.prototype.hasOwnProperty.call(g,E)&&y.push([E,g[E]]);return y}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},s=this||self;function u(d){var g=typeof d;return g=="object"&&d!=null||g=="function"}function c(d,g,y){return d.call.apply(d.bind,arguments)}function f(d,g,y){return f=c,f.apply(null,arguments)}function h(d,g){var y=Array.prototype.slice.call(arguments,1);return function(){var E=y.slice();return E.push.apply(E,arguments),d.apply(this,E)}}function p(d,g){function y(){}y.prototype=g.prototype,d.Z=g.prototype,d.prototype=new y,d.prototype.constructor=d,d.Ob=function(E,L,U){for(var H=Array(arguments.length-2),re=2;re<arguments.length;re++)H[re-2]=arguments[re];return g.prototype[L].apply(E,H)}}var m=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?d=>d&&AsyncContext.Snapshot.wrap(d):d=>d;function _(d){const g=d.length;if(g>0){const y=Array(g);for(let E=0;E<g;E++)y[E]=d[E];return y}return[]}function I(d,g){for(let E=1;E<arguments.length;E++){const L=arguments[E];var y=typeof L;if(y=y!="object"?y:L?Array.isArray(L)?"array":y:"null",y=="array"||y=="object"&&typeof L.length=="number"){y=d.length||0;const U=L.length||0;d.length=y+U;for(let H=0;H<U;H++)d[y+H]=L[H]}else d.push(L)}}class P{constructor(g,y){this.i=g,this.j=y,this.h=0,this.g=null}get(){let g;return this.h>0?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function x(d){s.setTimeout(()=>{throw d},0)}function S(){var d=v;let g=null;return d.g&&(g=d.g,d.g=d.g.next,d.g||(d.h=null),g.next=null),g}class C{constructor(){this.h=this.g=null}add(g,y){const E=A.get();E.set(g,y),this.h?this.h.next=E:this.g=E,this.h=E}}var A=new P(()=>new D,d=>d.reset());class D{constructor(){this.next=this.g=this.h=null}set(g,y){this.h=g,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let F,b=!1,v=new C,T=()=>{const d=Promise.resolve(void 0);F=()=>{d.then(w)}};function w(){for(var d;d=S();){try{d.h.call(d.g)}catch(y){x(y)}var g=A;g.j(d),g.h<100&&(g.h++,d.next=g.g,g.g=d)}b=!1}function R(){this.u=this.u,this.C=this.C}R.prototype.u=!1,R.prototype.dispose=function(){this.u||(this.u=!0,this.N())},R.prototype[Symbol.dispose]=function(){this.dispose()},R.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function k(d,g){this.type=d,this.g=this.target=g,this.defaultPrevented=!1}k.prototype.h=function(){this.defaultPrevented=!0};var M=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var d=!1,g=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const y=()=>{};s.addEventListener("test",y,g),s.removeEventListener("test",y,g)}catch{}return d}();function N(d){return/^[\s\xa0]*$/.test(d)}function ve(d,g){k.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d&&this.init(d,g)}p(ve,k),ve.prototype.init=function(d,g){const y=this.type=d.type,E=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;this.target=d.target||d.srcElement,this.g=g,g=d.relatedTarget,g||(y=="mouseover"?g=d.fromElement:y=="mouseout"&&(g=d.toElement)),this.relatedTarget=g,E?(this.clientX=E.clientX!==void 0?E.clientX:E.pageX,this.clientY=E.clientY!==void 0?E.clientY:E.pageY,this.screenX=E.screenX||0,this.screenY=E.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=d.pointerType,this.state=d.state,this.i=d,d.defaultPrevented&&ve.Z.h.call(this)},ve.prototype.h=function(){ve.Z.h.call(this);const d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var ye="closure_listenable_"+(Math.random()*1e6|0),Ot=0;function qn(d,g,y,E,L){this.listener=d,this.proxy=null,this.src=g,this.type=y,this.capture=!!E,this.ha=L,this.key=++Ot,this.da=this.fa=!1}function G(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function Z(d,g,y){for(const E in d)g.call(y,d[E],E,d)}function te(d,g){for(const y in d)g.call(void 0,d[y],y,d)}function Te(d){const g={};for(const y in d)g[y]=d[y];return g}const Me="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function $n(d,g){let y,E;for(let L=1;L<arguments.length;L++){E=arguments[L];for(y in E)d[y]=E[y];for(let U=0;U<Me.length;U++)y=Me[U],Object.prototype.hasOwnProperty.call(E,y)&&(d[y]=E[y])}}function Pt(d){this.src=d,this.g={},this.h=0}Pt.prototype.add=function(d,g,y,E,L){const U=d.toString();d=this.g[U],d||(d=this.g[U]=[],this.h++);const H=kt(d,g,E,L);return H>-1?(g=d[H],y||(g.fa=!1)):(g=new qn(g,this.src,U,!!E,L),g.fa=y,d.push(g)),g};function In(d,g){const y=g.type;if(y in d.g){var E=d.g[y],L=Array.prototype.indexOf.call(E,g,void 0),U;(U=L>=0)&&Array.prototype.splice.call(E,L,1),U&&(G(g),d.g[y].length==0&&(delete d.g[y],d.h--))}}function kt(d,g,y,E){for(let L=0;L<d.length;++L){const U=d[L];if(!U.da&&U.listener==g&&U.capture==!!y&&U.ha==E)return L}return-1}var wn="closure_lm_"+(Math.random()*1e6|0),os={};function q(d,g,y,E,L){if(Array.isArray(g)){for(let U=0;U<g.length;U++)q(d,g[U],y,E,L);return null}return y=Qa(y),d&&d[ye]?d.J(g,y,u(E)?!!E.capture:!1,L):oe(d,g,y,!1,E,L)}function oe(d,g,y,E,L,U){if(!g)throw Error("Invalid event type");const H=u(L)?!!L.capture:!!L;let re=Hn(d);if(re||(d[wn]=re=new Pt(d)),y=re.add(g,y,E,H,U),y.proxy)return y;if(E=ie(),y.proxy=E,E.src=d,E.listener=y,d.addEventListener)M||(L=H),L===void 0&&(L=!1),d.addEventListener(g.toString(),E,L);else if(d.attachEvent)d.attachEvent(ke(g.toString()),E);else if(d.addListener&&d.removeListener)d.addListener(E);else throw Error("addEventListener and attachEvent are unavailable.");return y}function ie(){function d(y){return g.call(d.src,d.listener,y)}const g=qe;return d}function pe(d,g,y,E,L){if(Array.isArray(g))for(var U=0;U<g.length;U++)pe(d,g[U],y,E,L);else E=u(E)?!!E.capture:!!E,y=Qa(y),d&&d[ye]?(d=d.i,U=String(g).toString(),U in d.g&&(g=d.g[U],y=kt(g,y,E,L),y>-1&&(G(g[y]),Array.prototype.splice.call(g,y,1),g.length==0&&(delete d.g[U],d.h--)))):d&&(d=Hn(d))&&(g=d.g[g.toString()],d=-1,g&&(d=kt(g,y,E,L)),(y=d>-1?g[d]:null)&&ne(y))}function ne(d){if(typeof d!="number"&&d&&!d.da){var g=d.src;if(g&&g[ye])In(g.i,d);else{var y=d.type,E=d.proxy;g.removeEventListener?g.removeEventListener(y,E,d.capture):g.detachEvent?g.detachEvent(ke(y),E):g.addListener&&g.removeListener&&g.removeListener(E),(y=Hn(g))?(In(y,d),y.h==0&&(y.src=null,g[wn]=null)):G(d)}}}function ke(d){return d in os?os[d]:os[d]="on"+d}function qe(d,g){if(d.da)d=!0;else{g=new ve(g,this);const y=d.listener,E=d.ha||d.src;d.fa&&ne(d),d=y.call(E,g)}return d}function Hn(d){return d=d[wn],d instanceof Pt?d:null}var Tt="__closure_events_fn_"+(Math.random()*1e9>>>0);function Qa(d){return typeof d=="function"?d:(d[Tt]||(d[Tt]=function(g){return d.handleEvent(g)}),d[Tt])}function ut(){R.call(this),this.i=new Pt(this),this.M=this,this.G=null}p(ut,R),ut.prototype[ye]=!0,ut.prototype.removeEventListener=function(d,g,y,E){pe(this,d,g,y,E)};function Et(d,g){var y,E=d.G;if(E)for(y=[];E;E=E.G)y.push(E);if(d=d.M,E=g.type||g,typeof g=="string")g=new k(g,d);else if(g instanceof k)g.target=g.target||d;else{var L=g;g=new k(E,d),$n(g,L)}L=!0;let U,H;if(y)for(H=y.length-1;H>=0;H--)U=g.g=y[H],L=Xa(U,E,!0,g)&&L;if(U=g.g=d,L=Xa(U,E,!0,g)&&L,L=Xa(U,E,!1,g)&&L,y)for(H=0;H<y.length;H++)U=g.g=y[H],L=Xa(U,E,!1,g)&&L}ut.prototype.N=function(){if(ut.Z.N.call(this),this.i){var d=this.i;for(const g in d.g){const y=d.g[g];for(let E=0;E<y.length;E++)G(y[E]);delete d.g[g],d.h--}}this.G=null},ut.prototype.J=function(d,g,y,E){return this.i.add(String(d),g,!1,y,E)},ut.prototype.K=function(d,g,y,E){return this.i.add(String(d),g,!0,y,E)};function Xa(d,g,y,E){if(g=d.i.g[String(g)],!g)return!0;g=g.concat();let L=!0;for(let U=0;U<g.length;++U){const H=g[U];if(H&&!H.da&&H.capture==y){const re=H.listener,Je=H.ha||H.src;H.fa&&In(d.i,H),L=re.call(Je,E)!==!1&&L}}return L&&!E.defaultPrevented}function RR(d,g){if(typeof d!="function")if(d&&typeof d.handleEvent=="function")d=f(d.handleEvent,d);else throw Error("Invalid listener argument");return Number(g)>2147483647?-1:s.setTimeout(d,g||0)}function zm(d){d.g=RR(()=>{d.g=null,d.i&&(d.i=!1,zm(d))},d.l);const g=d.h;d.h=null,d.m.apply(null,g)}class PR extends R{constructor(g,y){super(),this.m=g,this.l=y,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:zm(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ss(d){R.call(this),this.h=d,this.g={}}p(ss,R);var Wm=[];function Km(d){Z(d.g,function(g,y){this.g.hasOwnProperty(y)&&ne(g)},d),d.g={}}ss.prototype.N=function(){ss.Z.N.call(this),Km(this)},ss.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Yc=s.JSON.stringify,kR=s.JSON.parse,NR=class{stringify(d){return s.JSON.stringify(d,void 0)}parse(d){return s.JSON.parse(d,void 0)}};function Jm(){}function Ym(){}var as={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Qc(){k.call(this,"d")}p(Qc,k);function Xc(){k.call(this,"c")}p(Xc,k);var si={},Qm=null;function Za(){return Qm=Qm||new ut}si.Ia="serverreachability";function Xm(d){k.call(this,si.Ia,d)}p(Xm,k);function ls(d){const g=Za();Et(g,new Xm(g))}si.STAT_EVENT="statevent";function Zm(d,g){k.call(this,si.STAT_EVENT,d),this.stat=g}p(Zm,k);function Ct(d){const g=Za();Et(g,new Zm(g,d))}si.Ja="timingevent";function jm(d,g){k.call(this,si.Ja,d),this.size=g}p(jm,k);function us(d,g){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){d()},g)}function cs(){this.g=!0}cs.prototype.ua=function(){this.g=!1};function MR(d,g,y,E,L,U){d.info(function(){if(d.g)if(U){var H="",re=U.split("&");for(let _e=0;_e<re.length;_e++){var Je=re[_e].split("=");if(Je.length>1){const Ze=Je[0];Je=Je[1];const An=Ze.split("_");H=An.length>=2&&An[1]=="type"?H+(Ze+"="+Je+"&"):H+(Ze+"=redacted&")}}}else H=null;else H=U;return"XMLHTTP REQ ("+E+") [attempt "+L+"]: "+g+`
`+y+`
`+H})}function xR(d,g,y,E,L,U,H){d.info(function(){return"XMLHTTP RESP ("+E+") [ attempt "+L+"]: "+g+`
`+y+`
`+U+" "+H})}function Gi(d,g,y,E){d.info(function(){return"XMLHTTP TEXT ("+g+"): "+VR(d,y)+(E?" "+E:"")})}function DR(d,g){d.info(function(){return"TIMEOUT: "+g})}cs.prototype.info=function(){};function VR(d,g){if(!d.g)return g;if(!g)return null;try{const U=JSON.parse(g);if(U){for(d=0;d<U.length;d++)if(Array.isArray(U[d])){var y=U[d];if(!(y.length<2)){var E=y[1];if(Array.isArray(E)&&!(E.length<1)){var L=E[0];if(L!="noop"&&L!="stop"&&L!="close")for(let H=1;H<E.length;H++)E[H]=""}}}}return Yc(U)}catch{return g}}var ja={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},eg={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},tg;function Zc(){}p(Zc,Jm),Zc.prototype.g=function(){return new XMLHttpRequest},tg=new Zc;function fs(d){return encodeURIComponent(String(d))}function LR(d){var g=1;d=d.split(":");const y=[];for(;g>0&&d.length;)y.push(d.shift()),g--;return d.length&&y.push(d.join(":")),y}function ur(d,g,y,E){this.j=d,this.i=g,this.l=y,this.S=E||1,this.V=new ss(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ng}function ng(){this.i=null,this.g="",this.h=!1}var rg={},jc={};function ef(d,g,y){d.M=1,d.A=tl(Sn(g)),d.u=y,d.R=!0,ig(d,null)}function ig(d,g){d.F=Date.now(),el(d),d.B=Sn(d.A);var y=d.B,E=d.S;Array.isArray(E)||(E=[String(E)]),yg(y.i,"t",E),d.C=0,y=d.j.L,d.h=new ng,d.g=Lg(d.j,y?g:null,!d.u),d.P>0&&(d.O=new PR(f(d.Y,d,d.g),d.P)),g=d.V,y=d.g,E=d.ba;var L="readystatechange";Array.isArray(L)||(L&&(Wm[0]=L.toString()),L=Wm);for(let U=0;U<L.length;U++){const H=q(y,L[U],E||g.handleEvent,!1,g.h||g);if(!H)break;g.g[H.key]=H}g=d.J?Te(d.J):{},d.u?(d.v||(d.v="POST"),g["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.B,d.v,d.u,g)):(d.v="GET",d.g.ea(d.B,d.v,null,g)),ls(),MR(d.i,d.v,d.B,d.l,d.S,d.u)}ur.prototype.ba=function(d){d=d.target;const g=this.O;g&&dr(d)==3?g.j():this.Y(d)},ur.prototype.Y=function(d){try{if(d==this.g)e:{const re=dr(this.g),Je=this.g.ya(),_e=this.g.ca();if(!(re<3)&&(re!=3||this.g&&(this.h.h||this.g.la()||wg(this.g)))){this.K||re!=4||Je==7||(Je==8||_e<=0?ls(3):ls(2)),tf(this);var g=this.g.ca();this.X=g;var y=UR(this);if(this.o=g==200,xR(this.i,this.v,this.B,this.l,this.S,re,g),this.o){if(this.U&&!this.L){t:{if(this.g){var E,L=this.g;if((E=L.g?L.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!N(E)){var U=E;break t}}U=null}if(d=U)Gi(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,nf(this,d);else{this.o=!1,this.m=3,Ct(12),ai(this),ds(this);break e}}if(this.R){d=!0;let Ze;for(;!this.K&&this.C<y.length;)if(Ze=FR(this,y),Ze==jc){re==4&&(this.m=4,Ct(14),d=!1),Gi(this.i,this.l,null,"[Incomplete Response]");break}else if(Ze==rg){this.m=4,Ct(15),Gi(this.i,this.l,y,"[Invalid Chunk]"),d=!1;break}else Gi(this.i,this.l,Ze,null),nf(this,Ze);if(og(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),re!=4||y.length!=0||this.h.h||(this.m=1,Ct(16),d=!1),this.o=this.o&&d,!d)Gi(this.i,this.l,y,"[Invalid Chunked Response]"),ai(this),ds(this);else if(y.length>0&&!this.W){this.W=!0;var H=this.j;H.g==this&&H.aa&&!H.P&&(H.j.info("Great, no buffering proxy detected. Bytes received: "+y.length),ff(H),H.P=!0,Ct(11))}}else Gi(this.i,this.l,y,null),nf(this,y);re==4&&ai(this),this.o&&!this.K&&(re==4?Mg(this.j,this):(this.o=!1,el(this)))}else XR(this.g),g==400&&y.indexOf("Unknown SID")>0?(this.m=3,Ct(12)):(this.m=0,Ct(13)),ai(this),ds(this)}}}catch{}finally{}};function UR(d){if(!og(d))return d.g.la();const g=wg(d.g);if(g==="")return"";let y="";const E=g.length,L=dr(d.g)==4;if(!d.h.i){if(typeof TextDecoder>"u")return ai(d),ds(d),"";d.h.i=new s.TextDecoder}for(let U=0;U<E;U++)d.h.h=!0,y+=d.h.i.decode(g[U],{stream:!(L&&U==E-1)});return g.length=0,d.h.g+=y,d.C=0,d.h.g}function og(d){return d.g?d.v=="GET"&&d.M!=2&&d.j.Aa:!1}function FR(d,g){var y=d.C,E=g.indexOf(`
`,y);return E==-1?jc:(y=Number(g.substring(y,E)),isNaN(y)?rg:(E+=1,E+y>g.length?jc:(g=g.slice(E,E+y),d.C=E+y,g)))}ur.prototype.cancel=function(){this.K=!0,ai(this)};function el(d){d.T=Date.now()+d.H,sg(d,d.H)}function sg(d,g){if(d.D!=null)throw Error("WatchDog timer not null");d.D=us(f(d.aa,d),g)}function tf(d){d.D&&(s.clearTimeout(d.D),d.D=null)}ur.prototype.aa=function(){this.D=null;const d=Date.now();d-this.T>=0?(DR(this.i,this.B),this.M!=2&&(ls(),Ct(17)),ai(this),this.m=2,ds(this)):sg(this,this.T-d)};function ds(d){d.j.I==0||d.K||Mg(d.j,d)}function ai(d){tf(d);var g=d.O;g&&typeof g.dispose=="function"&&g.dispose(),d.O=null,Km(d.V),d.g&&(g=d.g,d.g=null,g.abort(),g.dispose())}function nf(d,g){try{var y=d.j;if(y.I!=0&&(y.g==d||rf(y.h,d))){if(!d.L&&rf(y.h,d)&&y.I==3){try{var E=y.Ba.g.parse(g)}catch{E=null}if(Array.isArray(E)&&E.length==3){var L=E;if(L[0]==0){e:if(!y.v){if(y.g)if(y.g.F+3e3<d.F)sl(y),il(y);else break e;cf(y),Ct(18)}}else y.xa=L[1],0<y.xa-y.K&&L[2]<37500&&y.F&&y.A==0&&!y.C&&(y.C=us(f(y.Va,y),6e3));ug(y.h)<=1&&y.ta&&(y.ta=void 0)}else ui(y,11)}else if((d.L||y.g==d)&&sl(y),!N(g))for(L=y.Ba.g.parse(g),g=0;g<L.length;g++){let _e=L[g];const Ze=_e[0];if(!(Ze<=y.K))if(y.K=Ze,_e=_e[1],y.I==2)if(_e[0]=="c"){y.M=_e[1],y.ba=_e[2];const An=_e[3];An!=null&&(y.ka=An,y.j.info("VER="+y.ka));const ci=_e[4];ci!=null&&(y.za=ci,y.j.info("SVER="+y.za));const hr=_e[5];hr!=null&&typeof hr=="number"&&hr>0&&(E=1.5*hr,y.O=E,y.j.info("backChannelRequestTimeoutMs_="+E)),E=y;const pr=d.g;if(pr){const ll=pr.g?pr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ll){var U=E.h;U.g||ll.indexOf("spdy")==-1&&ll.indexOf("quic")==-1&&ll.indexOf("h2")==-1||(U.j=U.l,U.g=new Set,U.h&&(of(U,U.h),U.h=null))}if(E.G){const df=pr.g?pr.g.getResponseHeader("X-HTTP-Session-Id"):null;df&&(E.wa=df,Ie(E.J,E.G,df))}}y.I=3,y.l&&y.l.ra(),y.aa&&(y.T=Date.now()-d.F,y.j.info("Handshake RTT: "+y.T+"ms")),E=y;var H=d;if(E.na=Vg(E,E.L?E.ba:null,E.W),H.L){cg(E.h,H);var re=H,Je=E.O;Je&&(re.H=Je),re.D&&(tf(re),el(re)),E.g=H}else kg(E);y.i.length>0&&ol(y)}else _e[0]!="stop"&&_e[0]!="close"||ui(y,7);else y.I==3&&(_e[0]=="stop"||_e[0]=="close"?_e[0]=="stop"?ui(y,7):uf(y):_e[0]!="noop"&&y.l&&y.l.qa(_e),y.A=0)}}ls(4)}catch{}}var bR=class{constructor(d,g){this.g=d,this.map=g}};function ag(d){this.l=d||10,s.PerformanceNavigationTiming?(d=s.performance.getEntriesByType("navigation"),d=d.length>0&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function lg(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function ug(d){return d.h?1:d.g?d.g.size:0}function rf(d,g){return d.h?d.h==g:d.g?d.g.has(g):!1}function of(d,g){d.g?d.g.add(g):d.h=g}function cg(d,g){d.h&&d.h==g?d.h=null:d.g&&d.g.has(g)&&d.g.delete(g)}ag.prototype.cancel=function(){if(this.i=fg(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function fg(d){if(d.h!=null)return d.i.concat(d.h.G);if(d.g!=null&&d.g.size!==0){let g=d.i;for(const y of d.g.values())g=g.concat(y.G);return g}return _(d.i)}var dg=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function OR(d,g){if(d){d=d.split("&");for(let y=0;y<d.length;y++){const E=d[y].indexOf("=");let L,U=null;E>=0?(L=d[y].substring(0,E),U=d[y].substring(E+1)):L=d[y],g(L,U?decodeURIComponent(U.replace(/\+/g," ")):"")}}}function cr(d){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let g;d instanceof cr?(this.l=d.l,hs(this,d.j),this.o=d.o,this.g=d.g,ps(this,d.u),this.h=d.h,sf(this,_g(d.i)),this.m=d.m):d&&(g=String(d).match(dg))?(this.l=!1,hs(this,g[1]||"",!0),this.o=ms(g[2]||""),this.g=ms(g[3]||"",!0),ps(this,g[4]),this.h=ms(g[5]||"",!0),sf(this,g[6]||"",!0),this.m=ms(g[7]||"")):(this.l=!1,this.i=new ys(null,this.l))}cr.prototype.toString=function(){const d=[];var g=this.j;g&&d.push(gs(g,hg,!0),":");var y=this.g;return(y||g=="file")&&(d.push("//"),(g=this.o)&&d.push(gs(g,hg,!0),"@"),d.push(fs(y).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.u,y!=null&&d.push(":",String(y))),(y=this.h)&&(this.g&&y.charAt(0)!="/"&&d.push("/"),d.push(gs(y,y.charAt(0)=="/"?$R:qR,!0))),(y=this.i.toString())&&d.push("?",y),(y=this.m)&&d.push("#",gs(y,GR)),d.join("")},cr.prototype.resolve=function(d){const g=Sn(this);let y=!!d.j;y?hs(g,d.j):y=!!d.o,y?g.o=d.o:y=!!d.g,y?g.g=d.g:y=d.u!=null;var E=d.h;if(y)ps(g,d.u);else if(y=!!d.h){if(E.charAt(0)!="/")if(this.g&&!this.h)E="/"+E;else{var L=g.h.lastIndexOf("/");L!=-1&&(E=g.h.slice(0,L+1)+E)}if(L=E,L==".."||L==".")E="";else if(L.indexOf("./")!=-1||L.indexOf("/.")!=-1){E=L.lastIndexOf("/",0)==0,L=L.split("/");const U=[];for(let H=0;H<L.length;){const re=L[H++];re=="."?E&&H==L.length&&U.push(""):re==".."?((U.length>1||U.length==1&&U[0]!="")&&U.pop(),E&&H==L.length&&U.push("")):(U.push(re),E=!0)}E=U.join("/")}else E=L}return y?g.h=E:y=d.i.toString()!=="",y?sf(g,_g(d.i)):y=!!d.m,y&&(g.m=d.m),g};function Sn(d){return new cr(d)}function hs(d,g,y){d.j=y?ms(g,!0):g,d.j&&(d.j=d.j.replace(/:$/,""))}function ps(d,g){if(g){if(g=Number(g),isNaN(g)||g<0)throw Error("Bad port number "+g);d.u=g}else d.u=null}function sf(d,g,y){g instanceof ys?(d.i=g,zR(d.i,d.l)):(y||(g=gs(g,HR)),d.i=new ys(g,d.l))}function Ie(d,g,y){d.i.set(g,y)}function tl(d){return Ie(d,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),d}function ms(d,g){return d?g?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function gs(d,g,y){return typeof d=="string"?(d=encodeURI(d).replace(g,BR),y&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function BR(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var hg=/[#\/\?@]/g,qR=/[#\?:]/g,$R=/[#\?]/g,HR=/[#\?@]/g,GR=/#/g;function ys(d,g){this.h=this.g=null,this.i=d||null,this.j=!!g}function li(d){d.g||(d.g=new Map,d.h=0,d.i&&OR(d.i,function(g,y){d.add(decodeURIComponent(g.replace(/\+/g," ")),y)}))}t=ys.prototype,t.add=function(d,g){li(this),this.i=null,d=zi(this,d);let y=this.g.get(d);return y||this.g.set(d,y=[]),y.push(g),this.h+=1,this};function pg(d,g){li(d),g=zi(d,g),d.g.has(g)&&(d.i=null,d.h-=d.g.get(g).length,d.g.delete(g))}function mg(d,g){return li(d),g=zi(d,g),d.g.has(g)}t.forEach=function(d,g){li(this),this.g.forEach(function(y,E){y.forEach(function(L){d.call(g,L,E,this)},this)},this)};function gg(d,g){li(d);let y=[];if(typeof g=="string")mg(d,g)&&(y=y.concat(d.g.get(zi(d,g))));else for(d=Array.from(d.g.values()),g=0;g<d.length;g++)y=y.concat(d[g]);return y}t.set=function(d,g){return li(this),this.i=null,d=zi(this,d),mg(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[g]),this.h+=1,this},t.get=function(d,g){return d?(d=gg(this,d),d.length>0?String(d[0]):g):g};function yg(d,g,y){pg(d,g),y.length>0&&(d.i=null,d.g.set(zi(d,g),_(y)),d.h+=y.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],g=Array.from(this.g.keys());for(let E=0;E<g.length;E++){var y=g[E];const L=fs(y);y=gg(this,y);for(let U=0;U<y.length;U++){let H=L;y[U]!==""&&(H+="="+fs(y[U])),d.push(H)}}return this.i=d.join("&")};function _g(d){const g=new ys;return g.i=d.i,d.g&&(g.g=new Map(d.g),g.h=d.h),g}function zi(d,g){return g=String(g),d.j&&(g=g.toLowerCase()),g}function zR(d,g){g&&!d.j&&(li(d),d.i=null,d.g.forEach(function(y,E){const L=E.toLowerCase();E!=L&&(pg(this,E),yg(this,L,y))},d)),d.j=g}function WR(d,g){const y=new cs;if(s.Image){const E=new Image;E.onload=h(fr,y,"TestLoadImage: loaded",!0,g,E),E.onerror=h(fr,y,"TestLoadImage: error",!1,g,E),E.onabort=h(fr,y,"TestLoadImage: abort",!1,g,E),E.ontimeout=h(fr,y,"TestLoadImage: timeout",!1,g,E),s.setTimeout(function(){E.ontimeout&&E.ontimeout()},1e4),E.src=d}else g(!1)}function KR(d,g){const y=new cs,E=new AbortController,L=setTimeout(()=>{E.abort(),fr(y,"TestPingServer: timeout",!1,g)},1e4);fetch(d,{signal:E.signal}).then(U=>{clearTimeout(L),U.ok?fr(y,"TestPingServer: ok",!0,g):fr(y,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(L),fr(y,"TestPingServer: error",!1,g)})}function fr(d,g,y,E,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),E(y)}catch{}}function JR(){this.g=new NR}function af(d){this.i=d.Sb||null,this.h=d.ab||!1}p(af,Jm),af.prototype.g=function(){return new nl(this.i,this.h)};function nl(d,g){ut.call(this),this.H=d,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}p(nl,ut),t=nl.prototype,t.open=function(d,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=d,this.D=g,this.readyState=1,vs(this)},t.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const g={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};d&&(g.body=d),(this.H||s).fetch(new Request(this.D,g)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,_s(this)),this.readyState=0},t.Pa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,vs(this)),this.g&&(this.readyState=3,vs(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof s.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;vg(this)}else d.text().then(this.Oa.bind(this),this.ga.bind(this))};function vg(d){d.j.read().then(d.Ma.bind(d)).catch(d.ga.bind(d))}t.Ma=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var g=d.value?d.value:new Uint8Array(0);(g=this.B.decode(g,{stream:!d.done}))&&(this.response=this.responseText+=g)}d.done?_s(this):vs(this),this.readyState==3&&vg(this)}},t.Oa=function(d){this.g&&(this.response=this.responseText=d,_s(this))},t.Na=function(d){this.g&&(this.response=d,_s(this))},t.ga=function(){this.g&&_s(this)};function _s(d){d.readyState=4,d.l=null,d.j=null,d.B=null,vs(d)}t.setRequestHeader=function(d,g){this.A.append(d,g)},t.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],g=this.h.entries();for(var y=g.next();!y.done;)y=y.value,d.push(y[0]+": "+y[1]),y=g.next();return d.join(`\r
`)};function vs(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(nl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function Tg(d){let g="";return Z(d,function(y,E){g+=E,g+=":",g+=y,g+=`\r
`}),g}function lf(d,g,y){e:{for(E in y){var E=!1;break e}E=!0}E||(y=Tg(y),typeof d=="string"?y!=null&&fs(y):Ie(d,g,y))}function Ue(d){ut.call(this),this.headers=new Map,this.L=d||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}p(Ue,ut);var YR=/^https?$/i,QR=["POST","PUT"];t=Ue.prototype,t.Fa=function(d){this.H=d},t.ea=function(d,g,y,E){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);g=g?g.toUpperCase():"GET",this.D=d,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():tg.g(),this.g.onreadystatechange=m(f(this.Ca,this));try{this.B=!0,this.g.open(g,String(d),!0),this.B=!1}catch(U){Eg(this,U);return}if(d=y||"",y=new Map(this.headers),E)if(Object.getPrototypeOf(E)===Object.prototype)for(var L in E)y.set(L,E[L]);else if(typeof E.keys=="function"&&typeof E.get=="function")for(const U of E.keys())y.set(U,E.get(U));else throw Error("Unknown input type for opt_headers: "+String(E));E=Array.from(y.keys()).find(U=>U.toLowerCase()=="content-type"),L=s.FormData&&d instanceof s.FormData,!(Array.prototype.indexOf.call(QR,g,void 0)>=0)||E||L||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[U,H]of y)this.g.setRequestHeader(U,H);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(d),this.v=!1}catch(U){Eg(this,U)}};function Eg(d,g){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=g,d.o=5,Cg(d),rl(d)}function Cg(d){d.A||(d.A=!0,Et(d,"complete"),Et(d,"error"))}t.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=d||7,Et(this,"complete"),Et(this,"abort"),rl(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),rl(this,!0)),Ue.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Ig(this):this.Xa())},t.Xa=function(){Ig(this)};function Ig(d){if(d.h&&typeof o<"u"){if(d.v&&dr(d)==4)setTimeout(d.Ca.bind(d),0);else if(Et(d,"readystatechange"),dr(d)==4){d.h=!1;try{const U=d.ca();e:switch(U){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var y;if(!(y=g)){var E;if(E=U===0){let H=String(d.D).match(dg)[1]||null;!H&&s.self&&s.self.location&&(H=s.self.location.protocol.slice(0,-1)),E=!YR.test(H?H.toLowerCase():"")}y=E}if(y)Et(d,"complete"),Et(d,"success");else{d.o=6;try{var L=dr(d)>2?d.g.statusText:""}catch{L=""}d.l=L+" ["+d.ca()+"]",Cg(d)}}finally{rl(d)}}}}function rl(d,g){if(d.g){d.m&&(clearTimeout(d.m),d.m=null);const y=d.g;d.g=null,g||Et(d,"ready");try{y.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function dr(d){return d.g?d.g.readyState:0}t.ca=function(){try{return dr(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(d){if(this.g){var g=this.g.responseText;return d&&g.indexOf(d)==0&&(g=g.substring(d.length)),kR(g)}};function wg(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.F){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function XR(d){const g={};d=(d.g&&dr(d)>=2&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let E=0;E<d.length;E++){if(N(d[E]))continue;var y=LR(d[E]);const L=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();const U=g[L]||[];g[L]=U,U.push(y)}te(g,function(E){return E.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ts(d,g,y){return y&&y.internalChannelParams&&y.internalChannelParams[d]||g}function Sg(d){this.za=0,this.i=[],this.j=new cs,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ts("failFast",!1,d),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ts("baseRetryDelayMs",5e3,d),this.Za=Ts("retryDelaySeedMs",1e4,d),this.Ta=Ts("forwardChannelMaxRetries",2,d),this.va=Ts("forwardChannelRequestTimeoutMs",2e4,d),this.ma=d&&d.xmlHttpFactory||void 0,this.Ua=d&&d.Rb||void 0,this.Aa=d&&d.useFetchStreams||!1,this.O=void 0,this.L=d&&d.supportsCrossDomainXhr||!1,this.M="",this.h=new ag(d&&d.concurrentRequestLimit),this.Ba=new JR,this.S=d&&d.fastHandshake||!1,this.R=d&&d.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=d&&d.Pb||!1,d&&d.ua&&this.j.ua(),d&&d.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&d&&d.detectBufferingProxy||!1,this.ia=void 0,d&&d.longPollingTimeout&&d.longPollingTimeout>0&&(this.ia=d.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Sg.prototype,t.ka=8,t.I=1,t.connect=function(d,g,y,E){Ct(0),this.W=d,this.H=g||{},y&&E!==void 0&&(this.H.OSID=y,this.H.OAID=E),this.F=this.X,this.J=Vg(this,null,this.W),ol(this)};function uf(d){if(Ag(d),d.I==3){var g=d.V++,y=Sn(d.J);if(Ie(y,"SID",d.M),Ie(y,"RID",g),Ie(y,"TYPE","terminate"),Es(d,y),g=new ur(d,d.j,g),g.M=2,g.A=tl(Sn(y)),y=!1,s.navigator&&s.navigator.sendBeacon)try{y=s.navigator.sendBeacon(g.A.toString(),"")}catch{}!y&&s.Image&&(new Image().src=g.A,y=!0),y||(g.g=Lg(g.j,null),g.g.ea(g.A)),g.F=Date.now(),el(g)}Dg(d)}function il(d){d.g&&(ff(d),d.g.cancel(),d.g=null)}function Ag(d){il(d),d.v&&(s.clearTimeout(d.v),d.v=null),sl(d),d.h.cancel(),d.m&&(typeof d.m=="number"&&s.clearTimeout(d.m),d.m=null)}function ol(d){if(!lg(d.h)&&!d.m){d.m=!0;var g=d.Ea;F||T(),b||(F(),b=!0),v.add(g,d),d.D=0}}function ZR(d,g){return ug(d.h)>=d.h.j-(d.m?1:0)?!1:d.m?(d.i=g.G.concat(d.i),!0):d.I==1||d.I==2||d.D>=(d.Sa?0:d.Ta)?!1:(d.m=us(f(d.Ea,d,g),xg(d,d.D)),d.D++,!0)}t.Ea=function(d){if(this.m)if(this.m=null,this.I==1){if(!d){this.V=Math.floor(Math.random()*1e5),d=this.V++;const L=new ur(this,this.j,d);let U=this.o;if(this.U&&(U?(U=Te(U),$n(U,this.U)):U=this.U),this.u!==null||this.R||(L.J=U,U=null),this.S)e:{for(var g=0,y=0;y<this.i.length;y++){t:{var E=this.i[y];if("__data__"in E.map&&(E=E.map.__data__,typeof E=="string")){E=E.length;break t}E=void 0}if(E===void 0)break;if(g+=E,g>4096){g=y;break e}if(g===4096||y===this.i.length-1){g=y+1;break e}}g=1e3}else g=1e3;g=Pg(this,L,g),y=Sn(this.J),Ie(y,"RID",d),Ie(y,"CVER",22),this.G&&Ie(y,"X-HTTP-Session-Id",this.G),Es(this,y),U&&(this.R?g="headers="+fs(Tg(U))+"&"+g:this.u&&lf(y,this.u,U)),of(this.h,L),this.Ra&&Ie(y,"TYPE","init"),this.S?(Ie(y,"$req",g),Ie(y,"SID","null"),L.U=!0,ef(L,y,null)):ef(L,y,g),this.I=2}}else this.I==3&&(d?Rg(this,d):this.i.length==0||lg(this.h)||Rg(this))};function Rg(d,g){var y;g?y=g.l:y=d.V++;const E=Sn(d.J);Ie(E,"SID",d.M),Ie(E,"RID",y),Ie(E,"AID",d.K),Es(d,E),d.u&&d.o&&lf(E,d.u,d.o),y=new ur(d,d.j,y,d.D+1),d.u===null&&(y.J=d.o),g&&(d.i=g.G.concat(d.i)),g=Pg(d,y,1e3),y.H=Math.round(d.va*.5)+Math.round(d.va*.5*Math.random()),of(d.h,y),ef(y,E,g)}function Es(d,g){d.H&&Z(d.H,function(y,E){Ie(g,E,y)}),d.l&&Z({},function(y,E){Ie(g,E,y)})}function Pg(d,g,y){y=Math.min(d.i.length,y);const E=d.l?f(d.l.Ka,d.l,d):null;e:{var L=d.i;let re=-1;for(;;){const Je=["count="+y];re==-1?y>0?(re=L[0].g,Je.push("ofs="+re)):re=0:Je.push("ofs="+re);let _e=!0;for(let Ze=0;Ze<y;Ze++){var U=L[Ze].g;const An=L[Ze].map;if(U-=re,U<0)re=Math.max(0,L[Ze].g-100),_e=!1;else try{U="req"+U+"_"||"";try{var H=An instanceof Map?An:Object.entries(An);for(const[ci,hr]of H){let pr=hr;u(hr)&&(pr=Yc(hr)),Je.push(U+ci+"="+encodeURIComponent(pr))}}catch(ci){throw Je.push(U+"type="+encodeURIComponent("_badmap")),ci}}catch{E&&E(An)}}if(_e){H=Je.join("&");break e}}H=void 0}return d=d.i.splice(0,y),g.G=d,H}function kg(d){if(!d.g&&!d.v){d.Y=1;var g=d.Da;F||T(),b||(F(),b=!0),v.add(g,d),d.A=0}}function cf(d){return d.g||d.v||d.A>=3?!1:(d.Y++,d.v=us(f(d.Da,d),xg(d,d.A)),d.A++,!0)}t.Da=function(){if(this.v=null,Ng(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var d=4*this.T;this.j.info("BP detection timer enabled: "+d),this.B=us(f(this.Wa,this),d)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ct(10),il(this),Ng(this))};function ff(d){d.B!=null&&(s.clearTimeout(d.B),d.B=null)}function Ng(d){d.g=new ur(d,d.j,"rpc",d.Y),d.u===null&&(d.g.J=d.o),d.g.P=0;var g=Sn(d.na);Ie(g,"RID","rpc"),Ie(g,"SID",d.M),Ie(g,"AID",d.K),Ie(g,"CI",d.F?"0":"1"),!d.F&&d.ia&&Ie(g,"TO",d.ia),Ie(g,"TYPE","xmlhttp"),Es(d,g),d.u&&d.o&&lf(g,d.u,d.o),d.O&&(d.g.H=d.O);var y=d.g;d=d.ba,y.M=1,y.A=tl(Sn(g)),y.u=null,y.R=!0,ig(y,d)}t.Va=function(){this.C!=null&&(this.C=null,il(this),cf(this),Ct(19))};function sl(d){d.C!=null&&(s.clearTimeout(d.C),d.C=null)}function Mg(d,g){var y=null;if(d.g==g){sl(d),ff(d),d.g=null;var E=2}else if(rf(d.h,g))y=g.G,cg(d.h,g),E=1;else return;if(d.I!=0){if(g.o)if(E==1){y=g.u?g.u.length:0,g=Date.now()-g.F;var L=d.D;E=Za(),Et(E,new jm(E,y)),ol(d)}else kg(d);else if(L=g.m,L==3||L==0&&g.X>0||!(E==1&&ZR(d,g)||E==2&&cf(d)))switch(y&&y.length>0&&(g=d.h,g.i=g.i.concat(y)),L){case 1:ui(d,5);break;case 4:ui(d,10);break;case 3:ui(d,6);break;default:ui(d,2)}}}function xg(d,g){let y=d.Qa+Math.floor(Math.random()*d.Za);return d.isActive()||(y*=2),y*g}function ui(d,g){if(d.j.info("Error code "+g),g==2){var y=f(d.bb,d),E=d.Ua;const L=!E;E=new cr(E||"//www.google.com/images/cleardot.gif"),s.location&&s.location.protocol=="http"||hs(E,"https"),tl(E),L?WR(E.toString(),y):KR(E.toString(),y)}else Ct(2);d.I=0,d.l&&d.l.pa(g),Dg(d),Ag(d)}t.bb=function(d){d?(this.j.info("Successfully pinged google.com"),Ct(2)):(this.j.info("Failed to ping google.com"),Ct(1))};function Dg(d){if(d.I=0,d.ja=[],d.l){const g=fg(d.h);(g.length!=0||d.i.length!=0)&&(I(d.ja,g),I(d.ja,d.i),d.h.i.length=0,_(d.i),d.i.length=0),d.l.oa()}}function Vg(d,g,y){var E=y instanceof cr?Sn(y):new cr(y);if(E.g!="")g&&(E.g=g+"."+E.g),ps(E,E.u);else{var L=s.location;E=L.protocol,g=g?g+"."+L.hostname:L.hostname,L=+L.port;const U=new cr(null);E&&hs(U,E),g&&(U.g=g),L&&ps(U,L),y&&(U.h=y),E=U}return y=d.G,g=d.wa,y&&g&&Ie(E,y,g),Ie(E,"VER",d.ka),Es(d,E),E}function Lg(d,g,y){if(g&&!d.L)throw Error("Can't create secondary domain capable XhrIo object.");return g=d.Aa&&!d.ma?new Ue(new af({ab:y})):new Ue(d.ma),g.Fa(d.L),g}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ug(){}t=Ug.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function al(){}al.prototype.g=function(d,g){return new Bt(d,g)};function Bt(d,g){ut.call(this),this.g=new Sg(g),this.l=d,this.h=g&&g.messageUrlParams||null,d=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(d?d["X-WebChannel-Content-Type"]=g.messageContentType:d={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.sa&&(d?d["X-WebChannel-Client-Profile"]=g.sa:d={"X-WebChannel-Client-Profile":g.sa}),this.g.U=d,(d=g&&g.Qb)&&!N(d)&&(this.g.u=d),this.A=g&&g.supportsCrossDomainXhr||!1,this.v=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!N(g)&&(this.g.G=g,d=this.h,d!==null&&g in d&&(d=this.h,g in d&&delete d[g])),this.j=new Wi(this)}p(Bt,ut),Bt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Bt.prototype.close=function(){uf(this.g)},Bt.prototype.o=function(d){var g=this.g;if(typeof d=="string"){var y={};y.__data__=d,d=y}else this.v&&(y={},y.__data__=Yc(d),d=y);g.i.push(new bR(g.Ya++,d)),g.I==3&&ol(g)},Bt.prototype.N=function(){this.g.l=null,delete this.j,uf(this.g),delete this.g,Bt.Z.N.call(this)};function Fg(d){Qc.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var g=d.__sm__;if(g){e:{for(const y in g){d=y;break e}d=void 0}(this.i=d)&&(d=this.i,g=g!==null&&d in g?g[d]:void 0),this.data=g}else this.data=d}p(Fg,Qc);function bg(){Xc.call(this),this.status=1}p(bg,Xc);function Wi(d){this.g=d}p(Wi,Ug),Wi.prototype.ra=function(){Et(this.g,"a")},Wi.prototype.qa=function(d){Et(this.g,new Fg(d))},Wi.prototype.pa=function(d){Et(this.g,new bg)},Wi.prototype.oa=function(){Et(this.g,"b")},al.prototype.createWebChannel=al.prototype.g,Bt.prototype.send=Bt.prototype.o,Bt.prototype.open=Bt.prototype.m,Bt.prototype.close=Bt.prototype.close,uS=function(){return new al},lS=function(){return Za()},aS=si,_h={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ja.NO_ERROR=0,ja.TIMEOUT=8,ja.HTTP_ERROR=6,tu=ja,eg.COMPLETE="complete",sS=eg,Ym.EventType=as,as.OPEN="a",as.CLOSE="b",as.ERROR="c",as.MESSAGE="d",ut.prototype.listen=ut.prototype.J,bs=Ym,Ue.prototype.listenOnce=Ue.prototype.K,Ue.prototype.getLastError=Ue.prototype.Ha,Ue.prototype.getLastErrorCode=Ue.prototype.ya,Ue.prototype.getStatus=Ue.prototype.ca,Ue.prototype.getResponseJson=Ue.prototype.La,Ue.prototype.getResponseText=Ue.prototype.la,Ue.prototype.send=Ue.prototype.ea,Ue.prototype.setWithCredentials=Ue.prototype.Fa,oS=Ue}).apply(typeof kl<"u"?kl:typeof self<"u"?self:typeof window<"u"?window:{});const Jv="@firebase/firestore",Yv="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}pt.UNAUTHENTICATED=new pt(null),pt.GOOGLE_CREDENTIALS=new pt("google-credentials-uid"),pt.FIRST_PARTY=new pt("first-party-uid"),pt.MOCK_USER=new pt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jo="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ni=new $p("@firebase/firestore");function Yi(){return Ni.logLevel}function W(t,...e){if(Ni.logLevel<=le.DEBUG){const n=e.map(em);Ni.debug(`Firestore (${jo}): ${t}`,...n)}}function or(t,...e){if(Ni.logLevel<=le.ERROR){const n=e.map(em);Ni.error(`Firestore (${jo}): ${t}`,...n)}}function Uo(t,...e){if(Ni.logLevel<=le.WARN){const n=e.map(em);Ni.warn(`Firestore (${jo}): ${t}`,...n)}}function em(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,cS(t,r,n)}function cS(t,e,n){let r=`FIRESTORE (${jo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw or(r),new Error(r)}function me(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||cS(e,i,r)}function ee(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class z extends Cn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fS{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class gB{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(pt.UNAUTHENTICATED))}shutdown(){}}class yB{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class _B{constructor(e){this.t=e,this.currentUser=pt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){me(this.o===void 0,42304);let r=this.i;const i=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let o=new qr;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new qr,e.enqueueRetryable(()=>i(this.currentUser))};const s=()=>{const c=o;e.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},u=c=>{W("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(c=>u(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?u(c):(W("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new qr)}},0),s()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(W("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(me(typeof r.accessToken=="string",31837,{l:r}),new fS(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return me(e===null||typeof e=="string",2055,{h:e}),new pt(e)}}class vB{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=pt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class TB{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new vB(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(pt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Qv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class EB{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Zt(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){me(this.o===void 0,3512);const r=o=>{o.error!=null&&W("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const s=o.token!==this.m;return this.m=o.token,W("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const i=o=>{W("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?i(o):W("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Qv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(me(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Qv(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CB(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tm{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=CB(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%62))}return r}}function ue(t,e){return t<e?-1:t>e?1:0}function vh(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const i=t.charAt(r),o=e.charAt(r);if(i!==o)return Qf(i)===Qf(o)?ue(i,o):Qf(i)?1:-1}return ue(t.length,e.length)}const IB=55296,wB=57343;function Qf(t){const e=t.charCodeAt(0);return e>=IB&&e<=wB}function Fo(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xv="__name__";class kn{constructor(e,n,r){n===void 0?n=0:n>e.length&&X(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&X(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return kn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof kn?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const o=kn.compareSegments(e.get(i),n.get(i));if(o!==0)return o}return ue(e.length,n.length)}static compareSegments(e,n){const r=kn.isNumericId(e),i=kn.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?kn.extractNumericId(e).compare(kn.extractNumericId(n)):vh(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Br.fromString(e.substring(4,e.length-2))}}class Ee extends kn{construct(e,n,r){return new Ee(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new z(O.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Ee(n)}static emptyPath(){return new Ee([])}}const SB=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ot extends kn{construct(e,n,r){return new ot(e,n,r)}static isValidIdentifier(e){return SB.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ot.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Xv}static keyField(){return new ot([Xv])}static fromServerFormat(e){const n=[];let r="",i=0;const o=()=>{if(r.length===0)throw new z(O.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let s=!1;for(;i<e.length;){const u=e[i];if(u==="\\"){if(i+1===e.length)throw new z(O.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new z(O.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else u==="`"?(s=!s,i++):u!=="."||s?(r+=u,i++):(o(),i++)}if(o(),s)throw new z(O.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ot(n)}static emptyPath(){return new ot([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y{constructor(e){this.path=e}static fromPath(e){return new Y(Ee.fromString(e))}static fromName(e){return new Y(Ee.fromString(e).popFirst(5))}static empty(){return new Y(Ee.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ee.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ee.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Y(new Ee(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dS(t,e,n){if(!n)throw new z(O.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function AB(t,e,n,r){if(e===!0&&r===!0)throw new z(O.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Zv(t){if(!Y.isDocumentKey(t))throw new z(O.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function jv(t){if(Y.isDocumentKey(t))throw new z(O.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function hS(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Ac(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":X(12329,{type:typeof t})}function rn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new z(O.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Ac(t);throw new z(O.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ke(t,e){const n={typeString:t};return e&&(n.value=e),n}function Ha(t,e){if(!hS(t))throw new z(O.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const s=t[r];if(i&&typeof s!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){n=`Expected '${r}' field to equal '${o.value}'`;break}}if(n)throw new z(O.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eT=-62135596800,tT=1e6;class Ae{static now(){return Ae.fromMillis(Date.now())}static fromDate(e){return Ae.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*tT);return new Ae(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new z(O.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new z(O.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<eT)throw new z(O.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new z(O.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/tT}_compareTo(e){return this.seconds===e.seconds?ue(this.nanoseconds,e.nanoseconds):ue(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ae._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ha(e,Ae._jsonSchema))return new Ae(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-eT;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ae._jsonSchemaVersion="firestore/timestamp/1.0",Ae._jsonSchema={type:Ke("string",Ae._jsonSchemaVersion),seconds:Ke("number"),nanoseconds:Ke("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j{static fromTimestamp(e){return new j(e)}static min(){return new j(new Ae(0,0))}static max(){return new j(new Ae(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sa=-1;function RB(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=j.fromTimestamp(r===1e9?new Ae(n+1,0):new Ae(n,r));return new Wr(i,Y.empty(),e)}function PB(t){return new Wr(t.readTime,t.key,Sa)}class Wr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Wr(j.min(),Y.empty(),Sa)}static max(){return new Wr(j.max(),Y.empty(),Sa)}}function kB(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Y.comparator(t.documentKey,e.documentKey),n!==0?n:ue(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NB="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class MB{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function es(t){if(t.code!==O.FAILED_PRECONDITION||t.message!==NB)throw t;W("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&X(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new B((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof B?n:B.resolve(n)}catch(n){return B.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):B.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):B.reject(n)}static resolve(e){return new B((n,r)=>{n(e)})}static reject(e){return new B((n,r)=>{r(e)})}static waitFor(e){return new B((n,r)=>{let i=0,o=0,s=!1;e.forEach(u=>{++i,u.next(()=>{++o,s&&o===i&&n()},c=>r(c))}),s=!0,o===i&&n()})}static or(e){let n=B.resolve(!1);for(const r of e)n=n.next(i=>i?B.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new B((r,i)=>{const o=e.length,s=new Array(o);let u=0;for(let c=0;c<o;c++){const f=c;n(e[f]).next(h=>{s[f]=h,++u,u===o&&r(s)},h=>i(h))}})}static doWhile(e,n){return new B((r,i)=>{const o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}}function xB(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ts(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rc{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Rc.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nm=-1;function Pc(t){return t==null}function $u(t){return t===0&&1/t==-1/0}function DB(t){return typeof t=="number"&&Number.isInteger(t)&&!$u(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pS="";function VB(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=nT(e)),e=LB(t.get(n),e);return nT(e)}function LB(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const o=t.charAt(i);switch(o){case"\0":n+="";break;case pS:n+="";break;default:n+=o}}return n}function nT(t){return t+pS+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rT(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ii(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function mS(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Le{constructor(e,n){this.comparator=e,this.root=n||it.EMPTY}insert(e,n){return new Le(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,it.BLACK,null,null))}remove(e){return new Le(this.comparator,this.root.remove(e,this.comparator).copy(null,null,it.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Nl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Nl(this.root,e,this.comparator,!1)}getReverseIterator(){return new Nl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Nl(this.root,e,this.comparator,!0)}}class Nl{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class it{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??it.RED,this.left=i??it.EMPTY,this.right=o??it.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new it(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return it.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return it.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,it.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,it.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw X(43730,{key:this.key,value:this.value});if(this.right.isRed())throw X(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw X(27949);return e+(this.isRed()?0:1)}}it.EMPTY=null,it.RED=!0,it.BLACK=!1;it.EMPTY=new class{constructor(){this.size=0}get key(){throw X(57766)}get value(){throw X(16141)}get color(){throw X(16727)}get left(){throw X(29726)}get right(){throw X(36894)}copy(e,n,r,i,o){return this}insert(e,n,r){return new it(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{constructor(e){this.comparator=e,this.data=new Le(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new iT(this.data.getIterator())}getIteratorFrom(e){return new iT(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Xe)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Xe(this.comparator);return n.data=e,n}}class iT{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(e){this.fields=e,e.sort(ot.comparator)}static empty(){return new Ht([])}unionWith(e){let n=new Xe(ot.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Ht(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Fo(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new gS("Invalid base64 string: "+o):o}}(e);return new lt(n)}static fromUint8Array(e){const n=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new lt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ue(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}lt.EMPTY_BYTE_STRING=new lt("");const UB=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Kr(t){if(me(!!t,39018),typeof t=="string"){let e=0;const n=UB.exec(t);if(me(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:$e(t.seconds),nanos:$e(t.nanos)}}function $e(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Jr(t){return typeof t=="string"?lt.fromBase64String(t):lt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yS="server_timestamp",_S="__type__",vS="__previous_value__",TS="__local_write_time__";function rm(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[_S])==null?void 0:r.stringValue)===yS}function kc(t){const e=t.mapValue.fields[vS];return rm(e)?kc(e):e}function Aa(t){const e=Kr(t.mapValue.fields[TS].timestampValue);return new Ae(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FB{constructor(e,n,r,i,o,s,u,c,f,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=u,this.longPollingOptions=c,this.useFetchStreams=f,this.isUsingEmulator=h}}const Hu="(default)";class Ra{constructor(e,n){this.projectId=e,this.database=n||Hu}static empty(){return new Ra("","")}get isDefaultDatabase(){return this.database===Hu}isEqual(e){return e instanceof Ra&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ES="__type__",bB="__max__",Ml={mapValue:{}},CS="__vector__",Gu="value";function Yr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?rm(t)?4:BB(t)?9007199254740991:OB(t)?10:11:X(28295,{value:t})}function Bn(t,e){if(t===e)return!0;const n=Yr(t);if(n!==Yr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Aa(t).isEqual(Aa(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const s=Kr(i.timestampValue),u=Kr(o.timestampValue);return s.seconds===u.seconds&&s.nanos===u.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,o){return Jr(i.bytesValue).isEqual(Jr(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,o){return $e(i.geoPointValue.latitude)===$e(o.geoPointValue.latitude)&&$e(i.geoPointValue.longitude)===$e(o.geoPointValue.longitude)}(t,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return $e(i.integerValue)===$e(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const s=$e(i.doubleValue),u=$e(o.doubleValue);return s===u?$u(s)===$u(u):isNaN(s)&&isNaN(u)}return!1}(t,e);case 9:return Fo(t.arrayValue.values||[],e.arrayValue.values||[],Bn);case 10:case 11:return function(i,o){const s=i.mapValue.fields||{},u=o.mapValue.fields||{};if(rT(s)!==rT(u))return!1;for(const c in s)if(s.hasOwnProperty(c)&&(u[c]===void 0||!Bn(s[c],u[c])))return!1;return!0}(t,e);default:return X(52216,{left:t})}}function Pa(t,e){return(t.values||[]).find(n=>Bn(n,e))!==void 0}function bo(t,e){if(t===e)return 0;const n=Yr(t),r=Yr(e);if(n!==r)return ue(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ue(t.booleanValue,e.booleanValue);case 2:return function(o,s){const u=$e(o.integerValue||o.doubleValue),c=$e(s.integerValue||s.doubleValue);return u<c?-1:u>c?1:u===c?0:isNaN(u)?isNaN(c)?0:-1:1}(t,e);case 3:return oT(t.timestampValue,e.timestampValue);case 4:return oT(Aa(t),Aa(e));case 5:return vh(t.stringValue,e.stringValue);case 6:return function(o,s){const u=Jr(o),c=Jr(s);return u.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(o,s){const u=o.split("/"),c=s.split("/");for(let f=0;f<u.length&&f<c.length;f++){const h=ue(u[f],c[f]);if(h!==0)return h}return ue(u.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,s){const u=ue($e(o.latitude),$e(s.latitude));return u!==0?u:ue($e(o.longitude),$e(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return sT(t.arrayValue,e.arrayValue);case 10:return function(o,s){var m,_,I,P;const u=o.fields||{},c=s.fields||{},f=(m=u[Gu])==null?void 0:m.arrayValue,h=(_=c[Gu])==null?void 0:_.arrayValue,p=ue(((I=f==null?void 0:f.values)==null?void 0:I.length)||0,((P=h==null?void 0:h.values)==null?void 0:P.length)||0);return p!==0?p:sT(f,h)}(t.mapValue,e.mapValue);case 11:return function(o,s){if(o===Ml.mapValue&&s===Ml.mapValue)return 0;if(o===Ml.mapValue)return 1;if(s===Ml.mapValue)return-1;const u=o.fields||{},c=Object.keys(u),f=s.fields||{},h=Object.keys(f);c.sort(),h.sort();for(let p=0;p<c.length&&p<h.length;++p){const m=vh(c[p],h[p]);if(m!==0)return m;const _=bo(u[c[p]],f[h[p]]);if(_!==0)return _}return ue(c.length,h.length)}(t.mapValue,e.mapValue);default:throw X(23264,{he:n})}}function oT(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ue(t,e);const n=Kr(t),r=Kr(e),i=ue(n.seconds,r.seconds);return i!==0?i:ue(n.nanos,r.nanos)}function sT(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const o=bo(n[i],r[i]);if(o)return o}return ue(n.length,r.length)}function Oo(t){return Th(t)}function Th(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Kr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Jr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Y.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const o of n.values||[])i?i=!1:r+=",",r+=Th(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",o=!0;for(const s of r)o?o=!1:i+=",",i+=`${s}:${Th(n.fields[s])}`;return i+"}"}(t.mapValue):X(61005,{value:t})}function nu(t){switch(Yr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=kc(t);return e?16+nu(e):16;case 5:return 2*t.stringValue.length;case 6:return Jr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,o)=>i+nu(o),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return ii(r.fields,(o,s)=>{i+=o.length+nu(s)}),i}(t.mapValue);default:throw X(13486,{value:t})}}function aT(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Eh(t){return!!t&&"integerValue"in t}function im(t){return!!t&&"arrayValue"in t}function lT(t){return!!t&&"nullValue"in t}function uT(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function ru(t){return!!t&&"mapValue"in t}function OB(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[ES])==null?void 0:r.stringValue)===CS}function ea(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return ii(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=ea(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ea(t.arrayValue.values[n]);return e}return{...t}}function BB(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===bB}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(e){this.value=e}static empty(){return new Dt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!ru(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ea(n)}setAll(e){let n=ot.emptyPath(),r={},i=[];e.forEach((s,u)=>{if(!n.isImmediateParentOf(u)){const c=this.getFieldsMap(n);this.applyChanges(c,r,i),r={},i=[],n=u.popLast()}s?r[u.lastSegment()]=ea(s):i.push(u.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){const n=this.field(e.popLast());ru(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Bn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];ru(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){ii(n,(i,o)=>e[i]=o);for(const i of r)delete e[i]}clone(){return new Dt(ea(this.value))}}function IS(t){const e=[];return ii(t.fields,(n,r)=>{const i=new ot([n]);if(ru(r)){const o=IS(r.mapValue).fields;if(o.length===0)e.push(i);else for(const s of o)e.push(i.child(s))}else e.push(i)}),new Ht(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(e,n,r,i,o,s,u){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=u}static newInvalidDocument(e){return new gt(e,0,j.min(),j.min(),j.min(),Dt.empty(),0)}static newFoundDocument(e,n,r,i){return new gt(e,1,n,j.min(),r,i,0)}static newNoDocument(e,n){return new gt(e,2,n,j.min(),j.min(),Dt.empty(),0)}static newUnknownDocument(e,n){return new gt(e,3,n,j.min(),j.min(),Dt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(j.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Dt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Dt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=j.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof gt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new gt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zu{constructor(e,n){this.position=e,this.inclusive=n}}function cT(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const o=e[i],s=t.position[i];if(o.field.isKeyField()?r=Y.comparator(Y.fromName(s.referenceValue),n.key):r=bo(s,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function fT(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Bn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wu{constructor(e,n="asc"){this.field=e,this.dir=n}}function qB(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wS{}class We extends wS{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new HB(e,n,r):n==="array-contains"?new WB(e,r):n==="in"?new KB(e,r):n==="not-in"?new JB(e,r):n==="array-contains-any"?new YB(e,r):new We(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new GB(e,r):new zB(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(bo(n,this.value)):n!==null&&Yr(this.value)===Yr(n)&&this.matchesComparison(bo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return X(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Tn extends wS{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Tn(e,n)}matches(e){return SS(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function SS(t){return t.op==="and"}function AS(t){return $B(t)&&SS(t)}function $B(t){for(const e of t.filters)if(e instanceof Tn)return!1;return!0}function Ch(t){if(t instanceof We)return t.field.canonicalString()+t.op.toString()+Oo(t.value);if(AS(t))return t.filters.map(e=>Ch(e)).join(",");{const e=t.filters.map(n=>Ch(n)).join(",");return`${t.op}(${e})`}}function RS(t,e){return t instanceof We?function(r,i){return i instanceof We&&r.op===i.op&&r.field.isEqual(i.field)&&Bn(r.value,i.value)}(t,e):t instanceof Tn?function(r,i){return i instanceof Tn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,u)=>o&&RS(s,i.filters[u]),!0):!1}(t,e):void X(19439)}function PS(t){return t instanceof We?function(n){return`${n.field.canonicalString()} ${n.op} ${Oo(n.value)}`}(t):t instanceof Tn?function(n){return n.op.toString()+" {"+n.getFilters().map(PS).join(" ,")+"}"}(t):"Filter"}class HB extends We{constructor(e,n,r){super(e,n,r),this.key=Y.fromName(r.referenceValue)}matches(e){const n=Y.comparator(e.key,this.key);return this.matchesComparison(n)}}class GB extends We{constructor(e,n){super(e,"in",n),this.keys=kS("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class zB extends We{constructor(e,n){super(e,"not-in",n),this.keys=kS("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function kS(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>Y.fromName(r.referenceValue))}class WB extends We{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return im(n)&&Pa(n.arrayValue,this.value)}}class KB extends We{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Pa(this.value.arrayValue,n)}}class JB extends We{constructor(e,n){super(e,"not-in",n)}matches(e){if(Pa(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Pa(this.value.arrayValue,n)}}class YB extends We{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!im(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Pa(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QB{constructor(e,n=null,r=[],i=[],o=null,s=null,u=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=u,this.Te=null}}function dT(t,e=null,n=[],r=[],i=null,o=null,s=null){return new QB(t,e,n,r,i,o,s)}function om(t){const e=ee(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Ch(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Pc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Oo(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Oo(r)).join(",")),e.Te=n}return e.Te}function sm(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!qB(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!RS(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!fT(t.startAt,e.startAt)&&fT(t.endAt,e.endAt)}function Ih(t){return Y.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ga{constructor(e,n=null,r=[],i=[],o=null,s="F",u=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=u,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function XB(t,e,n,r,i,o,s,u){return new Ga(t,e,n,r,i,o,s,u)}function Nc(t){return new Ga(t)}function hT(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function NS(t){return t.collectionGroup!==null}function ta(t){const e=ee(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),n.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let u=new Xe(ot.comparator);return s.filters.forEach(c=>{c.getFlattenedFilters().forEach(f=>{f.isInequality()&&(u=u.add(f.field))})}),u})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new Wu(o,r))}),n.has(ot.keyField().canonicalString())||e.Ie.push(new Wu(ot.keyField(),r))}return e.Ie}function Un(t){const e=ee(t);return e.Ee||(e.Ee=ZB(e,ta(t))),e.Ee}function ZB(t,e){if(t.limitType==="F")return dT(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const o=i.dir==="desc"?"asc":"desc";return new Wu(i.field,o)});const n=t.endAt?new zu(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new zu(t.startAt.position,t.startAt.inclusive):null;return dT(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function wh(t,e){const n=t.filters.concat([e]);return new Ga(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Sh(t,e,n){return new Ga(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Mc(t,e){return sm(Un(t),Un(e))&&t.limitType===e.limitType}function MS(t){return`${om(Un(t))}|lt:${t.limitType}`}function Qi(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>PS(i)).join(", ")}]`),Pc(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Oo(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Oo(i)).join(",")),`Target(${r})`}(Un(t))}; limitType=${t.limitType})`}function xc(t,e){return e.isFoundDocument()&&function(r,i){const o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):Y.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,i){for(const o of ta(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const o of r.filters)if(!o.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(s,u,c){const f=cT(s,u,c);return s.inclusive?f<=0:f<0}(r.startAt,ta(r),i)||r.endAt&&!function(s,u,c){const f=cT(s,u,c);return s.inclusive?f>=0:f>0}(r.endAt,ta(r),i))}(t,e)}function jB(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function xS(t){return(e,n)=>{let r=!1;for(const i of ta(t)){const o=e6(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function e6(t,e,n){const r=t.field.isKeyField()?Y.comparator(e.key,n.key):function(o,s,u){const c=s.data.field(o),f=u.data.field(o);return c!==null&&f!==null?bo(c,f):X(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return X(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ii(this.inner,(n,r)=>{for(const[i,o]of r)e(i,o)})}isEmpty(){return mS(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t6=new Le(Y.comparator);function sr(){return t6}const DS=new Le(Y.comparator);function Os(...t){let e=DS;for(const n of t)e=e.insert(n.key,n);return e}function VS(t){let e=DS;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function yi(){return na()}function LS(){return na()}function na(){return new $i(t=>t.toString(),(t,e)=>t.isEqual(e))}const n6=new Le(Y.comparator),r6=new Xe(Y.comparator);function ce(...t){let e=r6;for(const n of t)e=e.add(n);return e}const i6=new Xe(ue);function o6(){return i6}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function am(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:$u(e)?"-0":e}}function US(t){return{integerValue:""+t}}function s6(t,e){return DB(e)?US(e):am(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dc{constructor(){this._=void 0}}function a6(t,e,n){return t instanceof ka?function(i,o){const s={fields:{[_S]:{stringValue:yS},[TS]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&rm(o)&&(o=kc(o)),o&&(s.fields[vS]=o),{mapValue:s}}(n,e):t instanceof Bo?bS(t,e):t instanceof Na?OS(t,e):function(i,o){const s=FS(i,o),u=pT(s)+pT(i.Ae);return Eh(s)&&Eh(i.Ae)?US(u):am(i.serializer,u)}(t,e)}function l6(t,e,n){return t instanceof Bo?bS(t,e):t instanceof Na?OS(t,e):n}function FS(t,e){return t instanceof Ku?function(r){return Eh(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}class ka extends Dc{}class Bo extends Dc{constructor(e){super(),this.elements=e}}function bS(t,e){const n=BS(e);for(const r of t.elements)n.some(i=>Bn(i,r))||n.push(r);return{arrayValue:{values:n}}}class Na extends Dc{constructor(e){super(),this.elements=e}}function OS(t,e){let n=BS(e);for(const r of t.elements)n=n.filter(i=>!Bn(i,r));return{arrayValue:{values:n}}}class Ku extends Dc{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function pT(t){return $e(t.integerValue||t.doubleValue)}function BS(t){return im(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qS{constructor(e,n){this.field=e,this.transform=n}}function u6(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Bo&&i instanceof Bo||r instanceof Na&&i instanceof Na?Fo(r.elements,i.elements,Bn):r instanceof Ku&&i instanceof Ku?Bn(r.Ae,i.Ae):r instanceof ka&&i instanceof ka}(t.transform,e.transform)}class c6{constructor(e,n){this.version=e,this.transformResults=n}}class on{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new on}static exists(e){return new on(void 0,e)}static updateTime(e){return new on(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function iu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Vc{}function $S(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new lm(t.key,on.none()):new za(t.key,t.data,on.none());{const n=t.data,r=Dt.empty();let i=new Xe(ot.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new oi(t.key,r,new Ht(i.toArray()),on.none())}}function f6(t,e,n){t instanceof za?function(i,o,s){const u=i.value.clone(),c=gT(i.fieldTransforms,o,s.transformResults);u.setAll(c),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(t,e,n):t instanceof oi?function(i,o,s){if(!iu(i.precondition,o))return void o.convertToUnknownDocument(s.version);const u=gT(i.fieldTransforms,o,s.transformResults),c=o.data;c.setAll(HS(i)),c.setAll(u),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(t,e,n):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function ra(t,e,n,r){return t instanceof za?function(o,s,u,c){if(!iu(o.precondition,s))return u;const f=o.value.clone(),h=yT(o.fieldTransforms,c,s);return f.setAll(h),s.convertToFoundDocument(s.version,f).setHasLocalMutations(),null}(t,e,n,r):t instanceof oi?function(o,s,u,c){if(!iu(o.precondition,s))return u;const f=yT(o.fieldTransforms,c,s),h=s.data;return h.setAll(HS(o)),h.setAll(f),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),u===null?null:u.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(o,s,u){return iu(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):u}(t,e,n)}function d6(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),o=FS(r.transform,i||null);o!=null&&(n===null&&(n=Dt.empty()),n.set(r.field,o))}return n||null}function mT(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Fo(r,i,(o,s)=>u6(o,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class za extends Vc{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class oi extends Vc{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function HS(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function gT(t,e,n){const r=new Map;me(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let i=0;i<n.length;i++){const o=t[i],s=o.transform,u=e.data.field(o.field);r.set(o.field,l6(s,u,n[i]))}return r}function yT(t,e,n){const r=new Map;for(const i of t){const o=i.transform,s=n.data.field(i.field);r.set(i.field,a6(o,s,e))}return r}class lm extends Vc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class h6 extends Vc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p6{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&f6(o,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=ra(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=ra(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=LS();return this.mutations.forEach(i=>{const o=e.get(i.key),s=o.overlayedDocument;let u=this.applyToLocalView(s,o.mutatedFields);u=n.has(i.key)?null:u;const c=$S(s,u);c!==null&&r.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(j.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ce())}isEqual(e){return this.batchId===e.batchId&&Fo(this.mutations,e.mutations,(n,r)=>mT(n,r))&&Fo(this.baseMutations,e.baseMutations,(n,r)=>mT(n,r))}}class um{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){me(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=function(){return n6}();const o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new um(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m6{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g6{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ge,fe;function y6(t){switch(t){case O.OK:return X(64938);case O.CANCELLED:case O.UNKNOWN:case O.DEADLINE_EXCEEDED:case O.RESOURCE_EXHAUSTED:case O.INTERNAL:case O.UNAVAILABLE:case O.UNAUTHENTICATED:return!1;case O.INVALID_ARGUMENT:case O.NOT_FOUND:case O.ALREADY_EXISTS:case O.PERMISSION_DENIED:case O.FAILED_PRECONDITION:case O.ABORTED:case O.OUT_OF_RANGE:case O.UNIMPLEMENTED:case O.DATA_LOSS:return!0;default:return X(15467,{code:t})}}function GS(t){if(t===void 0)return or("GRPC error has no .code"),O.UNKNOWN;switch(t){case Ge.OK:return O.OK;case Ge.CANCELLED:return O.CANCELLED;case Ge.UNKNOWN:return O.UNKNOWN;case Ge.DEADLINE_EXCEEDED:return O.DEADLINE_EXCEEDED;case Ge.RESOURCE_EXHAUSTED:return O.RESOURCE_EXHAUSTED;case Ge.INTERNAL:return O.INTERNAL;case Ge.UNAVAILABLE:return O.UNAVAILABLE;case Ge.UNAUTHENTICATED:return O.UNAUTHENTICATED;case Ge.INVALID_ARGUMENT:return O.INVALID_ARGUMENT;case Ge.NOT_FOUND:return O.NOT_FOUND;case Ge.ALREADY_EXISTS:return O.ALREADY_EXISTS;case Ge.PERMISSION_DENIED:return O.PERMISSION_DENIED;case Ge.FAILED_PRECONDITION:return O.FAILED_PRECONDITION;case Ge.ABORTED:return O.ABORTED;case Ge.OUT_OF_RANGE:return O.OUT_OF_RANGE;case Ge.UNIMPLEMENTED:return O.UNIMPLEMENTED;case Ge.DATA_LOSS:return O.DATA_LOSS;default:return X(39323,{code:t})}}(fe=Ge||(Ge={}))[fe.OK=0]="OK",fe[fe.CANCELLED=1]="CANCELLED",fe[fe.UNKNOWN=2]="UNKNOWN",fe[fe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",fe[fe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",fe[fe.NOT_FOUND=5]="NOT_FOUND",fe[fe.ALREADY_EXISTS=6]="ALREADY_EXISTS",fe[fe.PERMISSION_DENIED=7]="PERMISSION_DENIED",fe[fe.UNAUTHENTICATED=16]="UNAUTHENTICATED",fe[fe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",fe[fe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",fe[fe.ABORTED=10]="ABORTED",fe[fe.OUT_OF_RANGE=11]="OUT_OF_RANGE",fe[fe.UNIMPLEMENTED=12]="UNIMPLEMENTED",fe[fe.INTERNAL=13]="INTERNAL",fe[fe.UNAVAILABLE=14]="UNAVAILABLE",fe[fe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _6(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v6=new Br([4294967295,4294967295],0);function _T(t){const e=_6().encode(t),n=new iS;return n.update(e),new Uint8Array(n.digest())}function vT(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Br([n,r],0),new Br([i,o],0)]}class cm{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Bs(`Invalid padding: ${n}`);if(r<0)throw new Bs(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Bs(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Bs(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Br.fromNumber(this.ge)}ye(e,n,r){let i=e.add(n.multiply(Br.fromNumber(r)));return i.compare(v6)===1&&(i=new Br([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=_T(e),[r,i]=vT(n);for(let o=0;o<this.hashCount;o++){const s=this.ye(r,i,o);if(!this.we(s))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new cm(o,i,n);return r.forEach(u=>s.insert(u)),s}insert(e){if(this.ge===0)return;const n=_T(e),[r,i]=vT(n);for(let o=0;o<this.hashCount;o++){const s=this.ye(r,i,o);this.Se(s)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Bs extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lc{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Wa.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Lc(j.min(),i,new Le(ue),sr(),ce())}}class Wa{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Wa(r,n,ce(),ce(),ce())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ou{constructor(e,n,r,i){this.be=e,this.removedTargetIds=n,this.key=r,this.De=i}}class zS{constructor(e,n){this.targetId=e,this.Ce=n}}class WS{constructor(e,n,r=lt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class TT{constructor(){this.ve=0,this.Fe=ET(),this.Me=lt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ce(),n=ce(),r=ce();return this.Fe.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:X(38017,{changeType:o})}}),new Wa(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=ET()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,me(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class T6{constructor(e){this.Ge=e,this.ze=new Map,this.je=sr(),this.Je=xl(),this.He=xl(),this.Ye=new Le(ue)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:X(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,i)=>{this.rt(i)&&n(i)})}st(e){const n=e.targetId,r=e.Ce.count,i=this.ot(n);if(i){const o=i.target;if(Ih(o))if(r===0){const s=new Y(o.path);this.et(n,s,gt.newNoDocument(s,j.min()))}else me(r===1,20013,{expectedCount:r});else{const s=this._t(n);if(s!==r){const u=this.ut(e),c=u?this.ct(u,e,s):1;if(c!==0){this.it(n);const f=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,f)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n;let s,u;try{s=Jr(r).toUint8Array()}catch(c){if(c instanceof gS)return Uo("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{u=new cm(s,i,o)}catch(c){return Uo(c instanceof Bs?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return u.ge===0?null:u}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let i=0;return r.forEach(o=>{const s=this.Ge.ht(),u=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(u)||(this.et(n,o,null),i++)}),i}Tt(e){const n=new Map;this.ze.forEach((o,s)=>{const u=this.ot(s);if(u){if(o.current&&Ih(u.target)){const c=new Y(u.target.path);this.It(c).has(s)||this.Et(s,c)||this.et(s,c,gt.newNoDocument(c,e))}o.Be&&(n.set(s,o.ke()),o.qe())}});let r=ce();this.He.forEach((o,s)=>{let u=!0;s.forEachWhile(c=>{const f=this.ot(c);return!f||f.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)}),u&&(r=r.add(o))}),this.je.forEach((o,s)=>s.setReadTime(e));const i=new Lc(e,n,this.Ye,this.je,r);return this.je=sr(),this.Je=xl(),this.He=xl(),this.Ye=new Le(ue),i}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,n)?i.Qe(n,1):i.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new TT,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Xe(ue),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Xe(ue),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||W("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new TT),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function xl(){return new Le(Y.comparator)}function ET(){return new Le(Y.comparator)}const E6={asc:"ASCENDING",desc:"DESCENDING"},C6={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},I6={and:"AND",or:"OR"};class w6{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Ah(t,e){return t.useProto3Json||Pc(e)?e:{value:e}}function Ju(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function KS(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function S6(t,e){return Ju(t,e.toTimestamp())}function Fn(t){return me(!!t,49232),j.fromTimestamp(function(n){const r=Kr(n);return new Ae(r.seconds,r.nanos)}(t))}function fm(t,e){return Rh(t,e).canonicalString()}function Rh(t,e){const n=function(i){return new Ee(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function JS(t){const e=Ee.fromString(t);return me(jS(e),10190,{key:e.toString()}),e}function Ph(t,e){return fm(t.databaseId,e.path)}function Xf(t,e){const n=JS(e);if(n.get(1)!==t.databaseId.projectId)throw new z(O.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new z(O.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Y(QS(n))}function YS(t,e){return fm(t.databaseId,e)}function A6(t){const e=JS(t);return e.length===4?Ee.emptyPath():QS(e)}function kh(t){return new Ee(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function QS(t){return me(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function CT(t,e,n){return{name:Ph(t,e),fields:n.value.mapValue.fields}}function R6(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:X(39313,{state:f})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(f,h){return f.useProto3Json?(me(h===void 0||typeof h=="string",58123),lt.fromBase64String(h||"")):(me(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),lt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,u=s&&function(f){const h=f.code===void 0?O.UNKNOWN:GS(f.code);return new z(h,f.message||"")}(s);n=new WS(r,i,o,u||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Xf(t,r.document.name),o=Fn(r.document.updateTime),s=r.document.createTime?Fn(r.document.createTime):j.min(),u=new Dt({mapValue:{fields:r.document.fields}}),c=gt.newFoundDocument(i,o,s,u),f=r.targetIds||[],h=r.removedTargetIds||[];n=new ou(f,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Xf(t,r.document),o=r.readTime?Fn(r.readTime):j.min(),s=gt.newNoDocument(i,o),u=r.removedTargetIds||[];n=new ou([],u,s.key,s)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Xf(t,r.document),o=r.removedTargetIds||[];n=new ou([],o,i,null)}else{if(!("filter"in e))return X(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:o}=r,s=new g6(i,o),u=r.targetId;n=new zS(u,s)}}return n}function P6(t,e){let n;if(e instanceof za)n={update:CT(t,e.key,e.value)};else if(e instanceof lm)n={delete:Ph(t,e.key)};else if(e instanceof oi)n={update:CT(t,e.key,e.data),updateMask:F6(e.fieldMask)};else{if(!(e instanceof h6))return X(16599,{Vt:e.type});n={verify:Ph(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,s){const u=s.transform;if(u instanceof ka)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof Bo)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof Na)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof Ku)return{fieldPath:s.field.canonicalString(),increment:u.Ae};throw X(20930,{transform:s.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:S6(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:X(27497)}(t,e.precondition)),n}function k6(t,e){return t&&t.length>0?(me(e!==void 0,14353),t.map(n=>function(i,o){let s=i.updateTime?Fn(i.updateTime):Fn(o);return s.isEqual(j.min())&&(s=Fn(o)),new c6(s,i.transformResults||[])}(n,e))):[]}function N6(t,e){return{documents:[YS(t,e.path)]}}function M6(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=YS(t,i);const o=function(f){if(f.length!==0)return ZS(Tn.create(f,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const s=function(f){if(f.length!==0)return f.map(h=>function(m){return{field:Xi(m.field),direction:V6(m.dir)}}(h))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const u=Ah(t,e.limit);return u!==null&&(n.structuredQuery.limit=u),e.startAt&&(n.structuredQuery.startAt=function(f){return{before:f.inclusive,values:f.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(f){return{before:!f.inclusive,values:f.position}}(e.endAt)),{ft:n,parent:i}}function x6(t){let e=A6(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){me(r===1,65062);const h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];n.where&&(o=function(p){const m=XS(p);return m instanceof Tn&&AS(m)?m.getFilters():[m]}(n.where));let s=[];n.orderBy&&(s=function(p){return p.map(m=>function(I){return new Wu(Zi(I.field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(I.direction))}(m))}(n.orderBy));let u=null;n.limit&&(u=function(p){let m;return m=typeof p=="object"?p.value:p,Pc(m)?null:m}(n.limit));let c=null;n.startAt&&(c=function(p){const m=!!p.before,_=p.values||[];return new zu(_,m)}(n.startAt));let f=null;return n.endAt&&(f=function(p){const m=!p.before,_=p.values||[];return new zu(_,m)}(n.endAt)),XB(e,i,s,o,u,"F",c,f)}function D6(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return X(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function XS(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Zi(n.unaryFilter.field);return We.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Zi(n.unaryFilter.field);return We.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Zi(n.unaryFilter.field);return We.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=Zi(n.unaryFilter.field);return We.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return X(61313);default:return X(60726)}}(t):t.fieldFilter!==void 0?function(n){return We.create(Zi(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return X(58110);default:return X(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Tn.create(n.compositeFilter.filters.map(r=>XS(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return X(1026)}}(n.compositeFilter.op))}(t):X(30097,{filter:t})}function V6(t){return E6[t]}function L6(t){return C6[t]}function U6(t){return I6[t]}function Xi(t){return{fieldPath:t.canonicalString()}}function Zi(t){return ot.fromServerFormat(t.fieldPath)}function ZS(t){return t instanceof We?function(n){if(n.op==="=="){if(uT(n.value))return{unaryFilter:{field:Xi(n.field),op:"IS_NAN"}};if(lT(n.value))return{unaryFilter:{field:Xi(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(uT(n.value))return{unaryFilter:{field:Xi(n.field),op:"IS_NOT_NAN"}};if(lT(n.value))return{unaryFilter:{field:Xi(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Xi(n.field),op:L6(n.op),value:n.value}}}(t):t instanceof Tn?function(n){const r=n.getFilters().map(i=>ZS(i));return r.length===1?r[0]:{compositeFilter:{op:U6(n.op),filters:r}}}(t):X(54877,{filter:t})}function F6(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function jS(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kr{constructor(e,n,r,i,o=j.min(),s=j.min(),u=lt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=u,this.expectedCount=c}withSequenceNumber(e){return new kr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new kr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new kr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new kr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b6{constructor(e){this.yt=e}}function O6(t){const e=x6({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Sh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B6{constructor(){this.Cn=new q6}addToCollectionParentIndex(e,n){return this.Cn.add(n),B.resolve()}getCollectionParents(e,n){return B.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return B.resolve()}deleteFieldIndex(e,n){return B.resolve()}deleteAllFieldIndexes(e){return B.resolve()}createTargetIndexes(e,n){return B.resolve()}getDocumentsMatchingTarget(e,n){return B.resolve(null)}getIndexType(e,n){return B.resolve(0)}getFieldIndexes(e,n){return B.resolve([])}getNextCollectionGroupToUpdate(e){return B.resolve(null)}getMinOffset(e,n){return B.resolve(Wr.min())}getMinOffsetFromCollectionGroup(e,n){return B.resolve(Wr.min())}updateCollectionGroup(e,n,r){return B.resolve()}updateIndexEntries(e,n){return B.resolve()}}class q6{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Xe(Ee.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Xe(Ee.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},eA=41943040;class Mt{static withCacheSize(e){return new Mt(e,Mt.DEFAULT_COLLECTION_PERCENTILE,Mt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Mt.DEFAULT_COLLECTION_PERCENTILE=10,Mt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Mt.DEFAULT=new Mt(eA,Mt.DEFAULT_COLLECTION_PERCENTILE,Mt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Mt.DISABLED=new Mt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qo{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new qo(0)}static cr(){return new qo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wT="LruGarbageCollector",$6=1048576;function ST([t,e],[n,r]){const i=ue(t,n);return i===0?ue(e,r):i}class H6{constructor(e){this.Ir=e,this.buffer=new Xe(ST),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();ST(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class G6{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){W(wT,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ts(n)?W(wT,"Ignoring IndexedDB error during garbage collection: ",n):await es(n)}await this.Vr(3e5)})}}class z6{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return B.resolve(Rc.ce);const r=new H6(n);return this.mr.forEachTarget(e,i=>r.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>r.Ar(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(W("LruGarbageCollector","Garbage collection skipped; disabled"),B.resolve(IT)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(W("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),IT):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,i,o,s,u,c,f;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(W("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,u=Date.now(),this.removeTargets(e,r,n))).next(p=>(o=p,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(f=Date.now(),Yi()<=le.DEBUG&&W("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(u-s)+`ms
	Removed ${o} targets in `+(c-u)+`ms
	Removed ${p} documents in `+(f-c)+`ms
Total Duration: ${f-h}ms`),B.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}}function W6(t,e){return new z6(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K6{constructor(){this.changes=new $i(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,gt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?B.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J6{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y6{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&ra(r.mutation,i,Ht.empty(),Ae.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ce()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ce()){const i=yi();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=Os();return o.forEach((u,c)=>{s=s.insert(u,c.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){const r=yi();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ce()))}populateOverlays(e,n,r){const i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,u)=>{n.set(s,u)})})}computeViews(e,n,r,i){let o=sr();const s=na(),u=function(){return na()}();return n.forEach((c,f)=>{const h=r.get(f.key);i.has(f.key)&&(h===void 0||h.mutation instanceof oi)?o=o.insert(f.key,f):h!==void 0?(s.set(f.key,h.mutation.getFieldMask()),ra(h.mutation,f,h.mutation.getFieldMask(),Ae.now())):s.set(f.key,Ht.empty())}),this.recalculateAndSaveOverlays(e,o).next(c=>(c.forEach((f,h)=>s.set(f,h)),n.forEach((f,h)=>u.set(f,new J6(h,s.get(f)??null))),u))}recalculateAndSaveOverlays(e,n){const r=na();let i=new Le((s,u)=>s-u),o=ce();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(const u of s)u.keys().forEach(c=>{const f=n.get(c);if(f===null)return;let h=r.get(c)||Ht.empty();h=u.applyToLocalView(f,h),r.set(c,h);const p=(i.get(u.batchId)||ce()).add(c);i=i.insert(u.batchId,p)})}).next(()=>{const s=[],u=i.getReverseIterator();for(;u.hasNext();){const c=u.getNext(),f=c.key,h=c.value,p=LS();h.forEach(m=>{if(!o.has(m)){const _=$S(n.get(m),r.get(m));_!==null&&p.set(m,_),o=o.add(m)}}),s.push(this.documentOverlayCache.saveOverlays(e,f,p))}return B.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(s){return Y.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):NS(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{const s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):B.resolve(yi());let u=Sa,c=o;return s.next(f=>B.forEach(f,(h,p)=>(u<p.largestBatchId&&(u=p.largestBatchId),o.get(h)?B.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{c=c.insert(h,m)}))).next(()=>this.populateOverlays(e,f,o)).next(()=>this.computeViews(e,c,f,ce())).next(h=>({batchId:u,changes:VS(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Y(n)).next(r=>{let i=Os();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const o=n.collectionGroup;let s=Os();return this.indexManager.getCollectionParents(e,o).next(u=>B.forEach(u,c=>{const f=function(p,m){return new Ga(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,c.child(o));return this.getDocumentsMatchingCollectionQuery(e,f,r,i).next(h=>{h.forEach((p,m)=>{s=s.insert(p,m)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(s=>{o.forEach((c,f)=>{const h=f.getKey();s.get(h)===null&&(s=s.insert(h,gt.newInvalidDocument(h)))});let u=Os();return s.forEach((c,f)=>{const h=o.get(c);h!==void 0&&ra(h.mutation,f,Ht.empty(),Ae.now()),xc(n,f)&&(u=u.insert(c,f))}),u})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q6{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return B.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Fn(i.createTime)}}(n)),B.resolve()}getNamedQuery(e,n){return B.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(i){return{name:i.name,query:O6(i.bundledQuery),readTime:Fn(i.readTime)}}(n)),B.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X6{constructor(){this.overlays=new Le(Y.comparator),this.qr=new Map}getOverlay(e,n){return B.resolve(this.overlays.get(n))}getOverlays(e,n){const r=yi();return B.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.St(e,n,o)}),B.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.qr.delete(r)),B.resolve()}getOverlaysForCollection(e,n,r){const i=yi(),o=n.length+1,s=new Y(n.child("")),u=this.overlays.getIteratorFrom(s);for(;u.hasNext();){const c=u.getNext().value,f=c.getKey();if(!n.isPrefixOf(f.path))break;f.path.length===o&&c.largestBatchId>r&&i.set(c.getKey(),c)}return B.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new Le((f,h)=>f-h);const s=this.overlays.getIterator();for(;s.hasNext();){const f=s.getNext().value;if(f.getKey().getCollectionGroup()===n&&f.largestBatchId>r){let h=o.get(f.largestBatchId);h===null&&(h=yi(),o=o.insert(f.largestBatchId,h)),h.set(f.getKey(),f)}}const u=yi(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((f,h)=>u.set(f,h)),!(u.size()>=i)););return B.resolve(u)}St(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const s=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new m6(n,r));let o=this.qr.get(n);o===void 0&&(o=ce(),this.qr.set(n,o)),this.qr.set(n,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z6{constructor(){this.sessionToken=lt.EMPTY_BYTE_STRING}getSessionToken(e){return B.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,B.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dm{constructor(){this.Qr=new Xe(je.$r),this.Ur=new Xe(je.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new je(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new je(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new Y(new Ee([])),r=new je(n,e),i=new je(n,e+1),o=[];return this.Ur.forEachInRange([r,i],s=>{this.Gr(s),o.push(s.key)}),o}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new Y(new Ee([])),r=new je(n,e),i=new je(n,e+1);let o=ce();return this.Ur.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){const n=new je(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class je{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return Y.comparator(e.key,n.key)||ue(e.Yr,n.Yr)}static Kr(e,n){return ue(e.Yr,n.Yr)||Y.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j6{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Xe(je.$r)}checkEmpty(e){return B.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new p6(o,n,r,i);this.mutationQueue.push(s);for(const u of i)this.Zr=this.Zr.add(new je(u.key,o)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return B.resolve(s)}lookupMutationBatch(e,n){return B.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.ei(r),o=i<0?0:i;return B.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return B.resolve(this.mutationQueue.length===0?nm:this.tr-1)}getAllMutationBatches(e){return B.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new je(n,0),i=new je(n,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([r,i],s=>{const u=this.Xr(s.Yr);o.push(u)}),B.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Xe(ue);return n.forEach(i=>{const o=new je(i,0),s=new je(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,s],u=>{r=r.add(u.Yr)})}),B.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let o=r;Y.isDocumentKey(o)||(o=o.child(""));const s=new je(new Y(o),0);let u=new Xe(ue);return this.Zr.forEachWhile(c=>{const f=c.key.path;return!!r.isPrefixOf(f)&&(f.length===i&&(u=u.add(c.Yr)),!0)},s),B.resolve(this.ti(u))}ti(e){const n=[];return e.forEach(r=>{const i=this.Xr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){me(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return B.forEach(n.mutations,i=>{const o=new je(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new je(n,0),i=this.Zr.firstAfterOrEqual(r);return B.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,B.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e3{constructor(e){this.ri=e,this.docs=function(){return new Le(Y.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return B.resolve(r?r.document.mutableCopy():gt.newInvalidDocument(n))}getEntries(e,n){let r=sr();return n.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():gt.newInvalidDocument(i))}),B.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=sr();const s=n.path,u=new Y(s.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(u);for(;c.hasNext();){const{key:f,value:{document:h}}=c.getNext();if(!s.isPrefixOf(f.path))break;f.path.length>s.length+1||kB(PB(h),r)<=0||(i.has(h.key)||xc(n,h))&&(o=o.insert(h.key,h.mutableCopy()))}return B.resolve(o)}getAllFromCollectionGroup(e,n,r,i){X(9500)}ii(e,n){return B.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new t3(this)}getSize(e){return B.resolve(this.size)}}class t3 extends K6{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)}),B.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n3{constructor(e){this.persistence=e,this.si=new $i(n=>om(n),sm),this.lastRemoteSnapshotVersion=j.min(),this.highestTargetId=0,this.oi=0,this._i=new dm,this.targetCount=0,this.ai=qo.ur()}forEachTarget(e,n){return this.si.forEach((r,i)=>n(i)),B.resolve()}getLastRemoteSnapshotVersion(e){return B.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return B.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),B.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),B.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new qo(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,B.resolve()}updateTargetData(e,n){return this.Pr(n),B.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,B.resolve()}removeTargets(e,n,r){let i=0;const o=[];return this.si.forEach((s,u)=>{u.sequenceNumber<=n&&r.get(u.targetId)===null&&(this.si.delete(s),o.push(this.removeMatchingKeysForTargetId(e,u.targetId)),i++)}),B.waitFor(o).next(()=>i)}getTargetCount(e){return B.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return B.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),B.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),B.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),B.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return B.resolve(r)}containsKey(e,n){return B.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tA{constructor(e,n){this.ui={},this.overlays={},this.ci=new Rc(0),this.li=!1,this.li=!0,this.hi=new Z6,this.referenceDelegate=e(this),this.Pi=new n3(this),this.indexManager=new B6,this.remoteDocumentCache=function(i){return new e3(i)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new b6(n),this.Ii=new Q6(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new X6,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new j6(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){W("MemoryPersistence","Starting transaction:",e);const i=new r3(this.ci.next());return this.referenceDelegate.Ei(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ai(e,n){return B.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class r3 extends MB{constructor(e){super(),this.currentSequenceNumber=e}}class hm{constructor(e){this.persistence=e,this.Ri=new dm,this.Vi=null}static mi(e){return new hm(e)}get fi(){if(this.Vi)return this.Vi;throw X(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),B.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),B.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),B.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(i=>this.fi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.fi.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return B.forEach(this.fi,r=>{const i=Y.fromPath(r);return this.gi(e,i).next(o=>{o||n.removeEntry(i,j.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return B.or([()=>B.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Yu{constructor(e,n){this.persistence=e,this.pi=new $i(r=>VB(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=W6(this,n)}static mi(e,n){return new Yu(e,n)}Ei(){}di(e){return B.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return B.forEach(this.pi,(r,i)=>this.br(e,r,i).next(o=>o?B.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ii(e,s=>this.br(e,s,n).next(u=>{u||(r++,o.removeEntry(s,j.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),B.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),B.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),B.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),B.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=nu(e.data.value)),n}br(e,n,r){return B.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.pi.get(n);return B.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pm{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=i}static As(e,n){let r=ce(),i=ce();for(const o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new pm(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i3{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o3{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return F2()?8:xB(vt())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){const o={result:null};return this.ys(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ws(e,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;const s=new i3;return this.Ss(e,n,s).next(u=>{if(o.result=u,this.Vs)return this.bs(e,n,s,u.size)})}).next(()=>o.result)}bs(e,n,r,i){return r.documentReadCount<this.fs?(Yi()<=le.DEBUG&&W("QueryEngine","SDK will not create cache indexes for query:",Qi(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),B.resolve()):(Yi()<=le.DEBUG&&W("QueryEngine","Query:",Qi(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(Yi()<=le.DEBUG&&W("QueryEngine","The SDK decides to create cache indexes for query:",Qi(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Un(n))):B.resolve())}ys(e,n){if(hT(n))return B.resolve(null);let r=Un(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Sh(n,null,"F"),r=Un(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const s=ce(...o);return this.ps.getDocuments(e,s).next(u=>this.indexManager.getMinOffset(e,r).next(c=>{const f=this.Ds(n,u);return this.Cs(n,f,s,c.readTime)?this.ys(e,Sh(n,null,"F")):this.vs(e,f,n,c)}))})))}ws(e,n,r,i){return hT(n)||i.isEqual(j.min())?B.resolve(null):this.ps.getDocuments(e,r).next(o=>{const s=this.Ds(n,o);return this.Cs(n,s,r,i)?B.resolve(null):(Yi()<=le.DEBUG&&W("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Qi(n)),this.vs(e,s,n,RB(i,Sa)).next(u=>u))})}Ds(e,n){let r=new Xe(xS(e));return n.forEach((i,o)=>{xc(e,o)&&(r=r.add(o))}),r}Cs(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Ss(e,n,r){return Yi()<=le.DEBUG&&W("QueryEngine","Using full collection scan to execute query:",Qi(n)),this.ps.getDocumentsMatchingQuery(e,n,Wr.min(),r)}vs(e,n,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mm="LocalStore",s3=3e8;class a3{constructor(e,n,r,i){this.persistence=e,this.Fs=n,this.serializer=i,this.Ms=new Le(ue),this.xs=new $i(o=>om(o),sm),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Y6(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function l3(t,e,n,r){return new a3(t,e,n,r)}async function nA(t,e){const n=ee(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{const s=[],u=[];let c=ce();for(const f of i){s.push(f.batchId);for(const h of f.mutations)c=c.add(h.key)}for(const f of o){u.push(f.batchId);for(const h of f.mutations)c=c.add(h.key)}return n.localDocuments.getDocuments(r,c).next(f=>({Ls:f,removedBatchIds:s,addedBatchIds:u}))})})}function u3(t,e){const n=ee(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),o=n.Ns.newChangeBuffer({trackRemovals:!0});return function(u,c,f,h){const p=f.batch,m=p.keys();let _=B.resolve();return m.forEach(I=>{_=_.next(()=>h.getEntry(c,I)).next(P=>{const x=f.docVersions.get(I);me(x!==null,48541),P.version.compareTo(x)<0&&(p.applyToRemoteDocument(P,f),P.isValidDocument()&&(P.setReadTime(f.commitVersion),h.addEntry(P)))})}),_.next(()=>u.mutationQueue.removeMutationBatch(c,p))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(u){let c=ce();for(let f=0;f<u.mutationResults.length;++f)u.mutationResults[f].transformResults.length>0&&(c=c.add(u.batch.mutations[f].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function rA(t){const e=ee(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function c3(t,e){const n=ee(t),r=e.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const s=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const u=[];e.targetChanges.forEach((h,p)=>{const m=i.get(p);if(!m)return;u.push(n.Pi.removeMatchingKeys(o,h.removedDocuments,p).next(()=>n.Pi.addMatchingKeys(o,h.addedDocuments,p)));let _=m.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?_=_.withResumeToken(lt.EMPTY_BYTE_STRING,j.min()).withLastLimboFreeSnapshotVersion(j.min()):h.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(h.resumeToken,r)),i=i.insert(p,_),function(P,x,S){return P.resumeToken.approximateByteSize()===0||x.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=s3?!0:S.addedDocuments.size+S.modifiedDocuments.size+S.removedDocuments.size>0}(m,_,h)&&u.push(n.Pi.updateTargetData(o,_))});let c=sr(),f=ce();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&u.push(n.persistence.referenceDelegate.updateLimboDocument(o,h))}),u.push(f3(o,s,e.documentUpdates).next(h=>{c=h.ks,f=h.qs})),!r.isEqual(j.min())){const h=n.Pi.getLastRemoteSnapshotVersion(o).next(p=>n.Pi.setTargetsMetadata(o,o.currentSequenceNumber,r));u.push(h)}return B.waitFor(u).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,c,f)).next(()=>c)}).then(o=>(n.Ms=i,o))}function f3(t,e,n){let r=ce(),i=ce();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let s=sr();return n.forEach((u,c)=>{const f=o.get(u);c.isFoundDocument()!==f.isFoundDocument()&&(i=i.add(u)),c.isNoDocument()&&c.version.isEqual(j.min())?(e.removeEntry(u,c.readTime),s=s.insert(u,c)):!f.isValidDocument()||c.version.compareTo(f.version)>0||c.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(c),s=s.insert(u,c)):W(mm,"Ignoring outdated watch update for ",u,". Current version:",f.version," Watch version:",c.version)}),{ks:s,qs:i}})}function d3(t,e){const n=ee(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=nm),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function h3(t,e){const n=ee(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Pi.getTargetData(r,e).next(o=>o?(i=o,B.resolve(i)):n.Pi.allocateTargetId(r).next(s=>(i=new kr(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function Nh(t,e,n){const r=ee(t),i=r.Ms.get(e),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i))}catch(s){if(!ts(s))throw s;W(mm,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function AT(t,e,n){const r=ee(t);let i=j.min(),o=ce();return r.persistence.runTransaction("Execute query","readwrite",s=>function(c,f,h){const p=ee(c),m=p.xs.get(h);return m!==void 0?B.resolve(p.Ms.get(m)):p.Pi.getTargetData(f,h)}(r,s,Un(e)).next(u=>{if(u)return i=u.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(s,u.targetId).next(c=>{o=c})}).next(()=>r.Fs.getDocumentsMatchingQuery(s,e,n?i:j.min(),n?o:ce())).next(u=>(p3(r,jB(e),u),{documents:u,Qs:o})))}function p3(t,e,n){let r=t.Os.get(e)||j.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.Os.set(e,r)}class RT{constructor(){this.activeTargetIds=o6()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class m3{constructor(){this.Mo=new RT,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new RT,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g3{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PT="ConnectivityMonitor";class kT{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){W(PT,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){W(PT,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Dl=null;function Mh(){return Dl===null?Dl=function(){return 268435456+Math.round(2147483648*Math.random())}():Dl++,"0x"+Dl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zf="RestConnection",y3={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class _3{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===Hu?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,n,r,i,o){const s=Mh(),u=this.zo(e,n.toUriEncodedString());W(Zf,`Sending RPC '${e}' ${s}:`,u,r);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,i,o);const{host:f}=new URL(u),h=ni(f);return this.Jo(e,u,c,r,h).then(p=>(W(Zf,`Received RPC '${e}' ${s}: `,p),p),p=>{throw Uo(Zf,`RPC '${e}' ${s} failed with error: `,p,"url: ",u,"request:",r),p})}Ho(e,n,r,i,o,s){return this.Go(e,n,r,i,o)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+jo}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}zo(e,n){const r=y3[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v3{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dt="WebChannelConnection";class T3 extends _3{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,i,o){const s=Mh();return new Promise((u,c)=>{const f=new oS;f.setWithCredentials(!0),f.listenOnce(sS.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case tu.NO_ERROR:const p=f.getResponseJson();W(dt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),u(p);break;case tu.TIMEOUT:W(dt,`RPC '${e}' ${s} timed out`),c(new z(O.DEADLINE_EXCEEDED,"Request time out"));break;case tu.HTTP_ERROR:const m=f.getStatus();if(W(dt,`RPC '${e}' ${s} failed with status:`,m,"response text:",f.getResponseText()),m>0){let _=f.getResponseJson();Array.isArray(_)&&(_=_[0]);const I=_==null?void 0:_.error;if(I&&I.status&&I.message){const P=function(S){const C=S.toLowerCase().replace(/_/g,"-");return Object.values(O).indexOf(C)>=0?C:O.UNKNOWN}(I.status);c(new z(P,I.message))}else c(new z(O.UNKNOWN,"Server responded with status "+f.getStatus()))}else c(new z(O.UNAVAILABLE,"Connection failed."));break;default:X(9055,{l_:e,streamId:s,h_:f.getLastErrorCode(),P_:f.getLastError()})}}finally{W(dt,`RPC '${e}' ${s} completed.`)}});const h=JSON.stringify(i);W(dt,`RPC '${e}' ${s} sending request:`,i),f.send(n,"POST",h,r,15)})}T_(e,n,r){const i=Mh(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=uS(),u=lS(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(c.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const h=o.join("");W(dt,`Creating RPC '${e}' stream ${i}: ${h}`,c);const p=s.createWebChannel(h,c);this.I_(p);let m=!1,_=!1;const I=new v3({Yo:x=>{_?W(dt,`Not sending because RPC '${e}' stream ${i} is closed:`,x):(m||(W(dt,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),W(dt,`RPC '${e}' stream ${i} sending:`,x),p.send(x))},Zo:()=>p.close()}),P=(x,S,C)=>{x.listen(S,A=>{try{C(A)}catch(D){setTimeout(()=>{throw D},0)}})};return P(p,bs.EventType.OPEN,()=>{_||(W(dt,`RPC '${e}' stream ${i} transport opened.`),I.o_())}),P(p,bs.EventType.CLOSE,()=>{_||(_=!0,W(dt,`RPC '${e}' stream ${i} transport closed`),I.a_(),this.E_(p))}),P(p,bs.EventType.ERROR,x=>{_||(_=!0,Uo(dt,`RPC '${e}' stream ${i} transport errored. Name:`,x.name,"Message:",x.message),I.a_(new z(O.UNAVAILABLE,"The operation could not be completed")))}),P(p,bs.EventType.MESSAGE,x=>{var S;if(!_){const C=x.data[0];me(!!C,16349);const A=C,D=(A==null?void 0:A.error)||((S=A[0])==null?void 0:S.error);if(D){W(dt,`RPC '${e}' stream ${i} received error:`,D);const F=D.status;let b=function(w){const R=Ge[w];if(R!==void 0)return GS(R)}(F),v=D.message;b===void 0&&(b=O.INTERNAL,v="Unknown error status: "+F+" with message "+D.message),_=!0,I.a_(new z(b,v)),p.close()}else W(dt,`RPC '${e}' stream ${i} received:`,C),I.u_(C)}}),P(u,aS.STAT_EVENT,x=>{x.stat===_h.PROXY?W(dt,`RPC '${e}' stream ${i} detected buffering proxy`):x.stat===_h.NOPROXY&&W(dt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{I.__()},0),I}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function jf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uc(t){return new w6(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iA{constructor(e,n,r=1e3,i=1.5,o=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=i,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&W("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NT="PersistentStream";class oA{constructor(e,n,r,i,o,s,u,c){this.Mi=e,this.S_=r,this.b_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=u,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new iA(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===O.RESOURCE_EXHAUSTED?(or(n.toString()),or("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===O.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===n&&this.G_(r,i)},r=>{e(()=>{const i=new z(O.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return W(NT,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(W(NT,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class E3 extends oA{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=R6(this.serializer,e),r=function(o){if(!("targetChange"in o))return j.min();const s=o.targetChange;return s.targetIds&&s.targetIds.length?j.min():s.readTime?Fn(s.readTime):j.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=kh(this.serializer),n.addTarget=function(o,s){let u;const c=s.target;if(u=Ih(c)?{documents:N6(o,c)}:{query:M6(o,c).ft},u.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){u.resumeToken=KS(o,s.resumeToken);const f=Ah(o,s.expectedCount);f!==null&&(u.expectedCount=f)}else if(s.snapshotVersion.compareTo(j.min())>0){u.readTime=Ju(o,s.snapshotVersion.toTimestamp());const f=Ah(o,s.expectedCount);f!==null&&(u.expectedCount=f)}return u}(this.serializer,e);const r=D6(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=kh(this.serializer),n.removeTarget=e,this.q_(n)}}class C3 extends oA{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return me(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,me(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){me(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=k6(e.writeResults,e.commitTime),r=Fn(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=kh(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>P6(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I3{}class w3 extends I3{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new z(O.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Go(e,Rh(n,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===O.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new z(O.UNKNOWN,o.toString())})}Ho(e,n,r,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,u])=>this.connection.Ho(e,Rh(n,r),i,s,u,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===O.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new z(O.UNKNOWN,s.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class S3{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(or(n),this.aa=!1):W("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mi="RemoteStore";class A3{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo(s=>{r.enqueueAndForget(async()=>{Hi(this)&&(W(Mi,"Restarting streams for network reachability change."),await async function(c){const f=ee(c);f.Ea.add(4),await Ka(f),f.Ra.set("Unknown"),f.Ea.delete(4),await Fc(f)}(this))})}),this.Ra=new S3(r,i)}}async function Fc(t){if(Hi(t))for(const e of t.da)await e(!0)}async function Ka(t){for(const e of t.da)await e(!1)}function sA(t,e){const n=ee(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),vm(n)?_m(n):ns(n).O_()&&ym(n,e))}function gm(t,e){const n=ee(t),r=ns(n);n.Ia.delete(e),r.O_()&&aA(n,e),n.Ia.size===0&&(r.O_()?r.L_():Hi(n)&&n.Ra.set("Unknown"))}function ym(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(j.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ns(t).Y_(e)}function aA(t,e){t.Va.Ue(e),ns(t).Z_(e)}function _m(t){t.Va=new T6({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),ns(t).start(),t.Ra.ua()}function vm(t){return Hi(t)&&!ns(t).x_()&&t.Ia.size>0}function Hi(t){return ee(t).Ea.size===0}function lA(t){t.Va=void 0}async function R3(t){t.Ra.set("Online")}async function P3(t){t.Ia.forEach((e,n)=>{ym(t,e)})}async function k3(t,e){lA(t),vm(t)?(t.Ra.ha(e),_m(t)):t.Ra.set("Unknown")}async function N3(t,e,n){if(t.Ra.set("Online"),e instanceof WS&&e.state===2&&e.cause)try{await async function(i,o){const s=o.cause;for(const u of o.targetIds)i.Ia.has(u)&&(await i.remoteSyncer.rejectListen(u,s),i.Ia.delete(u),i.Va.removeTarget(u))}(t,e)}catch(r){W(Mi,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Qu(t,r)}else if(e instanceof ou?t.Va.Ze(e):e instanceof zS?t.Va.st(e):t.Va.tt(e),!n.isEqual(j.min()))try{const r=await rA(t.localStore);n.compareTo(r)>=0&&await function(o,s){const u=o.Va.Tt(s);return u.targetChanges.forEach((c,f)=>{if(c.resumeToken.approximateByteSize()>0){const h=o.Ia.get(f);h&&o.Ia.set(f,h.withResumeToken(c.resumeToken,s))}}),u.targetMismatches.forEach((c,f)=>{const h=o.Ia.get(c);if(!h)return;o.Ia.set(c,h.withResumeToken(lt.EMPTY_BYTE_STRING,h.snapshotVersion)),aA(o,c);const p=new kr(h.target,c,f,h.sequenceNumber);ym(o,p)}),o.remoteSyncer.applyRemoteEvent(u)}(t,n)}catch(r){W(Mi,"Failed to raise snapshot:",r),await Qu(t,r)}}async function Qu(t,e,n){if(!ts(e))throw e;t.Ea.add(1),await Ka(t),t.Ra.set("Offline"),n||(n=()=>rA(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{W(Mi,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Fc(t)})}function uA(t,e){return e().catch(n=>Qu(t,n,e))}async function bc(t){const e=ee(t),n=Qr(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:nm;for(;M3(e);)try{const i=await d3(e.localStore,r);if(i===null){e.Ta.length===0&&n.L_();break}r=i.batchId,x3(e,i)}catch(i){await Qu(e,i)}cA(e)&&fA(e)}function M3(t){return Hi(t)&&t.Ta.length<10}function x3(t,e){t.Ta.push(e);const n=Qr(t);n.O_()&&n.X_&&n.ea(e.mutations)}function cA(t){return Hi(t)&&!Qr(t).x_()&&t.Ta.length>0}function fA(t){Qr(t).start()}async function D3(t){Qr(t).ra()}async function V3(t){const e=Qr(t);for(const n of t.Ta)e.ea(n.mutations)}async function L3(t,e,n){const r=t.Ta.shift(),i=um.from(r,e,n);await uA(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await bc(t)}async function U3(t,e){e&&Qr(t).X_&&await async function(r,i){if(function(s){return y6(s)&&s!==O.ABORTED}(i.code)){const o=r.Ta.shift();Qr(r).B_(),await uA(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),await bc(r)}}(t,e),cA(t)&&fA(t)}async function MT(t,e){const n=ee(t);n.asyncQueue.verifyOperationInProgress(),W(Mi,"RemoteStore received new credentials");const r=Hi(n);n.Ea.add(3),await Ka(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Fc(n)}async function F3(t,e){const n=ee(t);e?(n.Ea.delete(2),await Fc(n)):e||(n.Ea.add(2),await Ka(n),n.Ra.set("Unknown"))}function ns(t){return t.ma||(t.ma=function(n,r,i){const o=ee(n);return o.sa(),new E3(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Xo:R3.bind(null,t),t_:P3.bind(null,t),r_:k3.bind(null,t),H_:N3.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),vm(t)?_m(t):t.Ra.set("Unknown")):(await t.ma.stop(),lA(t))})),t.ma}function Qr(t){return t.fa||(t.fa=function(n,r,i){const o=ee(n);return o.sa(),new C3(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:D3.bind(null,t),r_:U3.bind(null,t),ta:V3.bind(null,t),na:L3.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await bc(t)):(await t.fa.stop(),t.Ta.length>0&&(W(Mi,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tm{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new qr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){const s=Date.now()+r,u=new Tm(e,n,s,i,o);return u.start(r),u}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new z(O.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Em(t,e){if(or("AsyncQueue",`${e}: ${t}`),ts(t))return new z(O.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ao{static emptySet(e){return new Ao(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||Y.comparator(n.key,r.key):(n,r)=>Y.comparator(n.key,r.key),this.keyedMap=Os(),this.sortedSet=new Le(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ao)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Ao;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xT{constructor(){this.ga=new Le(Y.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):X(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class $o{constructor(e,n,r,i,o,s,u,c,f){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=u,this.excludesMetadataChanges=c,this.hasCachedResults=f}static fromInitialDocuments(e,n,r,i,o){const s=[];return n.forEach(u=>{s.push({type:0,doc:u})}),new $o(e,n,Ao.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Mc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b3{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class O3{constructor(){this.queries=DT(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const i=ee(n),o=i.queries;i.queries=DT(),o.forEach((s,u)=>{for(const c of u.Sa)c.onError(r)})})(this,new z(O.ABORTED,"Firestore shutting down"))}}function DT(){return new $i(t=>MS(t),Mc)}async function dA(t,e){const n=ee(t);let r=3;const i=e.query;let o=n.queries.get(i);o?!o.ba()&&e.Da()&&(r=2):(o=new b3,r=e.Da()?0:1);try{switch(r){case 0:o.wa=await n.onListen(i,!0);break;case 1:o.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(s){const u=Em(s,`Initialization of query '${Qi(e.query)}' failed`);return void e.onError(u)}n.queries.set(i,o),o.Sa.push(e),e.va(n.onlineState),o.wa&&e.Fa(o.wa)&&Cm(n)}async function hA(t,e){const n=ee(t),r=e.query;let i=3;const o=n.queries.get(r);if(o){const s=o.Sa.indexOf(e);s>=0&&(o.Sa.splice(s,1),o.Sa.length===0?i=e.Da()?0:1:!o.ba()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function B3(t,e){const n=ee(t);let r=!1;for(const i of e){const o=i.query,s=n.queries.get(o);if(s){for(const u of s.Sa)u.Fa(i)&&(r=!0);s.wa=i}}r&&Cm(n)}function q3(t,e,n){const r=ee(t),i=r.queries.get(e);if(i)for(const o of i.Sa)o.onError(n);r.queries.delete(e)}function Cm(t){t.Ca.forEach(e=>{e.next()})}var xh,VT;(VT=xh||(xh={})).Ma="default",VT.Cache="cache";class pA{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new $o(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=$o.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==xh.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mA{constructor(e){this.key=e}}class gA{constructor(e){this.key=e}}class $3{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ce(),this.mutatedKeys=ce(),this.eu=xS(e),this.tu=new Ao(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new xT,i=n?n.tu:this.tu;let o=n?n.mutatedKeys:this.mutatedKeys,s=i,u=!1;const c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,f=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{const m=i.get(h),_=xc(this.query,p)?p:null,I=!!m&&this.mutatedKeys.has(m.key),P=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations);let x=!1;m&&_?m.data.isEqual(_.data)?I!==P&&(r.track({type:3,doc:_}),x=!0):this.su(m,_)||(r.track({type:2,doc:_}),x=!0,(c&&this.eu(_,c)>0||f&&this.eu(_,f)<0)&&(u=!0)):!m&&_?(r.track({type:0,doc:_}),x=!0):m&&!_&&(r.track({type:1,doc:m}),x=!0,(c||f)&&(u=!0)),x&&(_?(s=s.add(_),o=P?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){const h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{tu:s,iu:r,Cs:u,mutatedKeys:o}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const s=e.iu.ya();s.sort((h,p)=>function(_,I){const P=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return X(20277,{Rt:x})}};return P(_)-P(I)}(h.type,p.type)||this.eu(h.doc,p.doc)),this.ou(r),i=i??!1;const u=n&&!i?this._u():[],c=this.Xa.size===0&&this.current&&!i?1:0,f=c!==this.Za;return this.Za=c,s.length!==0||f?{snapshot:new $o(this.query,e.tu,o,s,e.mutatedKeys,c===0,f,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:u}:{au:u}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new xT,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=ce(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new gA(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new mA(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=ce();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return $o.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Im="SyncEngine";class H3{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class G3{constructor(e){this.key=e,this.hu=!1}}class z3{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Pu={},this.Tu=new $i(u=>MS(u),Mc),this.Iu=new Map,this.Eu=new Set,this.du=new Le(Y.comparator),this.Au=new Map,this.Ru=new dm,this.Vu={},this.mu=new Map,this.fu=qo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function W3(t,e,n=!0){const r=CA(t);let i;const o=r.Tu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.lu()):i=await yA(r,e,n,!0),i}async function K3(t,e){const n=CA(t);await yA(n,e,!0,!1)}async function yA(t,e,n,r){const i=await h3(t.localStore,Un(e)),o=i.targetId,s=t.sharedClientState.addLocalQueryTarget(o,n);let u;return r&&(u=await J3(t,e,o,s==="current",i.resumeToken)),t.isPrimaryClient&&n&&sA(t.remoteStore,i),u}async function J3(t,e,n,r,i){t.pu=(p,m,_)=>async function(P,x,S,C){let A=x.view.ru(S);A.Cs&&(A=await AT(P.localStore,x.query,!1).then(({documents:v})=>x.view.ru(v,A)));const D=C&&C.targetChanges.get(x.targetId),F=C&&C.targetMismatches.get(x.targetId)!=null,b=x.view.applyChanges(A,P.isPrimaryClient,D,F);return UT(P,x.targetId,b.au),b.snapshot}(t,p,m,_);const o=await AT(t.localStore,e,!0),s=new $3(e,o.Qs),u=s.ru(o.documents),c=Wa.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),f=s.applyChanges(u,t.isPrimaryClient,c);UT(t,n,f.au);const h=new H3(e,n,s);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),f.snapshot}async function Y3(t,e,n){const r=ee(t),i=r.Tu.get(e),o=r.Iu.get(i.targetId);if(o.length>1)return r.Iu.set(i.targetId,o.filter(s=>!Mc(s,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Nh(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&gm(r.remoteStore,i.targetId),Dh(r,i.targetId)}).catch(es)):(Dh(r,i.targetId),await Nh(r.localStore,i.targetId,!0))}async function Q3(t,e){const n=ee(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),gm(n.remoteStore,r.targetId))}async function X3(t,e,n){const r=iq(t);try{const i=await function(s,u){const c=ee(s),f=Ae.now(),h=u.reduce((_,I)=>_.add(I.key),ce());let p,m;return c.persistence.runTransaction("Locally write mutations","readwrite",_=>{let I=sr(),P=ce();return c.Ns.getEntries(_,h).next(x=>{I=x,I.forEach((S,C)=>{C.isValidDocument()||(P=P.add(S))})}).next(()=>c.localDocuments.getOverlayedDocuments(_,I)).next(x=>{p=x;const S=[];for(const C of u){const A=d6(C,p.get(C.key).overlayedDocument);A!=null&&S.push(new oi(C.key,A,IS(A.value.mapValue),on.exists(!0)))}return c.mutationQueue.addMutationBatch(_,f,S,u)}).next(x=>{m=x;const S=x.applyToLocalDocumentSet(p,P);return c.documentOverlayCache.saveOverlays(_,x.batchId,S)})}).then(()=>({batchId:m.batchId,changes:VS(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,u,c){let f=s.Vu[s.currentUser.toKey()];f||(f=new Le(ue)),f=f.insert(u,c),s.Vu[s.currentUser.toKey()]=f}(r,i.batchId,n),await Ja(r,i.changes),await bc(r.remoteStore)}catch(i){const o=Em(i,"Failed to persist write");n.reject(o)}}async function _A(t,e){const n=ee(t);try{const r=await c3(n.localStore,e);e.targetChanges.forEach((i,o)=>{const s=n.Au.get(o);s&&(me(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.hu=!0:i.modifiedDocuments.size>0?me(s.hu,14607):i.removedDocuments.size>0&&(me(s.hu,42227),s.hu=!1))}),await Ja(n,r,e)}catch(r){await es(r)}}function LT(t,e,n){const r=ee(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Tu.forEach((o,s)=>{const u=s.view.va(e);u.snapshot&&i.push(u.snapshot)}),function(s,u){const c=ee(s);c.onlineState=u;let f=!1;c.queries.forEach((h,p)=>{for(const m of p.Sa)m.va(u)&&(f=!0)}),f&&Cm(c)}(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Z3(t,e,n){const r=ee(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Au.get(e),o=i&&i.key;if(o){let s=new Le(Y.comparator);s=s.insert(o,gt.newNoDocument(o,j.min()));const u=ce().add(o),c=new Lc(j.min(),new Map,new Le(ue),s,u);await _A(r,c),r.du=r.du.remove(o),r.Au.delete(e),wm(r)}else await Nh(r.localStore,e,!1).then(()=>Dh(r,e,n)).catch(es)}async function j3(t,e){const n=ee(t),r=e.batch.batchId;try{const i=await u3(n.localStore,e);TA(n,r,null),vA(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Ja(n,i)}catch(i){await es(i)}}async function eq(t,e,n){const r=ee(t);try{const i=await function(s,u){const c=ee(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let h;return c.mutationQueue.lookupMutationBatch(f,u).next(p=>(me(p!==null,37113),h=p.keys(),c.mutationQueue.removeMutationBatch(f,p))).next(()=>c.mutationQueue.performConsistencyCheck(f)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(f,h,u)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,h)).next(()=>c.localDocuments.getDocuments(f,h))})}(r.localStore,e);TA(r,e,n),vA(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Ja(r,i)}catch(i){await es(i)}}function vA(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function TA(t,e,n){const r=ee(t);let i=r.Vu[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function Dh(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||EA(t,r)})}function EA(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(gm(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),wm(t))}function UT(t,e,n){for(const r of n)r instanceof mA?(t.Ru.addReference(r.key,e),tq(t,r)):r instanceof gA?(W(Im,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||EA(t,r.key)):X(19791,{wu:r})}function tq(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(W(Im,"New document in limbo: "+n),t.Eu.add(r),wm(t))}function wm(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new Y(Ee.fromString(e)),r=t.fu.next();t.Au.set(r,new G3(n)),t.du=t.du.insert(n,r),sA(t.remoteStore,new kr(Un(Nc(n.path)),r,"TargetPurposeLimboResolution",Rc.ce))}}async function Ja(t,e,n){const r=ee(t),i=[],o=[],s=[];r.Tu.isEmpty()||(r.Tu.forEach((u,c)=>{s.push(r.pu(c,e,n).then(f=>{var h;if((f||n)&&r.isPrimaryClient){const p=f?!f.fromCache:(h=n==null?void 0:n.targetChanges.get(c.targetId))==null?void 0:h.current;r.sharedClientState.updateQueryState(c.targetId,p?"current":"not-current")}if(f){i.push(f);const p=pm.As(c.targetId,f);o.push(p)}}))}),await Promise.all(s),r.Pu.H_(i),await async function(c,f){const h=ee(c);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>B.forEach(f,m=>B.forEach(m.Es,_=>h.persistence.referenceDelegate.addReference(p,m.targetId,_)).next(()=>B.forEach(m.ds,_=>h.persistence.referenceDelegate.removeReference(p,m.targetId,_)))))}catch(p){if(!ts(p))throw p;W(mm,"Failed to update sequence numbers: "+p)}for(const p of f){const m=p.targetId;if(!p.fromCache){const _=h.Ms.get(m),I=_.snapshotVersion,P=_.withLastLimboFreeSnapshotVersion(I);h.Ms=h.Ms.insert(m,P)}}}(r.localStore,o))}async function nq(t,e){const n=ee(t);if(!n.currentUser.isEqual(e)){W(Im,"User change. New user:",e.toKey());const r=await nA(n.localStore,e);n.currentUser=e,function(o,s){o.mu.forEach(u=>{u.forEach(c=>{c.reject(new z(O.CANCELLED,s))})}),o.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Ja(n,r.Ls)}}function rq(t,e){const n=ee(t),r=n.Au.get(e);if(r&&r.hu)return ce().add(r.key);{let i=ce();const o=n.Iu.get(e);if(!o)return i;for(const s of o){const u=n.Tu.get(s);i=i.unionWith(u.view.nu)}return i}}function CA(t){const e=ee(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=_A.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=rq.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Z3.bind(null,e),e.Pu.H_=B3.bind(null,e.eventManager),e.Pu.yu=q3.bind(null,e.eventManager),e}function iq(t){const e=ee(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=j3.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=eq.bind(null,e),e}class Xu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Uc(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return l3(this.persistence,new o3,e.initialUser,this.serializer)}Cu(e){return new tA(hm.mi,this.serializer)}Du(e){return new m3}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Xu.provider={build:()=>new Xu};class oq extends Xu{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){me(this.persistence.referenceDelegate instanceof Yu,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new G6(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Mt.withCacheSize(this.cacheSizeBytes):Mt.DEFAULT;return new tA(r=>Yu.mi(r,n),this.serializer)}}class Vh{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>LT(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=nq.bind(null,this.syncEngine),await F3(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new O3}()}createDatastore(e){const n=Uc(e.databaseInfo.databaseId),r=function(o){return new T3(o)}(e.databaseInfo);return function(o,s,u,c){return new w3(o,s,u,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,o,s,u){return new A3(r,i,o,s,u)}(this.localStore,this.datastore,e.asyncQueue,n=>LT(this.syncEngine,n,0),function(){return kT.v()?new kT:new g3}())}createSyncEngine(e,n){return function(i,o,s,u,c,f,h){const p=new z3(i,o,s,u,c,f);return h&&(p.gu=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const o=ee(i);W(Mi,"RemoteStore shutting down."),o.Ea.add(5),await Ka(o),o.Aa.shutdown(),o.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Vh.provider={build:()=>new Vh};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IA{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):or("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xr="FirestoreClient";class sq{constructor(e,n,r,i,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=pt.UNAUTHENTICATED,this.clientId=tm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async s=>{W(Xr,"Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(W(Xr,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new qr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Em(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function ed(t,e){t.asyncQueue.verifyOperationInProgress(),W(Xr,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await nA(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function FT(t,e){t.asyncQueue.verifyOperationInProgress();const n=await aq(t);W(Xr,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>MT(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>MT(e.remoteStore,i)),t._onlineComponents=e}async function aq(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){W(Xr,"Using user provided OfflineComponentProvider");try{await ed(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===O.FAILED_PRECONDITION||i.code===O.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Uo("Error using user provided cache. Falling back to memory cache: "+n),await ed(t,new Xu)}}else W(Xr,"Using default OfflineComponentProvider"),await ed(t,new oq(void 0));return t._offlineComponents}async function wA(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(W(Xr,"Using user provided OnlineComponentProvider"),await FT(t,t._uninitializedComponentsProvider._online)):(W(Xr,"Using default OnlineComponentProvider"),await FT(t,new Vh))),t._onlineComponents}function lq(t){return wA(t).then(e=>e.syncEngine)}async function Lh(t){const e=await wA(t),n=e.eventManager;return n.onListen=W3.bind(null,e.syncEngine),n.onUnlisten=Y3.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=K3.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=Q3.bind(null,e.syncEngine),n}function uq(t,e,n={}){const r=new qr;return t.asyncQueue.enqueueAndForget(async()=>function(o,s,u,c,f){const h=new IA({next:m=>{h.Nu(),s.enqueueAndForget(()=>hA(o,p));const _=m.docs.has(u);!_&&m.fromCache?f.reject(new z(O.UNAVAILABLE,"Failed to get document because the client is offline.")):_&&m.fromCache&&c&&c.source==="server"?f.reject(new z(O.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(m)},error:m=>f.reject(m)}),p=new pA(Nc(u.path),h,{includeMetadataChanges:!0,qa:!0});return dA(o,p)}(await Lh(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SA(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bT=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AA="firestore.googleapis.com",OT=!0;class BT{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new z(O.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=AA,this.ssl=OT}else this.host=e.host,this.ssl=e.ssl??OT;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=eA;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<$6)throw new z(O.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}AB("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=SA(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new z(O.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new z(O.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new z(O.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Oc{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new BT({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new z(O.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new z(O.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new BT(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new gB;switch(r.type){case"firstParty":return new TB(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new z(O.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=bT.get(n);r&&(W("ComponentProvider","Removing Datastore"),bT.delete(n),r.terminate())}(this),Promise.resolve()}}function cq(t,e,n,r={}){var f;t=rn(t,Oc);const i=ni(e),o=t._getSettings(),s={...o,emulatorOptions:t._getEmulatorOptions()},u=`${e}:${n}`;i&&(Bp(`https://${u}`),qp("Firestore",!0)),o.host!==AA&&o.host!==u&&Uo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...o,host:u,ssl:i,emulatorOptions:r};if(!zr(c,s)&&(t._setSettings(c),r.mockUserToken)){let h,p;if(typeof r.mockUserToken=="string")h=r.mockUserToken,p=pt.MOCK_USER;else{h=vw(r.mockUserToken,(f=t._app)==null?void 0:f.options.projectId);const m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new z(O.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new pt(m)}t._authCredentials=new yB(new fS(h,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rs{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new rs(this.firestore,e,this._query)}}class be{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new $r(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new be(this.firestore,e,this._key)}toJSON(){return{type:be._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Ha(n,be._jsonSchema))return new be(e,r||null,new Y(Ee.fromString(n.referencePath)))}}be._jsonSchemaVersion="firestore/documentReference/1.0",be._jsonSchema={type:Ke("string",be._jsonSchemaVersion),referencePath:Ke("string")};class $r extends rs{constructor(e,n,r){super(e,n,Nc(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new be(this.firestore,null,new Y(e))}withConverter(e){return new $r(this.firestore,e,this._path)}}function Vl(t,e,...n){if(t=Pe(t),dS("collection","path",e),t instanceof Oc){const r=Ee.fromString(e,...n);return jv(r),new $r(t,null,r)}{if(!(t instanceof be||t instanceof $r))throw new z(O.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ee.fromString(e,...n));return jv(r),new $r(t.firestore,null,r)}}function Nt(t,e,...n){if(t=Pe(t),arguments.length===1&&(e=tm.newId()),dS("doc","path",e),t instanceof Oc){const r=Ee.fromString(e,...n);return Zv(r),new be(t,null,new Y(r))}{if(!(t instanceof be||t instanceof $r))throw new z(O.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ee.fromString(e,...n));return Zv(r),new be(t.firestore,t instanceof $r?t.converter:null,new Y(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qT="AsyncQueue";class $T{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new iA(this,"async_queue_retry"),this._c=()=>{const r=jf();r&&W(qT,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=jf();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=jf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new qr;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!ts(e))throw e;W(qT,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,or("INTERNAL UNHANDLED ERROR: ",HT(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const i=Tm.createAndSchedule(this,e,n,r,o=>this.hc(o));return this.tc.push(i),i}uc(){this.nc&&X(47125,{Pc:HT(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function HT(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GT(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(t,["next","error","complete"])}class Zr extends Oc{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new $T,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new $T(e),this._firestoreClient=void 0,await e}}}function fq(t,e){const n=typeof t=="object"?t:Gp(),r=typeof t=="string"?t:Hu,i=Qo(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const o=gw("firestore");o&&cq(i,...o)}return i}function Sm(t){if(t._terminated)throw new z(O.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||dq(t),t._firestoreClient}function dq(t){var r,i,o;const e=t._freezeSettings(),n=function(u,c,f,h){return new FB(u,c,f,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,SA(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(i=e.localCache)!=null&&i._offlineComponentProvider&&((o=e.localCache)!=null&&o._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new sq(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(u){const c=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e){this._byteString=e}static fromBase64String(e){try{return new jt(lt.fromBase64String(e))}catch(n){throw new z(O.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new jt(lt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:jt._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ha(e,jt._jsonSchema))return jt.fromBase64String(e.bytes)}}jt._jsonSchemaVersion="firestore/bytes/1.0",jt._jsonSchema={type:Ke("string",jt._jsonSchemaVersion),bytes:Ke("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bc{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new z(O.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ot(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ya{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new z(O.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new z(O.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ue(this._lat,e._lat)||ue(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:bn._jsonSchemaVersion}}static fromJSON(e){if(Ha(e,bn._jsonSchema))return new bn(e.latitude,e.longitude)}}bn._jsonSchemaVersion="firestore/geoPoint/1.0",bn._jsonSchema={type:Ke("string",bn._jsonSchemaVersion),latitude:Ke("number"),longitude:Ke("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}toJSON(){return{type:On._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ha(e,On._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new On(e.vectorValues);throw new z(O.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}On._jsonSchemaVersion="firestore/vectorValue/1.0",On._jsonSchema={type:Ke("string",On._jsonSchemaVersion),vectorValues:Ke("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hq=/^__.*__$/;class pq{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new oi(e,this.data,this.fieldMask,n,this.fieldTransforms):new za(e,this.data,n,this.fieldTransforms)}}class RA{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new oi(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function PA(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw X(40011,{Ac:t})}}class qc{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new qc({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Zu(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(PA(this.Ac)&&hq.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class mq{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Uc(e)}Cc(e,n,r,i=!1){return new qc({Ac:e,methodName:n,Dc:r,path:ot.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function $c(t){const e=t._freezeSettings(),n=Uc(t._databaseId);return new mq(t._databaseId,!!e.ignoreUndefinedProperties,n)}function kA(t,e,n,r,i,o={}){const s=t.Cc(o.merge||o.mergeFields?2:0,e,n,i);Pm("Data must be an object, but it was:",s,r);const u=NA(r,s);let c,f;if(o.merge)c=new Ht(s.fieldMask),f=s.fieldTransforms;else if(o.mergeFields){const h=[];for(const p of o.mergeFields){const m=Uh(e,p,n);if(!s.contains(m))throw new z(O.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);xA(h,m)||h.push(m)}c=new Ht(h),f=s.fieldTransforms.filter(p=>c.covers(p.field))}else c=null,f=s.fieldTransforms;return new pq(new Dt(u),c,f)}class Hc extends Ya{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Hc}}function gq(t,e,n){return new qc({Ac:3,Dc:e.settings.Dc,methodName:t._methodName,fc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Am extends Ya{_toFieldTransform(e){return new qS(e.path,new ka)}isEqual(e){return e instanceof Am}}class Rm extends Ya{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=gq(this,e,!0),r=this.vc.map(o=>is(o,n)),i=new Bo(r);return new qS(e.path,i)}isEqual(e){return e instanceof Rm&&zr(this.vc,e.vc)}}function yq(t,e,n,r){const i=t.Cc(1,e,n);Pm("Data must be an object, but it was:",i,r);const o=[],s=Dt.empty();ii(r,(c,f)=>{const h=km(e,c,n);f=Pe(f);const p=i.yc(h);if(f instanceof Hc)o.push(h);else{const m=is(f,p);m!=null&&(o.push(h),s.set(h,m))}});const u=new Ht(o);return new RA(s,u,i.fieldTransforms)}function _q(t,e,n,r,i,o){const s=t.Cc(1,e,n),u=[Uh(e,r,n)],c=[i];if(o.length%2!=0)throw new z(O.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<o.length;m+=2)u.push(Uh(e,o[m])),c.push(o[m+1]);const f=[],h=Dt.empty();for(let m=u.length-1;m>=0;--m)if(!xA(f,u[m])){const _=u[m];let I=c[m];I=Pe(I);const P=s.yc(_);if(I instanceof Hc)f.push(_);else{const x=is(I,P);x!=null&&(f.push(_),h.set(_,x))}}const p=new Ht(f);return new RA(h,p,s.fieldTransforms)}function vq(t,e,n,r=!1){return is(n,t.Cc(r?4:3,e))}function is(t,e){if(MA(t=Pe(t)))return Pm("Unsupported field value:",e,t),NA(t,e);if(t instanceof Ya)return function(r,i){if(!PA(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,i){const o=[];let s=0;for(const u of r){let c=is(u,i.wc(s));c==null&&(c={nullValue:"NULL_VALUE"}),o.push(c),s++}return{arrayValue:{values:o}}}(t,e)}return function(r,i){if((r=Pe(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return s6(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=Ae.fromDate(r);return{timestampValue:Ju(i.serializer,o)}}if(r instanceof Ae){const o=new Ae(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ju(i.serializer,o)}}if(r instanceof bn)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof jt)return{bytesValue:KS(i.serializer,r._byteString)};if(r instanceof be){const o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Sc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:fm(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof On)return function(s,u){return{mapValue:{fields:{[ES]:{stringValue:CS},[Gu]:{arrayValue:{values:s.toArray().map(f=>{if(typeof f!="number")throw u.Sc("VectorValues must only contain numeric values.");return am(u.serializer,f)})}}}}}}(r,i);throw i.Sc(`Unsupported field value: ${Ac(r)}`)}(t,e)}function NA(t,e){const n={};return mS(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ii(t,(r,i)=>{const o=is(i,e.mc(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function MA(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ae||t instanceof bn||t instanceof jt||t instanceof be||t instanceof Ya||t instanceof On)}function Pm(t,e,n){if(!MA(n)||!hS(n)){const r=Ac(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function Uh(t,e,n){if((e=Pe(e))instanceof Bc)return e._internalPath;if(typeof e=="string")return km(t,e);throw Zu("Field path arguments must be of type string or ",t,!1,void 0,n)}const Tq=new RegExp("[~\\*/\\[\\]]");function km(t,e,n){if(e.search(Tq)>=0)throw Zu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Bc(...e.split("."))._internalPath}catch{throw Zu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Zu(t,e,n,r,i){const o=r&&!r.isEmpty(),s=i!==void 0;let u=`Function ${e}() called with invalid data`;n&&(u+=" (via `toFirestore()`)"),u+=". ";let c="";return(o||s)&&(c+=" (found",o&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new z(O.INVALID_ARGUMENT,u+t+c)}function xA(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DA{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new be(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Eq(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Nm("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Eq extends DA{data(){return super.data()}}function Nm(t,e){return typeof e=="string"?km(t,e):e instanceof Bc?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cq(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new z(O.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Mm{}class Iq extends Mm{}function zT(t,e,...n){let r=[];e instanceof Mm&&r.push(e),r=r.concat(n),function(o){const s=o.filter(c=>c instanceof xm).length,u=o.filter(c=>c instanceof Gc).length;if(s>1||s>0&&u>0)throw new z(O.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Gc extends Iq{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Gc(e,n,r)}_apply(e){const n=this._parse(e);return VA(e._query,n),new rs(e.firestore,e.converter,wh(e._query,n))}_parse(e){const n=$c(e.firestore);return function(o,s,u,c,f,h,p){let m;if(f.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new z(O.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){KT(p,h);const I=[];for(const P of p)I.push(WT(c,o,P));m={arrayValue:{values:I}}}else m=WT(c,o,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||KT(p,h),m=vq(u,s,p,h==="in"||h==="not-in");return We.create(f,h,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function wq(t,e,n){const r=e,i=Nm("where",t);return Gc._create(i,r,n)}class xm extends Mm{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new xm(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Tn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,o){let s=i;const u=o.getFlattenedFilters();for(const c of u)VA(s,c),s=wh(s,c)}(e._query,n),new rs(e.firestore,e.converter,wh(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function WT(t,e,n){if(typeof(n=Pe(n))=="string"){if(n==="")throw new z(O.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!NS(e)&&n.indexOf("/")!==-1)throw new z(O.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Ee.fromString(n));if(!Y.isDocumentKey(r))throw new z(O.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return aT(t,new Y(r))}if(n instanceof be)return aT(t,n._key);throw new z(O.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ac(n)}.`)}function KT(t,e){if(!Array.isArray(t)||t.length===0)throw new z(O.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function VA(t,e){const n=function(i,o){for(const s of i)for(const u of s.getFlattenedFilters())if(o.indexOf(u.op)>=0)return u.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new z(O.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new z(O.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class Sq{convertValue(e,n="none"){switch(Yr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return $e(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Jr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw X(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ii(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertVectorValue(e){var r,i,o;const n=(o=(i=(r=e.fields)==null?void 0:r[Gu].arrayValue)==null?void 0:i.values)==null?void 0:o.map(s=>$e(s.doubleValue));return new On(n)}convertGeoPoint(e){return new bn($e(e.latitude),$e(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=kc(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Aa(e));default:return null}}convertTimestamp(e){const n=Kr(e);return new Ae(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ee.fromString(e);me(jS(r),9688,{name:e});const i=new Ra(r.get(1),r.get(3)),o=new Y(r.popFirst(5));return i.isEqual(n)||or(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LA(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class qs{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ei extends DA{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new su(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Nm("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new z(O.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Ei._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Ei._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ei._jsonSchema={type:Ke("string",Ei._jsonSchemaVersion),bundleSource:Ke("string","DocumentSnapshot"),bundleName:Ke("string"),bundle:Ke("string")};class su extends Ei{data(e={}){return super.data(e)}}class Ro{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new qs(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new su(this._firestore,this._userDataWriter,r.key,r,new qs(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new z(O.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(u=>{const c=new su(i._firestore,i._userDataWriter,u.doc.key,u.doc,new qs(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter);return u.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(u=>o||u.type!==3).map(u=>{const c=new su(i._firestore,i._userDataWriter,u.doc.key,u.doc,new qs(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter);let f=-1,h=-1;return u.type!==0&&(f=s.indexOf(u.doc.key),s=s.delete(u.doc.key)),u.type!==1&&(s=s.add(u.doc),h=s.indexOf(u.doc.key)),{type:Aq(u.type),doc:c,oldIndex:f,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new z(O.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ro._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=tm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(n.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function Aq(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return X(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rq(t){t=rn(t,be);const e=rn(t.firestore,Zr);return uq(Sm(e),t._key).then(n=>FA(e,t,n))}Ro._jsonSchemaVersion="firestore/querySnapshot/1.0",Ro._jsonSchema={type:Ke("string",Ro._jsonSchemaVersion),bundleSource:Ke("string","QuerySnapshot"),bundleName:Ke("string"),bundle:Ke("string")};class UA extends Sq{constructor(e){super(),this.firestore=e}convertBytes(e){return new jt(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new be(this.firestore,null,n)}}function JT(t,e,n){t=rn(t,be);const r=rn(t.firestore,Zr),i=LA(t.converter,e,n);return zc(r,[kA($c(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,on.none())])}function cn(t,e,n,...r){t=rn(t,be);const i=rn(t.firestore,Zr),o=$c(i);let s;return s=typeof(e=Pe(e))=="string"||e instanceof Bc?_q(o,"updateDoc",t._key,e,n,r):yq(o,"updateDoc",t._key,e),zc(i,[s.toMutation(t._key,on.exists(!0))])}function Pq(t){return zc(rn(t.firestore,Zr),[new lm(t._key,on.none())])}function YT(t,e){const n=rn(t.firestore,Zr),r=Nt(t),i=LA(t.converter,e);return zc(n,[kA($c(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,on.exists(!1))]).then(()=>r)}function kq(t,...e){var c,f,h;t=Pe(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||GT(e[r])||(n=e[r++]);const i={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(GT(e[r])){const p=e[r];e[r]=(c=p.next)==null?void 0:c.bind(p),e[r+1]=(f=p.error)==null?void 0:f.bind(p),e[r+2]=(h=p.complete)==null?void 0:h.bind(p)}let o,s,u;if(t instanceof be)s=rn(t.firestore,Zr),u=Nc(t._key.path),o={next:p=>{e[r]&&e[r](FA(s,t,p))},error:e[r+1],complete:e[r+2]};else{const p=rn(t,rs);s=rn(p.firestore,Zr),u=p._query;const m=new UA(s);o={next:_=>{e[r]&&e[r](new Ro(s,m,p,_))},error:e[r+1],complete:e[r+2]},Cq(t._query)}return function(m,_,I,P){const x=new IA(P),S=new pA(_,x,I);return m.asyncQueue.enqueueAndForget(async()=>dA(await Lh(m),S)),()=>{x.Nu(),m.asyncQueue.enqueueAndForget(async()=>hA(await Lh(m),S))}}(Sm(s),u,i,o)}function zc(t,e){return function(r,i){const o=new qr;return r.asyncQueue.enqueueAndForget(async()=>X3(await lq(r),i,o)),o.promise}(Sm(t),e)}function FA(t,e,n){const r=n.docs.get(e._key),i=new UA(t);return new Ei(t,i,e._key,r,new qs(n.hasPendingWrites,n.fromCache),e.converter)}function QT(){return new Am("serverTimestamp")}function Nq(...t){return new Rm("arrayUnion",t)}(function(e,n=!0){(function(i){jo=i})(Bi),_n(new ln("firestore",(r,{instanceIdentifier:i,options:o})=>{const s=r.getProvider("app").getImmediate(),u=new Zr(new _B(r.getProvider("auth-internal")),new EB(s,r.getProvider("app-check-internal")),function(f,h){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new z(O.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ra(f.options.projectId,h)}(s,i),s);return o={useFetchStreams:n,...o},u._setSettings(o),u},"PUBLIC").setMultipleInstances(!0)),bt(Jv,Yv,e),bt(Jv,Yv,"esm2020")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bA="firebasestorage.googleapis.com",OA="storageBucket",Mq=2*60*1e3,xq=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Be extends Cn{constructor(e,n,r=0){super(td(e),`Firebase Storage: ${n} (${td(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Be.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return td(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Oe;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Oe||(Oe={}));function td(t){return"storage/"+t}function Dm(){const t="An unknown error occurred, please check the error payload for server response.";return new Be(Oe.UNKNOWN,t)}function Dq(t){return new Be(Oe.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function Vq(t){return new Be(Oe.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function Lq(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Be(Oe.UNAUTHENTICATED,t)}function Uq(){return new Be(Oe.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function Fq(t){return new Be(Oe.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function bq(){return new Be(Oe.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Oq(){return new Be(Oe.CANCELED,"User canceled the upload/download.")}function Bq(t){return new Be(Oe.INVALID_URL,"Invalid URL '"+t+"'.")}function qq(t){return new Be(Oe.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function $q(){return new Be(Oe.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+OA+"' property when initializing the app?")}function Hq(){return new Be(Oe.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Gq(){return new Be(Oe.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function zq(t){return new Be(Oe.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Fh(t){return new Be(Oe.INVALID_ARGUMENT,t)}function BA(){return new Be(Oe.APP_DELETED,"The Firebase app was deleted.")}function Wq(t){return new Be(Oe.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function ia(t,e){return new Be(Oe.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Ms(t){throw new Be(Oe.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Gt.makeFromUrl(e,n)}catch{return new Gt(e,"")}if(r.path==="")return r;throw qq(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function o(D){D.path.charAt(D.path.length-1)==="/"&&(D.path_=D.path_.slice(0,-1))}const s="(/(.*))?$",u=new RegExp("^gs://"+i+s,"i"),c={bucket:1,path:3};function f(D){D.path_=decodeURIComponent(D.path)}const h="v[A-Za-z0-9_]+",p=n.replace(/[.]/g,"\\."),m="(/([^?#]*).*)?$",_=new RegExp(`^https?://${p}/${h}/b/${i}/o${m}`,"i"),I={bucket:1,path:3},P=n===bA?"(?:storage.googleapis.com|storage.cloud.google.com)":n,x="([^?#]*)",S=new RegExp(`^https?://${P}/${i}/${x}`,"i"),A=[{regex:u,indices:c,postModify:o},{regex:_,indices:I,postModify:f},{regex:S,indices:{bucket:1,path:2},postModify:f}];for(let D=0;D<A.length;D++){const F=A[D],b=F.regex.exec(e);if(b){const v=b[F.indices.bucket];let T=b[F.indices.path];T||(T=""),r=new Gt(v,T),F.postModify(r);break}}if(r==null)throw Bq(e);return r}}class Kq{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jq(t,e,n){let r=1,i=null,o=null,s=!1,u=0;function c(){return u===2}let f=!1;function h(...x){f||(f=!0,e.apply(null,x))}function p(x){i=setTimeout(()=>{i=null,t(_,c())},x)}function m(){o&&clearTimeout(o)}function _(x,...S){if(f){m();return}if(x){m(),h.call(null,x,...S);return}if(c()||s){m(),h.call(null,x,...S);return}r<64&&(r*=2);let A;u===1?(u=2,A=0):A=(r+Math.random())*1e3,p(A)}let I=!1;function P(x){I||(I=!0,m(),!f&&(i!==null?(x||(u=2),clearTimeout(i),p(0)):x||(u=1)))}return p(0),o=setTimeout(()=>{s=!0,P(!0)},n),P}function Yq(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qq(t){return t!==void 0}function Xq(t){return typeof t=="object"&&!Array.isArray(t)}function Vm(t){return typeof t=="string"||t instanceof String}function XT(t){return Lm()&&t instanceof Blob}function Lm(){return typeof Blob<"u"}function ZT(t,e,n,r){if(r<e)throw Fh(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Fh(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Um(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function qA(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var Ci;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Ci||(Ci={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zq(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,o=e.indexOf(t)!==-1;return n||i||o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jq{constructor(e,n,r,i,o,s,u,c,f,h,p,m=!0,_=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=o,this.additionalRetryCodes_=s,this.callback_=u,this.errorCallback_=c,this.timeout_=f,this.progressCallback_=h,this.connectionFactory_=p,this.retry=m,this.isUsingEmulator=_,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((I,P)=>{this.resolve_=I,this.reject_=P,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new Ll(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const s=u=>{const c=u.loaded,f=u.lengthComputable?u.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,f)};this.progressCallback_!==null&&o.addUploadProgressListener(s),o.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(s),this.pendingConnection_=null;const u=o.getErrorCode()===Ci.NO_ERROR,c=o.getStatus();if(!u||Zq(c,this.additionalRetryCodes_)&&this.retry){const h=o.getErrorCode()===Ci.ABORT;r(!1,new Ll(!1,null,h));return}const f=this.successCodes_.indexOf(c)!==-1;r(!0,new Ll(f,o))})},n=(r,i)=>{const o=this.resolve_,s=this.reject_,u=i.connection;if(i.wasSuccessCode)try{const c=this.callback_(u,u.getResponse());Qq(c)?o(c):o()}catch(c){s(c)}else if(u!==null){const c=Dm();c.serverResponse=u.getErrorText(),this.errorCallback_?s(this.errorCallback_(u,c)):s(c)}else if(i.canceled){const c=this.appDelete_?BA():Oq();s(c)}else{const c=bq();s(c)}};this.canceled_?n(!1,new Ll(!1,null,!0)):this.backoffId_=Jq(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&Yq(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Ll{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function e$(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function t$(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function n$(t,e){e&&(t["X-Firebase-GMPID"]=e)}function r$(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function i$(t,e,n,r,i,o,s=!0,u=!1){const c=qA(t.urlParams),f=t.url+c,h=Object.assign({},t.headers);return n$(h,e),e$(h,n),t$(h,o),r$(h,r),new jq(f,t.method,h,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,s,u)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o$(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function s$(...t){const e=o$();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(Lm())return new Blob(t);throw new Be(Oe.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function a$(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l$(t){if(typeof atob>"u")throw zq("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mn={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class nd{constructor(e,n){this.data=e,this.contentType=n||null}}function u$(t,e){switch(t){case Mn.RAW:return new nd($A(e));case Mn.BASE64:case Mn.BASE64URL:return new nd(HA(t,e));case Mn.DATA_URL:return new nd(f$(e),d$(e))}throw Dm()}function $A(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const o=r,s=t.charCodeAt(++n);r=65536|(o&1023)<<10|s&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function c$(t){let e;try{e=decodeURIComponent(t)}catch{throw ia(Mn.DATA_URL,"Malformed data URL.")}return $A(e)}function HA(t,e){switch(t){case Mn.BASE64:{const i=e.indexOf("-")!==-1,o=e.indexOf("_")!==-1;if(i||o)throw ia(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Mn.BASE64URL:{const i=e.indexOf("+")!==-1,o=e.indexOf("/")!==-1;if(i||o)throw ia(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=l$(e)}catch(i){throw i.message.includes("polyfill")?i:ia(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class GA{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw ia(Mn.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=h$(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function f$(t){const e=new GA(t);return e.base64?HA(Mn.BASE64,e.rest):c$(e.rest)}function d$(t){return new GA(t).contentType}function h$(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ar{constructor(e,n){let r=0,i="";XT(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(XT(this.data_)){const r=this.data_,i=a$(r,e,n);return i===null?null:new Ar(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Ar(r,!0)}}static getBlob(...e){if(Lm()){const n=e.map(r=>r instanceof Ar?r.data_:r);return new Ar(s$.apply(null,n))}else{const n=e.map(s=>Vm(s)?u$(Mn.RAW,s).data:s.data_);let r=0;n.forEach(s=>{r+=s.byteLength});const i=new Uint8Array(r);let o=0;return n.forEach(s=>{for(let u=0;u<s.length;u++)i[o++]=s[u]}),new Ar(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zA(t){let e;try{e=JSON.parse(t)}catch{return null}return Xq(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p$(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function m$(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function WA(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g$(t,e){return e}class It{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||g$}}let Ul=null;function y$(t){return!Vm(t)||t.length<2?t:WA(t)}function KA(){if(Ul)return Ul;const t=[];t.push(new It("bucket")),t.push(new It("generation")),t.push(new It("metageneration")),t.push(new It("name","fullPath",!0));function e(o,s){return y$(s)}const n=new It("name");n.xform=e,t.push(n);function r(o,s){return s!==void 0?Number(s):s}const i=new It("size");return i.xform=r,t.push(i),t.push(new It("timeCreated")),t.push(new It("updated")),t.push(new It("md5Hash",null,!0)),t.push(new It("cacheControl",null,!0)),t.push(new It("contentDisposition",null,!0)),t.push(new It("contentEncoding",null,!0)),t.push(new It("contentLanguage",null,!0)),t.push(new It("contentType",null,!0)),t.push(new It("metadata","customMetadata",!0)),Ul=t,Ul}function _$(t,e){function n(){const r=t.bucket,i=t.fullPath,o=new Gt(r,i);return e._makeStorageReference(o)}Object.defineProperty(t,"ref",{get:n})}function v$(t,e,n){const r={};r.type="file";const i=n.length;for(let o=0;o<i;o++){const s=n[o];r[s.local]=s.xform(r,e[s.server])}return _$(r,t),r}function JA(t,e,n){const r=zA(e);return r===null?null:v$(t,r,n)}function T$(t,e,n,r){const i=zA(e);if(i===null||!Vm(i.downloadTokens))return null;const o=i.downloadTokens;if(o.length===0)return null;const s=encodeURIComponent;return o.split(",").map(f=>{const h=t.bucket,p=t.fullPath,m="/b/"+s(h)+"/o/"+s(p),_=Um(m,n,r),I=qA({alt:"media",token:f});return _+I})[0]}function E$(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}class YA{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QA(t){if(!t)throw Dm()}function C$(t,e){function n(r,i){const o=JA(t,i,e);return QA(o!==null),o}return n}function I$(t,e){function n(r,i){const o=JA(t,i,e);return QA(o!==null),T$(o,i,t.host,t._protocol)}return n}function XA(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=Uq():i=Lq():n.getStatus()===402?i=Vq(t.bucket):n.getStatus()===403?i=Fq(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function w$(t){const e=XA(t);function n(r,i){let o=e(r,i);return r.getStatus()===404&&(o=Dq(t.path)),o.serverResponse=i.serverResponse,o}return n}function S$(t,e,n){const r=e.fullServerUrl(),i=Um(r,t.host,t._protocol),o="GET",s=t.maxOperationRetryTime,u=new YA(i,o,I$(t,n),s);return u.errorHandler=w$(e),u}function A$(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function R$(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=A$(null,e)),r}function P$(t,e,n,r,i){const o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"};function u(){let A="";for(let D=0;D<2;D++)A=A+Math.random().toString().slice(2);return A}const c=u();s["Content-Type"]="multipart/related; boundary="+c;const f=R$(e,r,i),h=E$(f,n),p="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+h+`\r
--`+c+`\r
Content-Type: `+f.contentType+`\r
\r
`,m=`\r
--`+c+"--",_=Ar.getBlob(p,r,m);if(_===null)throw Hq();const I={name:f.fullPath},P=Um(o,t.host,t._protocol),x="POST",S=t.maxUploadRetryTime,C=new YA(P,x,C$(t,n),S);return C.urlParams=I,C.headers=s,C.body=_.uploadData(),C.errorHandler=XA(e),C}class k${constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Ci.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Ci.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Ci.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i,o){if(this.sent_)throw Ms("cannot .send() more than once");if(ni(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),o!==void 0)for(const s in o)o.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,o[s].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Ms("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Ms("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Ms("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Ms("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class N$ extends k${initXhr(){this.xhr_.responseType="text"}}function ZA(){return new N$}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi{constructor(e,n){this._service=e,n instanceof Gt?this._location=n:this._location=Gt.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new xi(e,n)}get root(){const e=new Gt(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return WA(this._location.path)}get storage(){return this._service}get parent(){const e=p$(this._location.path);if(e===null)return null;const n=new Gt(this._location.bucket,e);return new xi(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw Wq(e)}}function M$(t,e,n){t._throwIfRoot("uploadBytes");const r=P$(t.storage,t._location,KA(),new Ar(e,!0),n);return t.storage.makeRequestWithTokens(r,ZA).then(i=>({metadata:i,ref:t}))}function x$(t){t._throwIfRoot("getDownloadURL");const e=S$(t.storage,t._location,KA());return t.storage.makeRequestWithTokens(e,ZA).then(n=>{if(n===null)throw Gq();return n})}function D$(t,e){const n=m$(t._location.path,e),r=new Gt(t._location.bucket,n);return new xi(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V$(t){return/^[A-Za-z]+:\/\//.test(t)}function L$(t,e){return new xi(t,e)}function jA(t,e){if(t instanceof Fm){const n=t;if(n._bucket==null)throw $q();const r=new xi(n,n._bucket);return e!=null?jA(r,e):r}else return e!==void 0?D$(t,e):t}function U$(t,e){if(e&&V$(e)){if(t instanceof Fm)return L$(t,e);throw Fh("To use ref(service, url), the first argument must be a Storage instance.")}else return jA(t,e)}function jT(t,e){const n=e==null?void 0:e[OA];return n==null?null:Gt.makeFromBucketSpec(n,t)}function F$(t,e,n,r={}){t.host=`${e}:${n}`;const i=ni(e);i&&(Bp(`https://${t.host}/b`),qp("Storage",!0)),t._isUsingEmulator=!0,t._protocol=i?"https":"http";const{mockUserToken:o}=r;o&&(t._overrideAuthToken=typeof o=="string"?o:vw(o,t.app.options.projectId))}class Fm{constructor(e,n,r,i,o,s=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=o,this._isUsingEmulator=s,this._bucket=null,this._host=bA,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Mq,this._maxUploadRetryTime=xq,this._requests=new Set,i!=null?this._bucket=Gt.makeFromBucketSpec(i,this._host):this._bucket=jT(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Gt.makeFromBucketSpec(this._url,e):this._bucket=jT(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){ZT("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){ZT("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Zt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new xi(this,e)}_makeRequest(e,n,r,i,o=!0){if(this._deleted)return new Kq(BA());{const s=i$(e,this._appId,r,i,n,this._firebaseVersion,o,this._isUsingEmulator);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const eE="@firebase/storage",tE="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eR="storage";function nE(t,e,n){return t=Pe(t),M$(t,e,n)}function rE(t){return t=Pe(t),x$(t)}function iE(t,e){return t=Pe(t),U$(t,e)}function b$(t=Gp(),e){t=Pe(t);const r=Qo(t,eR).getImmediate({identifier:e}),i=gw("storage");return i&&O$(r,...i),r}function O$(t,e,n,r={}){F$(t,e,n,r)}function B$(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new Fm(n,r,i,e,Bi)}function q$(){_n(new ln(eR,B$,"PUBLIC").setMultipleInstances(!0)),bt(eE,tE,""),bt(eE,tE,"esm2020")}q$();const $$={apiKey:"AIzaSyAB2LImUOxv1BstMB12UTFyMfWbvxKjrjg",authDomain:"cps-belvedere.firebaseapp.com",projectId:"cps-belvedere",storageBucket:"cps-belvedere.firebasestorage.app",messagingSenderId:"1089833077765",appId:"1:1089833077765:web:28e8a2b3126f4c8d56e06c"},Wc=Cw($$),ju=pB(Wc),nt=fq(Wc),oE=b$(Wc);let tR=null;try{tR=getMessaging(Wc)}catch(t){console.warn("Firebase Messaging could not be initialized.",t)}const sE=tR,nR="@firebase/installations",bm="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rR=1e4,iR=`w:${bm}`,oR="FIS_v2",H$="https://firebaseinstallations.googleapis.com/v1",G$=60*60*1e3,z$="installations",W$="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K$={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Di=new Oi(z$,W$,K$);function sR(t){return t instanceof Cn&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aR({projectId:t}){return`${H$}/projects/${t}/installations`}function lR(t){return{token:t.token,requestStatus:2,expiresIn:Y$(t.expiresIn),creationTime:Date.now()}}async function uR(t,e){const r=(await e.json()).error;return Di.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function cR({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function J$(t,{refreshToken:e}){const n=cR(t);return n.append("Authorization",Q$(e)),n}async function fR(t){const e=await t();return e.status>=500&&e.status<600?t():e}function Y$(t){return Number(t.replace("s","000"))}function Q$(t){return`${oR} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function X$({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=aR(t),i=cR(t),o=e.getImmediate({optional:!0});if(o){const f=await o.getHeartbeatsHeader();f&&i.append("x-firebase-client",f)}const s={fid:n,authVersion:oR,appId:t.appId,sdkVersion:iR},u={method:"POST",headers:i,body:JSON.stringify(s)},c=await fR(()=>fetch(r,u));if(c.ok){const f=await c.json();return{fid:f.fid||n,registrationStatus:2,refreshToken:f.refreshToken,authToken:lR(f.authToken)}}else throw await uR("Create Installation",c)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dR(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z$(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j$=/^[cdef][\w-]{21}$/,bh="";function e9(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=t9(t);return j$.test(n)?n:bh}catch{return bh}}function t9(t){return Z$(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kc(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hR=new Map;function pR(t,e){const n=Kc(t);mR(n,e),n9(n,e)}function mR(t,e){const n=hR.get(t);if(n)for(const r of n)r(e)}function n9(t,e){const n=r9();n&&n.postMessage({key:t,fid:e}),i9()}let _i=null;function r9(){return!_i&&"BroadcastChannel"in self&&(_i=new BroadcastChannel("[Firebase] FID Change"),_i.onmessage=t=>{mR(t.data.key,t.data.fid)}),_i}function i9(){hR.size===0&&_i&&(_i.close(),_i=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o9="firebase-installations-database",s9=1,Vi="firebase-installations-store";let rd=null;function Om(){return rd||(rd=Ec(o9,s9,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Vi)}}})),rd}async function ec(t,e){const n=Kc(t),i=(await Om()).transaction(Vi,"readwrite"),o=i.objectStore(Vi),s=await o.get(n);return await o.put(e,n),await i.done,(!s||s.fid!==e.fid)&&pR(t,e.fid),e}async function gR(t){const e=Kc(t),r=(await Om()).transaction(Vi,"readwrite");await r.objectStore(Vi).delete(e),await r.done}async function Jc(t,e){const n=Kc(t),i=(await Om()).transaction(Vi,"readwrite"),o=i.objectStore(Vi),s=await o.get(n),u=e(s);return u===void 0?await o.delete(n):await o.put(u,n),await i.done,u&&(!s||s.fid!==u.fid)&&pR(t,u.fid),u}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bm(t){let e;const n=await Jc(t.appConfig,r=>{const i=a9(r),o=l9(t,i);return e=o.registrationPromise,o.installationEntry});return n.fid===bh?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function a9(t){const e=t||{fid:e9(),registrationStatus:0};return yR(e)}function l9(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(Di.create("app-offline"));return{installationEntry:e,registrationPromise:i}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=u9(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:c9(t)}:{installationEntry:e}}async function u9(t,e){try{const n=await X$(t,e);return ec(t.appConfig,n)}catch(n){throw sR(n)&&n.customData.serverCode===409?await gR(t.appConfig):await ec(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function c9(t){let e=await aE(t.appConfig);for(;e.registrationStatus===1;)await dR(100),e=await aE(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await Bm(t);return r||n}return e}function aE(t){return Jc(t,e=>{if(!e)throw Di.create("installation-not-found");return yR(e)})}function yR(t){return f9(t)?{fid:t.fid,registrationStatus:0}:t}function f9(t){return t.registrationStatus===1&&t.registrationTime+rR<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function d9({appConfig:t,heartbeatServiceProvider:e},n){const r=h9(t,n),i=J$(t,n),o=e.getImmediate({optional:!0});if(o){const f=await o.getHeartbeatsHeader();f&&i.append("x-firebase-client",f)}const s={installation:{sdkVersion:iR,appId:t.appId}},u={method:"POST",headers:i,body:JSON.stringify(s)},c=await fR(()=>fetch(r,u));if(c.ok){const f=await c.json();return lR(f)}else throw await uR("Generate Auth Token",c)}function h9(t,{fid:e}){return`${aR(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qm(t,e=!1){let n;const r=await Jc(t.appConfig,o=>{if(!_R(o))throw Di.create("not-registered");const s=o.authToken;if(!e&&g9(s))return o;if(s.requestStatus===1)return n=p9(t,e),o;{if(!navigator.onLine)throw Di.create("app-offline");const u=_9(o);return n=m9(t,u),u}});return n?await n:r.authToken}async function p9(t,e){let n=await lE(t.appConfig);for(;n.authToken.requestStatus===1;)await dR(100),n=await lE(t.appConfig);const r=n.authToken;return r.requestStatus===0?qm(t,e):r}function lE(t){return Jc(t,e=>{if(!_R(e))throw Di.create("not-registered");const n=e.authToken;return v9(n)?{...e,authToken:{requestStatus:0}}:e})}async function m9(t,e){try{const n=await d9(t,e),r={...e,authToken:n};return await ec(t.appConfig,r),n}catch(n){if(sR(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await gR(t.appConfig);else{const r={...e,authToken:{requestStatus:0}};await ec(t.appConfig,r)}throw n}}function _R(t){return t!==void 0&&t.registrationStatus===2}function g9(t){return t.requestStatus===2&&!y9(t)}function y9(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+G$}function _9(t){const e={requestStatus:1,requestTime:Date.now()};return{...t,authToken:e}}function v9(t){return t.requestStatus===1&&t.requestTime+rR<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function T9(t){const e=t,{installationEntry:n,registrationPromise:r}=await Bm(e);return r?r.catch(console.error):qm(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function E9(t,e=!1){const n=t;return await C9(n),(await qm(n,e)).token}async function C9(t){const{registrationPromise:e}=await Bm(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I9(t){if(!t||!t.options)throw id("App Configuration");if(!t.name)throw id("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw id(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function id(t){return Di.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vR="installations",w9="installations-internal",S9=t=>{const e=t.getProvider("app").getImmediate(),n=I9(e),r=Qo(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},A9=t=>{const e=t.getProvider("app").getImmediate(),n=Qo(e,vR).getImmediate();return{getId:()=>T9(n),getToken:i=>E9(n,i)}};function R9(){_n(new ln(vR,S9,"PUBLIC")),_n(new ln(w9,A9,"PRIVATE"))}R9();bt(nR,bm);bt(nR,bm,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P9="/firebase-messaging-sw.js",k9="/firebase-cloud-messaging-push-scope",TR="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",N9="https://fcmregistrations.googleapis.com/v1",ER="google.c.a.c_id",M9="google.c.a.c_l",x9="google.c.a.ts",D9="google.c.a.e",uE=1e4;var cE;(function(t){t[t.DATA_MESSAGE=1]="DATA_MESSAGE",t[t.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"})(cE||(cE={}));/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License. You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under the License
 * is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
 * or implied. See the License for the specific language governing permissions and limitations under
 * the License.
 */var Ma;(function(t){t.PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked"})(Ma||(Ma={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zn(t){const e=new Uint8Array(t);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function V9(t){const e="=".repeat((4-t.length%4)%4),n=(t+e).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(n),i=new Uint8Array(r.length);for(let o=0;o<r.length;++o)i[o]=r.charCodeAt(o);return i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const od="fcm_token_details_db",L9=5,fE="fcm_token_object_Store";async function U9(t){if("databases"in indexedDB&&!(await indexedDB.databases()).map(o=>o.name).includes(od))return null;let e=null;return(await Ec(od,L9,{upgrade:async(r,i,o,s)=>{if(i<2||!r.objectStoreNames.contains(fE))return;const u=s.objectStore(fE),c=await u.index("fcmSenderId").get(t);if(await u.clear(),!!c){if(i===2){const f=c;if(!f.auth||!f.p256dh||!f.endpoint)return;e={token:f.fcmToken,createTime:f.createTime??Date.now(),subscriptionOptions:{auth:f.auth,p256dh:f.p256dh,endpoint:f.endpoint,swScope:f.swScope,vapidKey:typeof f.vapidKey=="string"?f.vapidKey:zn(f.vapidKey)}}}else if(i===3){const f=c;e={token:f.fcmToken,createTime:f.createTime,subscriptionOptions:{auth:zn(f.auth),p256dh:zn(f.p256dh),endpoint:f.endpoint,swScope:f.swScope,vapidKey:zn(f.vapidKey)}}}else if(i===4){const f=c;e={token:f.fcmToken,createTime:f.createTime,subscriptionOptions:{auth:zn(f.auth),p256dh:zn(f.p256dh),endpoint:f.endpoint,swScope:f.swScope,vapidKey:zn(f.vapidKey)}}}}}})).close(),await zf(od),await zf("fcm_vapid_details_db"),await zf("undefined"),F9(e)?e:null}function F9(t){if(!t||!t.subscriptionOptions)return!1;const{subscriptionOptions:e}=t;return typeof t.createTime=="number"&&t.createTime>0&&typeof t.token=="string"&&t.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b9="firebase-messaging-database",O9=1,xa="firebase-messaging-store";let sd=null;function CR(){return sd||(sd=Ec(b9,O9,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(xa)}}})),sd}async function B9(t){const e=IR(t),r=await(await CR()).transaction(xa).objectStore(xa).get(e);if(r)return r;{const i=await U9(t.appConfig.senderId);if(i)return await $m(t,i),i}}async function $m(t,e){const n=IR(t),i=(await CR()).transaction(xa,"readwrite");return await i.objectStore(xa).put(e,n),await i.done,e}function IR({appConfig:t}){return t.appId}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q9={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},Wt=new Oi("messaging","Messaging",q9);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $9(t,e){const n=await Gm(t),r=wR(e),i={method:"POST",headers:n,body:JSON.stringify(r)};let o;try{o=await(await fetch(Hm(t.appConfig),i)).json()}catch(s){throw Wt.create("token-subscribe-failed",{errorInfo:s==null?void 0:s.toString()})}if(o.error){const s=o.error.message;throw Wt.create("token-subscribe-failed",{errorInfo:s})}if(!o.token)throw Wt.create("token-subscribe-no-token");return o.token}async function H9(t,e){const n=await Gm(t),r=wR(e.subscriptionOptions),i={method:"PATCH",headers:n,body:JSON.stringify(r)};let o;try{o=await(await fetch(`${Hm(t.appConfig)}/${e.token}`,i)).json()}catch(s){throw Wt.create("token-update-failed",{errorInfo:s==null?void 0:s.toString()})}if(o.error){const s=o.error.message;throw Wt.create("token-update-failed",{errorInfo:s})}if(!o.token)throw Wt.create("token-update-no-token");return o.token}async function G9(t,e){const r={method:"DELETE",headers:await Gm(t)};try{const o=await(await fetch(`${Hm(t.appConfig)}/${e}`,r)).json();if(o.error){const s=o.error.message;throw Wt.create("token-unsubscribe-failed",{errorInfo:s})}}catch(i){throw Wt.create("token-unsubscribe-failed",{errorInfo:i==null?void 0:i.toString()})}}function Hm({projectId:t}){return`${N9}/projects/${t}/registrations`}async function Gm({appConfig:t,installations:e}){const n=await e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":`FIS ${n}`})}function wR({p256dh:t,auth:e,endpoint:n,vapidKey:r}){const i={web:{endpoint:n,auth:e,p256dh:t}};return r!==TR&&(i.web.applicationPubKey=r),i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z9=7*24*60*60*1e3;async function W9(t){const e=await J9(t.swRegistration,t.vapidKey),n={vapidKey:t.vapidKey,swScope:t.swRegistration.scope,endpoint:e.endpoint,auth:zn(e.getKey("auth")),p256dh:zn(e.getKey("p256dh"))},r=await B9(t.firebaseDependencies);if(r){if(Y9(r.subscriptionOptions,n))return Date.now()>=r.createTime+z9?K9(t,{token:r.token,createTime:Date.now(),subscriptionOptions:n}):r.token;try{await G9(t.firebaseDependencies,r.token)}catch(i){console.warn(i)}return dE(t.firebaseDependencies,n)}else return dE(t.firebaseDependencies,n)}async function K9(t,e){try{const n=await H9(t.firebaseDependencies,e),r={...e,token:n,createTime:Date.now()};return await $m(t.firebaseDependencies,r),n}catch(n){throw n}}async function dE(t,e){const r={token:await $9(t,e),createTime:Date.now(),subscriptionOptions:e};return await $m(t,r),r.token}async function J9(t,e){const n=await t.pushManager.getSubscription();return n||t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:V9(e)})}function Y9(t,e){const n=e.vapidKey===t.vapidKey,r=e.endpoint===t.endpoint,i=e.auth===t.auth,o=e.p256dh===t.p256dh;return n&&r&&i&&o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hE(t){const e={from:t.from,collapseKey:t.collapse_key,messageId:t.fcmMessageId};return Q9(e,t),X9(e,t),Z9(e,t),e}function Q9(t,e){if(!e.notification)return;t.notification={};const n=e.notification.title;n&&(t.notification.title=n);const r=e.notification.body;r&&(t.notification.body=r);const i=e.notification.image;i&&(t.notification.image=i);const o=e.notification.icon;o&&(t.notification.icon=o)}function X9(t,e){e.data&&(t.data=e.data)}function Z9(t,e){var i,o,s,u;if(!e.fcmOptions&&!((i=e.notification)!=null&&i.click_action))return;t.fcmOptions={};const n=((o=e.fcmOptions)==null?void 0:o.link)??((s=e.notification)==null?void 0:s.click_action);n&&(t.fcmOptions.link=n);const r=(u=e.fcmOptions)==null?void 0:u.analytics_label;r&&(t.fcmOptions.analyticsLabel=r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j9(t){return typeof t=="object"&&!!t&&ER in t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eH(t){if(!t||!t.options)throw ad("App Configuration Object");if(!t.name)throw ad("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:n}=t;for(const r of e)if(!n[r])throw ad(r);return{appName:t.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}function ad(t){return Wt.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tH{constructor(e,n,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const i=eH(e);this.firebaseDependencies={app:e,appConfig:i,installations:n,analyticsProvider:r}}_delete(){return Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nH(t){try{t.swRegistration=await navigator.serviceWorker.register(P9,{scope:k9}),t.swRegistration.update().catch(()=>{}),await rH(t.swRegistration)}catch(e){throw Wt.create("failed-service-worker-registration",{browserErrorMessage:e==null?void 0:e.message})}}async function rH(t){return new Promise((e,n)=>{const r=setTimeout(()=>n(new Error(`Service worker not registered after ${uE} ms`)),uE),i=t.installing||t.waiting;t.active?(clearTimeout(r),e()):i?i.onstatechange=o=>{var s;((s=o.target)==null?void 0:s.state)==="activated"&&(i.onstatechange=null,clearTimeout(r),e())}:(clearTimeout(r),n(new Error("No incoming service worker found.")))})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iH(t,e){if(!e&&!t.swRegistration&&await nH(t),!(!e&&t.swRegistration)){if(!(e instanceof ServiceWorkerRegistration))throw Wt.create("invalid-sw-registration");t.swRegistration=e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oH(t,e){e?t.vapidKey=e:t.vapidKey||(t.vapidKey=TR)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SR(t,e){if(!navigator)throw Wt.create("only-available-in-window");if(Notification.permission==="default"&&await Notification.requestPermission(),Notification.permission!=="granted")throw Wt.create("permission-blocked");return await oH(t,e==null?void 0:e.vapidKey),await iH(t,e==null?void 0:e.serviceWorkerRegistration),W9(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sH(t,e,n){const r=aH(e);(await t.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:n[ER],message_name:n[M9],message_time:n[x9],message_device_time:Math.floor(Date.now()/1e3)})}function aH(t){switch(t){case Ma.NOTIFICATION_CLICKED:return"notification_open";case Ma.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lH(t,e){const n=e.data;if(!n.isFirebaseMessaging)return;t.onMessageHandler&&n.messageType===Ma.PUSH_RECEIVED&&(typeof t.onMessageHandler=="function"?t.onMessageHandler(hE(n)):t.onMessageHandler.next(hE(n)));const r=n.data;j9(r)&&r[D9]==="1"&&await sH(t,n.messageType,r)}const pE="@firebase/messaging",mE="0.12.23";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uH=t=>{const e=new tH(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),t.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",n=>lH(e,n)),e},cH=t=>{const e=t.getProvider("messaging").getImmediate();return{getToken:r=>SR(e,r)}};function fH(){_n(new ln("messaging",uH,"PUBLIC")),_n(new ln("messaging-internal",cH,"PRIVATE")),bt(pE,mE),bt(pE,mE,"esm2020")}async function dH(t,e){return t=Pe(t),SR(t,e)}fH();var gE={};const hH=["Controllo generale filtri aria condizionata","Verifica funzionamento estintori e luci di emergenza","Ispezione e pulizia aree comuni","Test scarichi e rubinetti per perdite"],pH=["Pulizia approfondita unità HVAC","Test completo sistema allarmi antincendio","Controllo e pulizia grondaie e pluviali","Verifica pressione impianto idraulico","Ispezione tetto e infissi esterni"],vr=t=>t.toISOString().split("T")[0],mH=t=>{const e={weekday:"long",year:"numeric",month:"long",day:"numeric"};return t.toLocaleDateString("it-IT",e)},AR=(t,e)=>{if(!t)return"";const n=new Date(e);n.setHours(0,0,0,0);const i=new Date(t+"T00:00:00").getTime()-n.getTime(),o=Math.ceil(i/(1e3*60*60*24));return o<=1?"urgency-high":o<=3?"urgency-medium":o>5?"urgency-low":""},gH=()=>{const[t,e]=ae.useState(""),[n,r]=ae.useState(""),[i,o]=ae.useState(!1),[s,u]=ae.useState(""),[c,f]=ae.useState(!0),[h,p]=ae.useState(!1),m=ae.useRef(null);ae.useEffect(()=>{var I;(I=m.current)==null||I.focus()},[]);const _=async I=>{I.preventDefault(),u(""),p(!0);try{await e4(ju,c?Qw:Xp),await jO(ju,t,n)}catch{u("Credenziali non valide. Riprova.")}finally{p(!1)}};return V.jsx("div",{className:"login-container",children:V.jsxs("div",{className:"login-form",children:[V.jsx("h2",{children:"Accesso"}),V.jsxs("form",{onSubmit:_,children:[V.jsx("input",{ref:m,type:"email",value:t,onChange:I=>e(I.target.value),placeholder:"Email",className:"login-input",disabled:h}),V.jsxs("div",{className:"password-input-container",children:[V.jsx("input",{type:i?"text":"password",value:n,onChange:I=>r(I.target.value),placeholder:"Password",className:"login-input",disabled:h}),V.jsx("button",{type:"button",className:"show-password-btn",onClick:()=>o(!i),disabled:h,children:i?"🙈":"👁️"})]}),V.jsxs("div",{className:"remember-me-container",children:[V.jsx("input",{type:"checkbox",id:"remember-me",checked:c,onChange:I=>f(I.target.checked),disabled:h}),V.jsx("label",{htmlFor:"remember-me",children:"Ricordami"})]}),s&&V.jsx("p",{className:"error-message",children:s}),V.jsx("button",{type:"submit",className:"login-button",disabled:h,children:h?V.jsx("div",{className:"spinner"}):"Accedi"})]})]})})},yH=({user:t,viewingUser:e,taskToEdit:n,onClose:r,onSaveTask:i,onCreateChecklistTask:o})=>{const s="id"in n,[u,c]=ae.useState(s&&n.text||""),[f,h]=ae.useState(s&&n.dueDate||""),p=PE.useRef(null);ae.useEffect(()=>{var I;(I=p.current)==null||I.focus()},[]);const m=()=>{u.trim()&&i({text:u.trim(),dueDate:f||void 0},s?n:void 0)},_=I=>{I.key==="Enter"?m():I.key==="Escape"&&r()};return V.jsx("div",{className:"modal-overlay",onClick:r,children:V.jsxs("div",{className:"modal-content",onClick:I=>I.stopPropagation(),children:[V.jsx("h3",{children:s?"Modifica Attività":"Nuova Attività"}),V.jsx("input",{ref:p,type:"text",className:"modal-input",value:u,onChange:I=>c(I.target.value),onKeyDown:_,placeholder:"Cosa c'è da fare?"}),t.role==="admin"&&V.jsxs("div",{className:"form-group",children:[V.jsx("label",{htmlFor:"due-date",children:"Data di Scadenza"}),V.jsx("input",{id:"due-date",type:"date",className:"modal-input",value:f,onChange:I=>h(I.target.value),min:vr(new Date)})]}),t.role==="admin"&&e==="Juan"&&!s&&V.jsxs("div",{className:"checklist-actions",children:[V.jsx("p",{children:"O imposta una scadenza e crea una checklist di manutenzione:"}),V.jsx("button",{className:"checklist-btn monthly",onClick:()=>o("monthly",f),disabled:!f,title:f?"":"Seleziona una data di scadenza prima di creare una checklist",children:"Crea Manutenzione Mensile"}),V.jsx("button",{className:"checklist-btn quarterly",onClick:()=>o("quarterly",f),disabled:!f,title:f?"":"Seleziona una data di scadenza prima di creare una checklist",children:"Crea Manutenzione Trimestrale"})]}),V.jsxs("div",{className:"modal-actions",children:[V.jsx("button",{className:"modal-btn-cancel",onClick:r,children:"Annulla"}),V.jsx("button",{className:"modal-btn-add",onClick:m,children:s?"Salva":"Aggiungi"})]})]})})},_H=({isOpen:t,isLoading:e,suggestions:n,onAdd:r,onClose:i})=>{if(!t)return null;const o=n.contestuali&&n.contestuali.length>0,s=n.stagionali&&n.stagionali.length>0;return V.jsx("div",{className:"modal-overlay",onClick:i,children:V.jsxs("div",{className:"modal-content",onClick:u=>u.stopPropagation(),children:[V.jsx("h3",{children:"✨ Suggerimenti AI"}),e?V.jsx("p",{className:"loading-suggestions",children:"Ricerca di suggerimenti in corso..."}):V.jsxs("div",{className:"suggestions-container",children:[!o&&!s&&V.jsx("p",{children:"Nessun suggerimento trovato."}),o&&V.jsxs(V.Fragment,{children:[V.jsx("h4",{className:"suggestions-category-header",children:"In Base alle Tue Attività"}),V.jsx("ul",{className:"suggestions-list",children:n.contestuali.map((u,c)=>V.jsxs("li",{className:"suggestion-item",children:[V.jsx("span",{children:u}),V.jsx("button",{onClick:()=>r(u),className:"add-suggestion-btn","aria-label":`Aggiungi task: ${u}`,children:"+"})]},`ctx-${c}`))})]}),s&&V.jsxs(V.Fragment,{children:[V.jsx("h4",{className:"suggestions-category-header",children:"Suggerimenti del Mese"}),V.jsx("ul",{className:"suggestions-list",children:n.stagionali.map((u,c)=>V.jsxs("li",{className:"suggestion-item",children:[V.jsx("span",{children:u}),V.jsx("button",{onClick:()=>r(u),className:"add-suggestion-btn","aria-label":`Aggiungi task: ${u}`,children:"+"})]},`sea-${c}`))})]})]}),V.jsx("div",{className:"modal-actions",children:V.jsx("button",{className:"modal-btn-cancel",onClick:i,children:"Chiudi"})})]})})},vH=({imageUrl:t,onClose:e})=>V.jsx("div",{className:"modal-overlay photo-modal-overlay",onClick:e,children:V.jsxs("div",{className:"photo-modal-content",onClick:n=>n.stopPropagation(),children:[V.jsx("img",{src:t,alt:"Prova del lavoro"}),V.jsx("button",{onClick:e,className:"modal-btn-cancel",children:"Chiudi"})]})}),TH=({allTasks:t,viewingUser:e,handleToggleTask:n,handleToggleSubtask:r,handleToggleImportance:i,handleDeleteTask:o,handleBreakdownTask:s,handleUpdateNote:u,handleSubtaskPhotoUpload:c,setModalState:f})=>{const[h,p]=ae.useState("da_fare"),[m,_]=ae.useState(null),[I,P]=ae.useState(""),x=["Juan","Elias","Matteo","Angelo"],{globalStats:S,priorityTasks:C,userStats:A}=ae.useMemo(()=>{const v=["Juan","Matteo","Angelo","Elias"],T=Object.values(t).flat(),w=new Date;w.setDate(w.getDate()-7);const R=vr(w);return{globalStats:{totalPending:T.filter(M=>!M.completed).length,completedLastWeek:T.filter(M=>M.completed&&M.date>=R).length},priorityTasks:T.filter(M=>M.important&&!M.completed),userStats:v.map(M=>{const N=t[M]||[],ve=N.filter(qn=>qn.completed).length,ye=N.length,Ot=ye>0?ve/ye*100:0;return{username:M,completed:ve,pending:ye-ve,total:ye,progress:Ot}})}},[t]),D=ae.useMemo(()=>{const v=(t[e]||[]).slice().sort((T,w)=>(w.important?1:0)-(T.important?1:0));return h==="da_fare"?v.filter(T=>!T.completed):h==="completate"?v.filter(T=>T.completed):v},[t,e,h]),F=v=>{m===v.id?_(null):(P(v.note||""),_(v.id))},b=v=>{u(v,I),_(null)};return V.jsxs("section",{className:"admin-dashboard",children:[V.jsxs("div",{className:"stats-grid",children:[V.jsxs("div",{className:"stat-widget",children:[V.jsx("h3",{children:"Attività da Fare"}),V.jsx("p",{className:"stat-value",children:S.totalPending})]}),V.jsxs("div",{className:"stat-widget",children:[V.jsx("h3",{children:"Completate (7gg)"}),V.jsx("p",{className:"stat-value",children:S.completedLastWeek})]})]}),V.jsxs("div",{className:"widget-container",children:[V.jsxs("div",{className:"widget",children:[V.jsx("h3",{children:"Panoramica Utenti"}),V.jsx("div",{className:"user-overview-grid",children:A.map(({username:v,completed:T,pending:w,progress:R})=>V.jsxs("div",{className:"user-card",children:[V.jsx("h4",{children:v}),V.jsxs("p",{children:["In Sospeso: ",w," / Completate: ",T]}),V.jsx("div",{className:"progress-bar-container",children:V.jsx("div",{className:"progress-bar-fill",style:{width:`${R}%`}})})]},v))})]}),C.length>0&&V.jsxs("div",{className:"widget",children:[V.jsx("h3",{children:"★ Priorità Assolute"}),V.jsx("ul",{className:"priority-tasks-list",children:C.map(v=>V.jsx("li",{children:V.jsxs("span",{children:[v.text," (",v.owner,")"]})},v.id))})]})]}),V.jsxs("div",{className:"task-management-section",children:[V.jsxs("h2",{children:["Gestione Attività: ",e]}),V.jsxs("div",{className:"task-filters",children:[V.jsx("button",{className:h==="da_fare"?"active":"",onClick:()=>p("da_fare"),children:"Da Fare"}),V.jsx("button",{className:h==="completate"?"active":"",onClick:()=>p("completate"),children:"Completate"}),V.jsx("button",{className:h==="tutte"?"active":"",onClick:()=>p("tutte"),children:"Tutte"})]}),D.length>0?V.jsx("ul",{className:"task-list",children:D.map(v=>{const T=AR(v.dueDate,new Date),w=m===v.id;return V.jsxs("li",{className:`task-item ${v.completed?"completed":""} ${v.important?"important":""} ${v.isBreakingDown?"loading":""} ${T}`,children:[V.jsx("button",{className:`importance-btn ${v.important?"active":""}`,onClick:R=>{R.stopPropagation(),i(v.id)},children:"★"}),V.jsxs("div",{className:"task-content-wrapper",children:[V.jsxs("div",{className:"task-main",onClick:()=>n(v.id),children:[V.jsx("div",{className:`checkbox ${v.completed?"checked":""}`,children:v.completed&&"✓"}),V.jsxs("div",{className:"task-text-container",children:[V.jsx("span",{className:"task-text",children:v.text}),v.dueDate&&V.jsxs("span",{className:`task-due-date ${T}`,children:["Scadenza: ",new Date(v.dueDate+"T00:00:00").toLocaleDateString("it-IT",{year:"numeric",month:"long",day:"numeric"})]})]})]}),v.subtasks&&v.subtasks.length>0&&V.jsx("ul",{className:"subtask-list",children:v.subtasks.map(R=>V.jsxs("li",{className:`subtask-item ${R.completed?"completed":""}`,children:[V.jsxs("div",{className:"subtask-content",onClick:()=>r(v.id,R.id),children:[V.jsx("div",{className:`checkbox ${R.completed?"checked":""}`,children:R.completed&&"✓"}),V.jsx("span",{className:"task-text",children:R.text})]}),x.includes(e)&&R.photo&&V.jsx("img",{src:R.photo,alt:"Anteprima sotto-attività",className:"task-photo-thumbnail subtask-photo-thumbnail",onClick:()=>f({type:"photo",data:R.photo})})]},R.id))}),w&&V.jsxs("div",{className:"note-section",children:[V.jsx("textarea",{className:"note-textarea",value:I,onChange:R=>P(R.target.value),placeholder:"Aggiungi una nota..."}),V.jsx("button",{className:"note-save-btn",onClick:()=>b(v.id),children:"Salva"})]})]}),V.jsxs("div",{className:"task-actions",children:[x.includes(e)&&v.photo&&V.jsx("img",{src:v.photo,alt:"Anteprima",className:"task-photo-thumbnail",onClick:()=>f({type:"photo",data:v.photo})}),V.jsx("button",{className:`action-btn note-toggle-btn ${w?"expanded":""}`,onClick:()=>F(v),children:"📝"}),V.jsx("button",{className:"action-btn breakdown-btn",onClick:()=>s(v.id),disabled:v.isBreakingDown,children:"🪄"}),V.jsx("button",{className:"action-btn edit-btn",onClick:()=>f({type:"task",data:v}),children:"✏️"}),V.jsx("button",{className:"action-btn delete-btn",onClick:()=>o(v.id),children:"×"})]})]},v.id)})}):V.jsx("p",{className:"no-tasks",children:"Nessuna attività per i filtri selezionati."})]})]})};function EH({user:t,onLogout:e}){const[n,r]=ae.useState({}),[i,o]=ae.useState(""),[s,u]=ae.useState(new Date),[c,f]=ae.useState({type:null}),[h,p]=ae.useState({stagionali:[],contestuali:[]}),[m,_]=ae.useState(!1),[I,P]=ae.useState(t.role==="admin"?"Juan":t.username),[x,S]=ae.useState(null),[C,A]=ae.useState(""),[D,F]=ae.useState(null),b=ae.useMemo(()=>n[I]||[],[n,I]),v=["Juan","Elias","Matteo","Angelo"];ae.useEffect(()=>{let q;t.role==="admin"?q=zT(Vl(nt,"tasks")):q=zT(Vl(nt,"tasks"),wq("owner","==",t.username));const oe=kq(q,ie=>{const pe={};ie.docs.forEach(ne=>{const ke=ne.data(),qe={id:ne.id,...ke,subtasks:ke.subtasks||[]};pe[qe.owner]||(pe[qe.owner]=[]),pe[qe.owner].push(qe)}),r(pe)});return()=>oe()},[t]);const T=async(q,oe)=>{oe!=null&&oe.id?await cn(Nt(nt,"tasks",oe.id),{text:q.text,dueDate:q.dueDate||null}):await YT(Vl(nt,"tasks"),{text:q.text,date:vr(new Date),completed:!1,important:!1,subtasks:[],dueDate:q.dueDate||null,owner:I,createdAt:QT()}),f({type:null})},w=async q=>{const oe=Object.values(n).flat().find(ie=>ie.id===q);oe&&await cn(Nt(nt,"tasks",q),{completed:!oe.completed,date:vr(new Date)})},R=async q=>{const oe=Object.values(n).flat().find(ie=>ie.id===q);oe&&await cn(Nt(nt,"tasks",q),{important:!oe.important})},k=async(q,oe)=>{const ie=Object.values(n).flat().find(pe=>pe.id===q);if(ie){const pe=ie.subtasks.map(ke=>ke.id===oe?{...ke,completed:!ke.completed}:ke),ne=pe.every(ke=>ke.completed);await cn(Nt(nt,"tasks",q),{subtasks:pe,completed:ne})}},M=async q=>await Pq(Nt(nt,"tasks",q)),N=async(q,oe)=>await cn(Nt(nt,"tasks",q),{note:oe}),ve=async(q,oe)=>{if(oe){F(q);try{const ie=iE(oE,`tasks/${q}/${oe.name}`),pe=await nE(ie,oe).then(ne=>rE(ne.ref));await cn(Nt(nt,"tasks",q),{photo:pe})}finally{F(null)}}},ye=async(q,oe,ie)=>{const pe=`${q}-${oe}`;F(pe);try{const ne=Object.values(n).flat().find(Tt=>Tt.id===q);if(!ne||!ie)return;const ke=iE(oE,`subtasks/${pe}/${ie.name}`),qe=await nE(ke,ie).then(Tt=>rE(Tt.ref)),Hn=ne.subtasks.map(Tt=>Tt.id===oe?{...Tt,photo:qe}:Tt);await cn(Nt(nt,"tasks",q),{subtasks:Hn})}finally{F(null)}},Ot=async(q,oe)=>{const ie=q==="monthly",ne=(ie?hH:pH).map((ke,qe)=>({id:(Date.now()+qe).toString(),text:ke,completed:!1}));await YT(Vl(nt,"tasks"),{text:ie?"Manutenzione Mensile":"Manutenzione Trimestrale",date:vr(new Date),completed:!1,important:!0,subtasks:ne,dueDate:oe||null,owner:I,createdAt:QT()}),f({type:null})},qn=async()=>{_(!0),f({type:"suggestion"}),p({stagionali:[],contestuali:[]});try{const q=new mv({apiKey:gE.API_KEY}),oe=n[I]||[],ie=oe.length>0?oe.map(Tt=>`- ${Tt.text}`).join(`
`):"Nessuna attività corrente.",pe=new Date().toLocaleString("it-IT",{month:"long"}),ne=`
                Sei un esperto di manutenzione di proprietà in Italia.
                Basandoti sulla lista di attività attuali e sul mese corrente, fornisci suggerimenti di manutenzione.
                Il mese corrente è ${pe}.
                La lista delle attività attuali dell'utente (${I}) è:
                ${ie}

                Fornisci due tipi di suggerimenti:
                1.  **Suggerimenti Stagionali**: 3-4 compiti di manutenzione rilevanti per il mese di ${pe} in Italia. Non suggerire attività già presenti nella lista utente.
                2.  **Suggerimenti Contestuali**: 2-3 compiti correlati o successivi a quelli già presenti nella lista. Se la lista è vuota, suggerisci attività di base per iniziare.

                Fornisci solo l'output JSON.`,ke={type:ht.OBJECT,properties:{stagionali:{type:ht.ARRAY,items:{type:ht.STRING}},contestuali:{type:ht.ARRAY,items:{type:ht.STRING}}},required:["stagionali","contestuali"]},qe=await q.models.generateContent({model:"gemini-2.5-flash",contents:ne,config:{responseMimeType:"application/json",responseSchema:ke}}),Hn=JSON.parse(qe.text);p(Hn)}catch(q){console.error("Errore durante la generazione dei suggerimenti:",q),p({stagionali:["Errore nel caricamento dei suggerimenti."],contestuali:[]})}finally{_(!1)}},G=async q=>{const oe=Object.values(n).flat().find(ie=>ie.id===q);if(!(!oe||oe.subtasks.length>0)){await cn(Nt(nt,"tasks",q),{isBreakingDown:!0});try{const ie=new mv({apiKey:gE.API_KEY}),pe=`Scomponi questa attività di manutenzione in una lista di 2-5 sotto-attività semplici e attuabili. Attività principale: "${oe.text}"`,ne={type:ht.OBJECT,properties:{subtasks:{type:ht.ARRAY,items:{type:ht.STRING}}},required:["subtasks"]},ke=await ie.models.generateContent({model:"gemini-2.5-flash",contents:pe,config:{responseMimeType:"application/json",responseSchema:ne}}),qe=JSON.parse(ke.text);if(qe.subtasks&&qe.subtasks.length>0){const Hn=qe.subtasks.map((Tt,Qa)=>({id:`${Date.now()}-${Qa}`,text:Tt,completed:!1}));await cn(Nt(nt,"tasks",q),{subtasks:Hn})}}catch(ie){console.error("Errore durante la scomposizione dell'attività:",ie)}finally{await cn(Nt(nt,"tasks",q),{isBreakingDown:!1})}}},Z=q=>{T({text:q})},te=q=>{x===q.id?S(null):(A(q.note||""),S(q.id))},Te=q=>{N(q,C),S(null)},Me=()=>u(q=>new Date(q.setDate(q.getDate()-1))),$n=()=>u(q=>new Date(q.setDate(q.getDate()+1))),Pt=()=>u(new Date),In=ae.useMemo(()=>{const q=vr(s);return b.filter(ie=>{if(ie.completed)return ie.date===q;const pe=ie.date<=q,ne=!ie.dueDate||q<=ie.dueDate;return pe&&ne}).sort((ie,pe)=>(pe.important?1:0)-(ie.important?1:0))},[b,s]),kt=ae.useMemo(()=>In.filter(q=>q.text.toLowerCase().includes(i.toLowerCase())),[In,i]),wn=vr(s)===vr(new Date),os=t.role==="admin"?"Admin Dashboard":`Dashboard di ${t.username}`;return V.jsxs(V.Fragment,{children:[c.type==="task"&&V.jsx(yH,{user:t,viewingUser:I,taskToEdit:c.data||{},onClose:()=>f({type:null}),onSaveTask:T,onCreateChecklistTask:Ot}),c.type==="photo"&&V.jsx(vH,{imageUrl:c.data,onClose:()=>f({type:null})}),t.role==="admin"&&V.jsx(_H,{isOpen:c.type==="suggestion",isLoading:m,suggestions:h,onAdd:Z,onClose:()=>f({type:null})}),V.jsxs("div",{className:"app-container",children:[V.jsxs("header",{className:"header",children:[V.jsx("h1",{children:os}),V.jsxs("div",{className:"controls",children:[V.jsx("input",{type:"text",placeholder:"Cerca attività...",className:"search-bar",value:i,onChange:q=>o(q.target.value)}),t.role==="admin"?V.jsxs(V.Fragment,{children:[V.jsx("select",{className:"user-selector",value:I,onChange:q=>P(q.target.value),children:["Juan","Matteo","Angelo","Elias"].map(q=>V.jsx("option",{value:q,children:q},q))}),V.jsx("button",{className:"suggest-btn",onClick:qn,disabled:m,children:m?"...":"✨ Suggerimenti"}),V.jsx("button",{className:"add-btn",onClick:()=>f({type:"task"}),children:"+ Assegna Attività"})]}):null,V.jsx("button",{className:"logout-btn",onClick:e,children:"Esci"})]})]}),t.role==="admin"?V.jsx(TH,{allTasks:n,viewingUser:I,handleToggleTask:w,handleToggleSubtask:k,handleToggleImportance:R,handleDeleteTask:M,handleBreakdownTask:G,handleUpdateNote:N,handleSubtaskPhotoUpload:ye,setModalState:f}):V.jsxs("section",{className:"daily-log",children:[V.jsxs("div",{className:"date-navigation",children:[V.jsx("button",{onClick:Me,className:"nav-btn","aria-label":"Giorno precedente",children:"<"}),V.jsxs("div",{className:"date-display",children:[V.jsx("h2",{className:"date-header",children:mH(s)}),!wn&&V.jsx("button",{className:"today-btn",onClick:Pt,children:"Oggi"})]}),V.jsx("button",{onClick:$n,className:"nav-btn","aria-label":"Giorno successivo",children:">"})]}),kt.length>0?V.jsx("ul",{className:"task-list",children:kt.map(q=>{const oe=AR(q.dueDate,s),ie=x===q.id,pe=D===q.id;return V.jsxs("li",{className:`task-item ${q.completed?"completed":""} ${q.important?"important":""} ${q.isBreakingDown?"loading":""} ${oe}`,children:[q.important&&V.jsx("span",{className:"importance-indicator","aria-label":"Attività Prioritaria",children:"★"}),V.jsxs("div",{className:"task-content-wrapper",children:[V.jsxs("div",{className:"task-main",onClick:()=>w(q.id),children:[V.jsx("div",{className:`checkbox ${q.completed?"checked":""}`,children:q.completed&&"✓"}),V.jsxs("div",{className:"task-text-container",children:[V.jsx("span",{className:"task-text",children:q.text}),q.dueDate&&V.jsxs("span",{className:`task-due-date ${oe}`,children:["Scadenza: ",new Date(q.dueDate+"T00:00:00").toLocaleDateString("it-IT",{year:"numeric",month:"long",day:"numeric"})]})]})]}),q.subtasks&&q.subtasks.length>0&&V.jsx("ul",{className:"subtask-list",children:q.subtasks.map(ne=>{const ke=D===`${q.id}-${ne.id}`;return V.jsxs("li",{className:`subtask-item ${ne.completed?"completed":""}`,children:[V.jsxs("div",{className:"subtask-content",onClick:()=>k(q.id,ne.id),children:[V.jsx("div",{className:`checkbox ${ne.completed?"checked":""}`,children:ne.completed&&"✓"}),V.jsx("span",{className:"task-text",children:ne.text})]}),v.includes(t.username)&&!ne.completed&&V.jsxs("label",{className:`action-btn photo-upload-btn subtask-photo-btn ${ne.photo&&!ke?"uploaded":""}`,"aria-label":ne.photo?"Foto caricata":"Carica foto per sotto-attività",children:[ke?V.jsx("div",{className:"photo-spinner"}):ne.photo?"✅":"📷",V.jsx("input",{type:"file",accept:"image/*",style:{display:"none"},disabled:ke,onChange:qe=>{qe.target.files&&qe.target.files[0]&&ye(q.id,ne.id,qe.target.files[0]),qe.target.value=""}})]})]},ne.id)})}),ie&&V.jsxs("div",{className:"note-section",children:[V.jsx("textarea",{className:"note-textarea",value:C,onChange:ne=>A(ne.target.value),placeholder:"Aggiungi una nota..."}),V.jsx("button",{className:"note-save-btn",onClick:()=>Te(q.id),children:"Salva"})]})]}),V.jsx("div",{className:"task-actions",children:q.completed?V.jsx("div",{className:"task-completed-feedback",children:"😊 Grazie!"}):V.jsxs(V.Fragment,{children:[v.includes(t.username)&&V.jsxs("label",{className:`action-btn photo-upload-btn ${q.photo&&!pe?"uploaded":""}`,"aria-label":q.photo?"Foto caricata":"Carica foto di prova",children:[pe?V.jsx("div",{className:"photo-spinner"}):q.photo?"✅":"📷",V.jsx("input",{type:"file",accept:"image/*",style:{display:"none"},disabled:pe,onChange:ne=>{ne.target.files&&ne.target.files[0]&&ve(q.id,ne.target.files[0]),ne.target.value=""}})]}),V.jsx("button",{className:`action-btn note-toggle-btn ${ie?"expanded":""}`,"aria-label":ie?"Chiudi nota":"Apri nota",onClick:()=>te(q),children:"📝"}),V.jsx("button",{className:"action-btn breakdown-btn","aria-label":`Scomponi task ${q.text}`,onClick:()=>G(q.id),disabled:q.isBreakingDown,children:"🪄"}),V.jsx("button",{className:"action-btn edit-btn","aria-label":`Modifica task ${q.text}`,onClick:()=>f({type:"task",data:q}),children:"✏️"})]})})]},q.id)})}):V.jsx("p",{className:"no-tasks",children:"Nessuna attività per questa giornata."})]})]})]})}const CH=()=>{const[t,e]=ae.useState(null),[n,r]=ae.useState(!0);ae.useEffect(()=>{const o=async u=>{if(!sE){console.log("Firebase Messaging is not supported or failed to initialize. Skipping notification permission request.");return}try{if(await Notification.requestPermission()==="granted"){console.log("Notification permission granted.");const h=await dH(sE,{vapidKey:"BC10KhpAMyqWpqXurxG4t11zqyscTy5-t7UWpvoJS-IENyu0PzcirK1jkBpomlK22x0dXm6AF3W-JcTzjTxfEmQ"});if(h){console.log("FCM Token:",h);const p=Nt(nt,"fcm_tokens",u);(await Rq(p)).exists()?await cn(p,{tokens:Nq(h)}):await JT(p,{tokens:[h]})}else console.log("No registration token available. Request permission to generate one.")}else console.log("Unable to get permission to notify.")}catch(c){console.error("An error occurred while retrieving token. ",c)}},s=r4(ju,async u=>{if(u&&u.email){const c=u.email.split("@")[0],f=c.charAt(0).toUpperCase()+c.slice(1),h=f.toLowerCase()==="admin"?"admin":"user",p={username:f,role:h,email:u.email,uid:u.uid};await JT(Nt(nt,"users",u.uid),{username:p.username,email:p.email,role:p.role},{merge:!0}),e(p),await o(u.uid)}else e(null);r(!1)});return()=>s()},[]);const i=async()=>{await i4(ju)};return n?V.jsx("div",{className:"loading-screen",children:"Caricamento in corso..."}):t?V.jsx(EH,{user:t,onLogout:i}):V.jsx(gH,{})},yE=document.getElementById("root");yE&&MI(yE).render(V.jsx(PE.StrictMode,{children:V.jsx(CH,{})}));
